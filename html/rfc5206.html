<!DOCTYPE html>

<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name='description' content="RFC 5206: End-Host Mobility and Multihoming with the Host Identity Protocol中文翻译 中文RFC RFC文档 RFC翻译 RFC中文版">
  <title>RFC5206 中文翻译 中文RFC RFC文档 RFC翻译 RFC中文版</title>

  <link rel="shortcut icon" type="image/x-icon"
    href="favicon.ico" />

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

  <link rel="stylesheet" href="master.css">
  <script src="index.js"></script>
  <script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?b7f7721ebaa11b23aaf77df0590e7f4a";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();
  </script>
  <script data-ad-client="ca-pub-9129771189441092" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  
</head>
<body>
  <nav class="navbar navbar-expand navbar-light bg-light">
    <a class="navbar-brand" href="index.html">RFC2CN</a>
    <div class="collapse navbar-collapse" id="navbarText">
      <div class="navbar-nav mr-auto">
        <a class="nav-item nav-link" href="about.html">关于</a>
      </div>
    </div>
  </nav>

  <span id="rfc_number" class="hidden">5206</span>
  <div style="height: 1ex;"></div>
  <div class="jump-to-original-rfc-container">
    <a href="https://www.rfc-editor.org/rfc/rfc5206.html">
      <button type="button" class="btn btn-light btn-sm">
        <span class="jump-to-original-rfc">原文</span>
      </button>
    </a>
  </div>
  <div class="container">
    <div class="row">
      <div id="rfc_header" class="col-sm-12 col-md-12">
        <div class="alert alert-info" role="alert">
          <h1 class="alert-heading">RFC 5206: End-Host Mobility and Multihoming with the Host Identity Protocol 中文翻译</h1>
          <span class="URL">URL :
            <a href="https://datatracker.ietf.org/doc/html/rfc5206" target="_blank">
              https://datatracker.ietf.org/doc/html/rfc5206
            </a>
          </span><br>
          <span class="title_ja">
            标题 : <strong>RFC 5206</strong></span><br>
          <span class="updated_by">翻译类型 : 自动生成</span><br>
        </div>
      </div>
      <div id="rfc_alert" class="col-sm-12 col-md-12 hidden" role="alert">
        <div class="alert alert-danger">
          <span id="rfc_alert_obsoleted_by"></span>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
Network Working Group                                        P. Nikander
Request for Comments: 5206                  Ericsson Research NomadicLab
Category: Experimental                                 T. Henderson, Ed.
                                                      The Boeing Company
                                                                 C. Vogt
                                                                J. Arkko
                                            Ericsson Research NomadicLab
                                                              April 2008
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
Network Working Group                                        P. Nikander
Request for Comments: 5206                  Ericsson Research NomadicLab
Category: Experimental                                 T. Henderson, Ed.
                                                      The Boeing Company
                                                                 C. Vogt
                                                                J. Arkko
                                            Ericsson Research NomadicLab
                                                              April 2008
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
End-Host Mobility and Multihoming with the Host Identity Protocol
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
基于主机身份协议的终端主机移动性和多宿
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Status of This Memo
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
关于下段备忘
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This memo defines an Experimental Protocol for the Internet community. It does not specify an Internet standard of any kind. Discussion and suggestions for improvement are requested. Distribution of this memo is unlimited.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
这份备忘录为互联网社区定义了一个实验性协议。它没有规定任何类型的互联网标准。要求进行讨论并提出改进建议。本备忘录的分发不受限制。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Abstract
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
摘要
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document defines mobility and multihoming extensions to the Host Identity Protocol (HIP). Specifically, this document defines a general &#34;LOCATOR&#34; parameter for HIP messages that allows for a HIP host to notify peers about alternate addresses at which it may be reached. This document also defines elements of procedure for mobility of a HIP host -- the process by which a host dynamically changes the primary locator that it uses to receive packets. While the same LOCATOR parameter can also be used to support end-host multihoming, detailed procedures are left for further study.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本文档定义了主机标识协议（HIP）的移动性和多宿扩展。具体而言，本文档为HIP消息定义了一个通用“定位器”参数，该参数允许HIP主机通知对等方可能到达的备用地址。本文档还定义了HIP主机移动性的过程元素——主机动态更改用于接收数据包的主定位器的过程。虽然相同的定位器参数也可用于支持端主机多归宿，但详细的程序有待进一步研究。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Table of Contents
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
目录
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace toc">
   1.  Introduction and Scope . . . . . . . . . . . . . . . . . . . .  2
   2.  Terminology and Conventions  . . . . . . . . . . . . . . . . .  4
   3.  Protocol Model . . . . . . . . . . . . . . . . . . . . . . . .  5
     3.1.  Operating Environment  . . . . . . . . . . . . . . . . . .  5
       3.1.1.  Locator  . . . . . . . . . . . . . . . . . . . . . . .  7
       3.1.2.  Mobility Overview  . . . . . . . . . . . . . . . . . .  8
       3.1.3.  Multihoming Overview . . . . . . . . . . . . . . . . .  8
     3.2.  Protocol Overview  . . . . . . . . . . . . . . . . . . . .  9
       3.2.1.  Mobility with a Single SA Pair (No Rekeying) . . . . .  9
       3.2.2.  Mobility with a Single SA Pair (Mobile-Initiated
               Rekey) . . . . . . . . . . . . . . . . . . . . . . . . 11
       3.2.3.  Host Multihoming . . . . . . . . . . . . . . . . . . . 11
       3.2.4.  Site Multihoming . . . . . . . . . . . . . . . . . . . 13
       3.2.5.  Dual host multihoming  . . . . . . . . . . . . . . . . 14
       3.2.6.  Combined Mobility and Multihoming  . . . . . . . . . . 14
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace toc">
   1.  Introduction and Scope . . . . . . . . . . . . . . . . . . . .  2
   2.  Terminology and Conventions  . . . . . . . . . . . . . . . . .  4
   3.  Protocol Model . . . . . . . . . . . . . . . . . . . . . . . .  5
     3.1.  Operating Environment  . . . . . . . . . . . . . . . . . .  5
       3.1.1.  Locator  . . . . . . . . . . . . . . . . . . . . . . .  7
       3.1.2.  Mobility Overview  . . . . . . . . . . . . . . . . . .  8
       3.1.3.  Multihoming Overview . . . . . . . . . . . . . . . . .  8
     3.2.  Protocol Overview  . . . . . . . . . . . . . . . . . . . .  9
       3.2.1.  Mobility with a Single SA Pair (No Rekeying) . . . . .  9
       3.2.2.  Mobility with a Single SA Pair (Mobile-Initiated
               Rekey) . . . . . . . . . . . . . . . . . . . . . . . . 11
       3.2.3.  Host Multihoming . . . . . . . . . . . . . . . . . . . 11
       3.2.4.  Site Multihoming . . . . . . . . . . . . . . . . . . . 13
       3.2.5.  Dual host multihoming  . . . . . . . . . . . . . . . . 14
       3.2.6.  Combined Mobility and Multihoming  . . . . . . . . . . 14
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace toc">
       3.2.7.  Using LOCATORs across Addressing Realms  . . . . . . . 14
       3.2.8.  Network Renumbering  . . . . . . . . . . . . . . . . . 15
       3.2.9.  Initiating the Protocol in R1 or I2  . . . . . . . . . 15
     3.3.  Other Considerations . . . . . . . . . . . . . . . . . . . 16
       3.3.1.  Address Verification . . . . . . . . . . . . . . . . . 16
       3.3.2.  Credit-Based Authorization . . . . . . . . . . . . . . 17
       3.3.3.  Preferred Locator  . . . . . . . . . . . . . . . . . . 18
       3.3.4.  Interaction with Security Associations . . . . . . . . 18
   4.  LOCATOR Parameter Format . . . . . . . . . . . . . . . . . . . 21
     4.1.  Traffic Type and Preferred Locator . . . . . . . . . . . . 23
     4.2.  Locator Type and Locator . . . . . . . . . . . . . . . . . 23
     4.3.  UPDATE Packet with Included LOCATOR  . . . . . . . . . . . 24
   5.  Processing Rules . . . . . . . . . . . . . . . . . . . . . . . 24
     5.1.  Locator Data Structure and Status  . . . . . . . . . . . . 24
     5.2.  Sending LOCATORs . . . . . . . . . . . . . . . . . . . . . 25
     5.3.  Handling Received LOCATORs . . . . . . . . . . . . . . . . 28
     5.4.  Verifying Address Reachability . . . . . . . . . . . . . . 30
     5.5.  Changing the Preferred Locator . . . . . . . . . . . . . . 31
     5.6.  Credit-Based Authorization . . . . . . . . . . . . . . . . 32
       5.6.1.  Handling Payload Packets . . . . . . . . . . . . . . . 32
       5.6.2.  Credit Aging . . . . . . . . . . . . . . . . . . . . . 33
   6.  Security Considerations  . . . . . . . . . . . . . . . . . . . 34
     6.1.  Impersonation Attacks  . . . . . . . . . . . . . . . . . . 35
     6.2.  Denial-of-Service Attacks  . . . . . . . . . . . . . . . . 36
       6.2.1.  Flooding Attacks . . . . . . . . . . . . . . . . . . . 36
       6.2.2.  Memory/Computational-Exhaustion DoS Attacks  . . . . . 36
     6.3.  Mixed Deployment Environment . . . . . . . . . . . . . . . 37
   7.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . . 37
   8.  Authors and Acknowledgments  . . . . . . . . . . . . . . . . . 38
   9.  References . . . . . . . . . . . . . . . . . . . . . . . . . . 38
     9.1.  Normative references . . . . . . . . . . . . . . . . . . . 38
     9.2.  Informative references . . . . . . . . . . . . . . . . . . 38
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace toc">
       3.2.7.  Using LOCATORs across Addressing Realms  . . . . . . . 14
       3.2.8.  Network Renumbering  . . . . . . . . . . . . . . . . . 15
       3.2.9.  Initiating the Protocol in R1 or I2  . . . . . . . . . 15
     3.3.  Other Considerations . . . . . . . . . . . . . . . . . . . 16
       3.3.1.  Address Verification . . . . . . . . . . . . . . . . . 16
       3.3.2.  Credit-Based Authorization . . . . . . . . . . . . . . 17
       3.3.3.  Preferred Locator  . . . . . . . . . . . . . . . . . . 18
       3.3.4.  Interaction with Security Associations . . . . . . . . 18
   4.  LOCATOR Parameter Format . . . . . . . . . . . . . . . . . . . 21
     4.1.  Traffic Type and Preferred Locator . . . . . . . . . . . . 23
     4.2.  Locator Type and Locator . . . . . . . . . . . . . . . . . 23
     4.3.  UPDATE Packet with Included LOCATOR  . . . . . . . . . . . 24
   5.  Processing Rules . . . . . . . . . . . . . . . . . . . . . . . 24
     5.1.  Locator Data Structure and Status  . . . . . . . . . . . . 24
     5.2.  Sending LOCATORs . . . . . . . . . . . . . . . . . . . . . 25
     5.3.  Handling Received LOCATORs . . . . . . . . . . . . . . . . 28
     5.4.  Verifying Address Reachability . . . . . . . . . . . . . . 30
     5.5.  Changing the Preferred Locator . . . . . . . . . . . . . . 31
     5.6.  Credit-Based Authorization . . . . . . . . . . . . . . . . 32
       5.6.1.  Handling Payload Packets . . . . . . . . . . . . . . . 32
       5.6.2.  Credit Aging . . . . . . . . . . . . . . . . . . . . . 33
   6.  Security Considerations  . . . . . . . . . . . . . . . . . . . 34
     6.1.  Impersonation Attacks  . . . . . . . . . . . . . . . . . . 35
     6.2.  Denial-of-Service Attacks  . . . . . . . . . . . . . . . . 36
       6.2.1.  Flooding Attacks . . . . . . . . . . . . . . . . . . . 36
       6.2.2.  Memory/Computational-Exhaustion DoS Attacks  . . . . . 36
     6.3.  Mixed Deployment Environment . . . . . . . . . . . . . . . 37
   7.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . . 37
   8.  Authors and Acknowledgments  . . . . . . . . . . . . . . . . . 38
   9.  References . . . . . . . . . . . . . . . . . . . . . . . . . . 38
     9.1.  Normative references . . . . . . . . . . . . . . . . . . . 38
     9.2.  Informative references . . . . . . . . . . . . . . . . . . 38
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
1. Introduction and Scope
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
1. 导言和范围
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Host Identity Protocol [RFC4423] (HIP) supports an architecture that decouples the transport layer (TCP, UDP, etc.) from the internetworking layer (IPv4 and IPv6) by using public/private key pairs, instead of IP addresses, as host identities. When a host uses HIP, the overlying protocol sublayers (e.g., transport layer sockets and Encapsulating Security Payload (ESP) Security Associations (SAs)) are instead bound to representations of these host identities, and the IP addresses are only used for packet forwarding. However, each host must also know at least one IP address at which its peers are reachable. Initially, these IP addresses are the ones used during the HIP base exchange [RFC5201].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
主机标识协议[RFC4423]（HIP）支持通过使用公钥/私钥对（而不是IP地址）作为主机标识，将传输层（TCP、UDP等）与互联网层（IPv4和IPv6）解耦的体系结构。当主机使用HIP时，覆盖的协议子层（例如，传输层套接字和封装安全有效负载（ESP）安全关联（SA））被绑定到这些主机标识的表示，并且IP地址仅用于数据包转发。但是，每个主机还必须知道至少一个可以访问其对等机的IP地址。最初，这些IP地址是HIP-base交换期间使用的IP地址[RFC5201]。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
One consequence of such a decoupling is that new solutions to network-layer mobility and host multihoming are possible. There are potentially many variations of mobility and multihoming possible. The scope of this document encompasses messaging and elements of procedure for basic network-level mobility and simple multihoming, leaving more complicated scenarios and other variations for further study. More specifically:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
这种解耦的一个结果是，网络层移动性和主机多址的新解决方案成为可能。机动性和多归宿可能有很多变化。本文档的范围包括基本网络级移动性和简单多宿的消息传递和程序元素，留下更复杂的场景和其他变化供进一步研究。更具体地说：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
This document defines a generalized LOCATOR parameter for use in HIP messages. The LOCATOR parameter allows a HIP host to notify a peer about alternate addresses at which it is reachable. The LOCATORs may be merely IP addresses, or they may have additional multiplexing and demultiplexing context to aid the packet handling in the lower layers. For instance, an IP address may need to be paired with an ESP Security Parameter Index (SPI) so that packets are sent on the correct SA for a given address.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
本文档定义了用于HIP消息的通用定位器参数。LOCATOR参数允许HIP主机通知对等方其可访问的备用地址。定位器可以仅仅是IP地址，或者它们可以具有额外的多路复用和解多路复用上下文以帮助在较低层中处理分组。例如，IP地址可能需要与ESP安全参数索引（SPI）配对，以便在给定地址的正确SA上发送数据包。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
This document also specifies the messaging and elements of procedure for end-host mobility of a HIP host -- the sequential change in the preferred IP address used to reach a host. In particular, message flows to enable successful host mobility, including address verification methods, are defined herein.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
本文档还规定了HIP主机的终端主机移动性的消息传递和程序元素——用于到达主机的首选IP地址的顺序更改。具体地，本文定义了用于实现成功主机移动性的消息流，包括地址验证方法。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
However, while the same LOCATOR parameter is intended to support host multihoming (parallel support of a number of addresses), and experimentation is encouraged, detailed elements of procedure for host multihoming are left for further study.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
然而，虽然相同的定位器参数旨在支持主机多址（并行支持多个地址），并鼓励进行实验，但主机多址的详细步骤仍有待进一步研究。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
While HIP can potentially be used with transports other than the ESP transport format [RFC5202], this document largely assumes the use of ESP and leaves other transport formats for further study.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
虽然HIP可能用于ESP传输格式[RFC5202]以外的传输，但本文件主要假设使用ESP，并将其他传输格式留作进一步研究。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
There are a number of situations where the simple end-to-end readdressing functionality is not sufficient. These include the initial reachability of a mobile host, location privacy, simultaneous mobility of both hosts, and some modes of NAT traversal. In these situations, there is a need for some helper functionality in the network, such as a HIP rendezvous server [RFC5204]. Such functionality is out of the scope of this document. We also do not consider localized mobility management extensions (i.e., mobility management techniques that do not involve directly signaling the correspondent node); this document is concerned with end-to-end mobility. Finally, making underlying IP mobility transparent to the transport layer has implications on the proper response of transport congestion control, path MTU selection, and Quality of Service (QoS). Transport-layer mobility triggers, and the proper transport response to a HIP mobility or multihoming address change, are outside the scope of this document.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在许多情况下，简单的端到端重新修饰功能是不够的。这些包括移动主机的初始可达性、位置隐私、两台主机的同时移动以及一些NAT穿越模式。在这些情况下，网络中需要一些助手功能，例如HIP rendezvous服务器[RFC5204]。此类功能超出了本文档的范围。我们也不考虑本地化的移动性管理扩展（即，不涉及直接通知对应节点的移动性管理技术）；本文档涉及端到端的移动性。最后，使底层IP移动性对传输层透明将对传输拥塞控制、路径MTU选择和服务质量（QoS）的正确响应产生影响。传输层移动性触发器以及对HIP移动性或多宿地址更改的正确传输响应不在本文档范围内。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2. Terminology and Conventions
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2. 术语和公约
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The key words &#34;MUST&#34;, &#34;MUST NOT&#34;, &#34;REQUIRED&#34;, &#34;SHALL&#34;, &#34;SHALL NOT&#34;, &#34;SHOULD&#34;, &#34;SHOULD NOT&#34;, &#34;RECOMMENDED&#34;, &#34;MAY&#34;, and &#34;OPTIONAL&#34; in this document are to be interpreted as described in RFC 2119 [RFC2119].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本文件中的关键词“必须”、“不得”、“要求”、“应”、“不应”、“应”、“不应”、“建议”、“可”和“可选”应按照RFC 2119[RFC2119]中所述进行解释。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
LOCATOR. The name of a HIP parameter containing zero or more Locator fields. This parameter&#39;s name is distinguished from the Locator fields embedded within it by the use of all capital letters.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
定位器。包含零个或多个定位器字段的HIP参数的名称。此参数的名称通过使用所有大写字母与嵌入其中的定位器字段进行区分。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Locator. A name that controls how the packet is routed through the network and demultiplexed by the end host. It may include a concatenation of traditional network addresses such as an IPv6 address and end-to-end identifiers such as an ESP SPI. It may also include transport port numbers or IPv6 Flow Labels as demultiplexing context, or it may simply be a network address.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
定位器。控制数据包如何通过网络路由并由终端主机解复用的名称。它可以包括传统网络地址（如IPv6地址）和端到端标识符（如ESP SPI）的串联。它还可以包括传输端口号或IPv6流标签作为解复用上下文，也可以只是一个网络地址。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Address. A name that denotes a point-of-attachment to the network. The two most common examples are an IPv4 address and an IPv6 address. The set of possible addresses is a subset of the set of possible locators.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
住址表示网络连接点的名称。最常见的两个示例是IPv4地址和IPv6地址。可能地址集是可能定位器集的子集。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Preferred locator. A locator on which a host prefers to receive data. With respect to a given peer, a host always has one active Preferred locator, unless there are no active locators. By default, the locators used in the HIP base exchange are the Preferred locators.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
首选定位器。主机希望在其上接收数据的定位器。对于给定的对等方，主机总是有一个活动的首选定位器，除非没有活动定位器。默认情况下，髋部基础交换中使用的定位器是首选定位器。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Credit Based Authorization. A host must verify a mobile or multihomed peer&#39;s reachability at a new locator. Credit-Based Authorization authorizes the peer to receive a certain amount of data at the new locator before the result of such verification is known.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
基于信用的授权。主机必须在新的定位器上验证移动或多宿对等方的可达性。基于信用的授权授权对等方在知道此类验证结果之前在新定位器处接收一定数量的数据。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3. Protocol Model
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3. 协议模型
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This section is an overview; more detailed specification follows this section.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本节是一个概述；更详细的规范遵循本节。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.1. Operating Environment
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.1. 操作环境
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Host Identity Protocol (HIP) [RFC5201] is a key establishment and parameter negotiation protocol. Its primary applications are for authenticating host messages based on host identities, and establishing security associations (SAs) for the ESP transport format [RFC5202] and possibly other protocols in the future.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
主机标识协议（HIP）[RFC5201]是一种密钥建立和参数协商协议。其主要应用是基于主机身份验证主机消息，并为ESP传输格式[RFC5202]和未来可能的其他协议建立安全关联（SA）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
    +--------------------+                       +--------------------+
    |                    |                       |                    |
    |   +------------+   |                       |   +------------+   |
    |   |    Key     |   |         HIP           |   |    Key     |   |
    |   | Management | &lt;-+-----------------------+-&gt; | Management |   |
    |   |  Process   |   |                       |   |  Process   |   |
    |   +------------+   |                       |   +------------+   |
    |         ^          |                       |         ^          |
    |         |          |                       |         |          |
    |         v          |                       |         v          |
    |   +------------+   |                       |   +------------+   |
    |   |   IPsec    |   |        ESP            |   |   IPsec    |   |
    |   |   Stack    | &lt;-+-----------------------+-&gt; |   Stack    |   |
    |   |            |   |                       |   |            |   |
    |   +------------+   |                       |   +------------+   |
    |                    |                       |                    |
    |                    |                       |                    |
    |     Initiator      |                       |     Responder      |
    +--------------------+                       +--------------------+
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
    +--------------------+                       +--------------------+
    |                    |                       |                    |
    |   +------------+   |                       |   +------------+   |
    |   |    Key     |   |         HIP           |   |    Key     |   |
    |   | Management | &lt;-+-----------------------+-&gt; | Management |   |
    |   |  Process   |   |                       |   |  Process   |   |
    |   +------------+   |                       |   +------------+   |
    |         ^          |                       |         ^          |
    |         |          |                       |         |          |
    |         v          |                       |         v          |
    |   +------------+   |                       |   +------------+   |
    |   |   IPsec    |   |        ESP            |   |   IPsec    |   |
    |   |   Stack    | &lt;-+-----------------------+-&gt; |   Stack    |   |
    |   |            |   |                       |   |            |   |
    |   +------------+   |                       |   +------------+   |
    |                    |                       |                    |
    |                    |                       |                    |
    |     Initiator      |                       |     Responder      |
    +--------------------+                       +--------------------+
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-22">
Figure 1: HIP Deployment Model
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-22">
图1：髋关节展开模型
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The general deployment model for HIP is shown above, assuming operation in an end-to-end fashion. This document specifies extensions to the HIP protocol to enable end-host mobility and basic multihoming. In summary, these extensions to the HIP base protocol enable the signaling of new addressing information to the peer in HIP messages. The messages are authenticated via a signature or keyed hash message authentication code (HMAC) based on its Host Identity. This document specifies the format of this new addressing (LOCATOR) parameter, the procedures for sending and processing this parameter to enable basic host mobility, and procedures for a concurrent address verification mechanism.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
HIP的一般部署模型如上图所示，假设以端到端方式运行。本文档指定了HIP协议的扩展，以实现终端主机移动性和基本多主。总之，这些对HIP-base协议的扩展使得能够在HIP消息中向对等方发送新的寻址信息的信令。消息通过基于其主机身份的签名或密钥哈希消息认证码（HMAC）进行认证。本文件规定了新地址（定位器）参数的格式、发送和处理此参数以实现基本主机移动性的程序以及并发地址验证机制的程序。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
            ---------
            | TCP   |  (sockets bound to HITs)
            ---------
               |
            ---------
      ----&gt; | ESP   |  {HIT_s, HIT_d} &lt;-&gt; SPI
      |     ---------
      |         |
    ----    ---------
   | MH |-&gt; | HIP   |  {HIT_s, HIT_d, SPI} &lt;-&gt; {IP_s, IP_d, SPI}
    ----    ---------
               |
            ---------
            |  IP   |
            ---------
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
            ---------
            | TCP   |  (sockets bound to HITs)
            ---------
               |
            ---------
      ----&gt; | ESP   |  {HIT_s, HIT_d} &lt;-&gt; SPI
      |     ---------
      |         |
    ----    ---------
   | MH |-&gt; | HIP   |  {HIT_s, HIT_d, SPI} &lt;-&gt; {IP_s, IP_d, SPI}
    ----    ---------
               |
            ---------
            |  IP   |
            ---------
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-7">
Figure 2: Architecture for HIP Mobility and Multihoming (MH)
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-7">
图2：髋关节活动性和多归宿（MH）的体系结构
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Figure 2 depicts a layered architectural view of a HIP-enabled stack using the ESP transport format. In HIP, upper-layer protocols (including TCP and ESP in this figure) are bound to Host Identity Tags (HITs) and not IP addresses. The HIP sublayer is responsible for maintaining the binding between HITs and IP addresses. The SPI is used to associate an incoming packet with the right HITs. The block labeled &#34;MH&#34; is introduced below.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
图2描述了使用ESP传输格式的支持HIP的堆栈的分层体系结构视图。在HIP中，上层协议（包括本图中的TCP和ESP）绑定到主机标识标签（HITs），而不是IP地址。HIP子层负责维护HITs和IP地址之间的绑定。SPI用于将传入数据包与正确的点击关联。下面介绍标记为“MH”的块。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Consider first the case in which there is no mobility or multihoming, as specified in the base protocol specification [RFC5201]. The HIP base exchange establishes the HITs in use between the hosts, the SPIs to use for ESP, and the IP addresses (used in both the HIP signaling packets and ESP data packets). Note that there can only be one such set of bindings in the outbound direction for any given packet, and the only fields used for the binding at the HIP layer are the fields exposed by ESP (the SPI and HITs). For the inbound direction, the SPI is all that is required to find the right host context. ESP rekeying events change the mapping between the HIT pair and SPI, but do not change the IP addresses.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
首先考虑不存在移动性或多宿主的情况，如在基础协议规范[RCF5201]中指定的。HIP基本交换建立主机之间正在使用的命中、ESP使用的SPI和IP地址（在HIP信令包和ESP数据包中使用）。请注意，对于任何给定的数据包，在出站方向上只能有一组这样的绑定，并且HIP层上用于绑定的唯一字段是ESP公开的字段（SPI和HITs）。对于入站方向，SPI是找到正确主机上下文所需的全部。ESP密钥更新事件会更改命中对和SPI之间的映射，但不会更改IP地址。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Consider next a mobility event, in which a host is still single-homed but moves to another IP address. Two things must occur in this case. First, the peer must be notified of the address change using a HIP UPDATE message. Second, each host must change its local bindings at the HIP sublayer (new IP addresses). It may be that both the SPIs and IP addresses are changed simultaneously in a single UPDATE; the protocol described herein supports this. However, simultaneous movement of both hosts, notification of transport layer protocols of the path change, and procedures for possibly traversing middleboxes are not covered by this document.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
考虑下一个移动性事件，其中主机仍然是单宿主的，但是移动到另一个IP地址。在这种情况下，必须发生两件事。首先，必须使用HIP更新消息通知对等方地址更改。其次，每个主机必须在HIP子层（新IP地址）更改其本地绑定。可能是SPI和IP地址在一次更新中同时更改；本文描述的协议支持这一点。但是，两台主机的同时移动、路径更改的传输层协议通知以及可能穿越中间盒的过程不在本文档的范围内。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Finally, consider the case when a host is multihomed (has more than one globally routable address) and has multiple addresses available at the HIP layer as alternative locators for fault tolerance. Examples include the use of (possibly multiple) IPv4 and IPv6 addresses on the same interface, or the use of multiple interfaces attached to different service providers. Such host multihoming generally necessitates that a separate ESP SA is maintained for each interface in order to prevent packets that arrive over different paths from falling outside of the ESP anti-replay window [RFC4303]. Multihoming thus makes it possible that the bindings shown on the right side of Figure 2 are one to many (in the outbound direction, one HIT pair to multiple SPIs, and possibly then to multiple IP addresses). However, only one SPI and address pair can be used for any given packet, so the job of the &#34;MH&#34; block depicted above is to dynamically manipulate these bindings. Beyond locally managing such multiple bindings, the peer-to-peer HIP signaling protocol needs to be flexible enough to define the desired mappings between HITs, SPIs, and addresses, and needs to ensure that UPDATE messages are sent along the right network paths so that any HIP-aware middleboxes can observe the SPIs. This document does not specify the &#34;MH&#34; block, nor does it specify detailed elements of procedure for how to handle various multihoming (perhaps combined with mobility) scenarios. The &#34;MH&#34; block may apply to more general problems outside of HIP. However, this document does describe a basic multihoming case (one host adds one address to its initial address and notifies the peer) and leave more complicated scenarios for experimentation and future documents.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
最后，考虑当主机是多宿主（具有不止一个全局可路由地址）并且在HIP层具有多个可用地址作为容错的替代定位器的情况。示例包括在同一接口上使用（可能多个）IPv4和IPv6地址，或使用连接到不同服务提供商的多个接口。这种主机多主通常需要为每个接口维护一个单独的ESP SA，以防止通过不同路径到达的数据包落入ESP反重放窗口之外[RFC4303]。因此，多宿主使得图2右侧显示的绑定可能是一对多（在出站方向，一个命中对到多个SPI，然后可能到多个IP地址）。然而，对于任何给定的数据包，只能使用一个SPI和地址对，因此上面描述的“MH”块的工作就是动态地操作这些绑定。除了本地管理这样的多个绑定之外，对等HIP信令协议还需要足够灵活，以定义命中、SPI和地址之间所需的映射，并且需要确保更新消息沿着正确的网络路径发送，以便任何HIP感知的中间盒都可以观察SPI。本文件未指定“MH”模块，也未详细说明如何处理各种多宿（可能与移动相结合）场景的程序要素。“MH”块可能适用于髋关节以外更一般的问题。但是，本文档确实描述了一个基本的多宿主情况（一个主机向其初始地址添加一个地址并通知对等主机），并将更复杂的场景留给实验和未来的文档。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.1.1. Locator
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.1.1. 定位器
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document defines a generalization of an address called a &#34;locator&#34;. A locator specifies a point-of-attachment to the network but may also include additional end-to-end tunneling or per-host demultiplexing context that affects how packets are handled below the logical HIP sublayer of the stack. This generalization is useful because IP addresses alone may not be sufficient to describe how packets should be handled below HIP. For example, in a host multihoming context, certain IP addresses may need to be associated with certain ESP SPIs to avoid violating the ESP anti-replay window. Addresses may also be affiliated with transport ports in certain tunneling scenarios. Locators may simply be traditional network addresses. The format of the locator fields in the LOCATOR parameter is defined in Section 4.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本文档定义了称为“定位器”的地址的泛化。定位器指定网络的连接点，但也可能包括附加的端到端隧道或每主机解复用上下文，这些上下文影响在堆栈的逻辑HIP子层下如何处理数据包。这种泛化是有用的，因为IP地址本身可能不足以描述如何在HIP下处理数据包。例如，在主机多宿主上下文中，某些IP地址可能需要与某些ESP SPI关联，以避免违反ESP防重播窗口。在某些隧道方案中，地址也可能与传输端口关联。定位器可能只是传统的网络地址。定位器参数中定位器字段的格式在第4节中定义。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.1.2. Mobility Overview
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.1.2. 机动性概述
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
When a host moves to another address, it notifies its peer of the new address by sending a HIP UPDATE packet containing a LOCATOR parameter. This UPDATE packet is acknowledged by the peer. For reliability in the presence of packet loss, the UPDATE packet is retransmitted as defined in the HIP protocol specification [RFC5201]. The peer can authenticate the contents of the UPDATE packet based on the signature and keyed hash of the packet.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
当主机移动到另一个地址时，它通过发送包含定位器参数的HIP更新数据包来通知其对等方新地址。对等方确认此更新数据包。为确保数据包丢失时的可靠性，更新数据包按照HIP协议规范[RFC5201]中的定义重新传输。对等方可以基于包的签名和密钥散列来认证更新包的内容。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
When using ESP Transport Format [RFC5202], the host may at the same time decide to rekey its security association and possibly generate a new Diffie-Hellman key; all of these actions are triggered by including additional parameters in the UPDATE packet, as defined in the base protocol specification [RFC5201] and ESP extension [RFC5202].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
当使用ESP传输格式[RFC5202]时，主机可同时决定为其安全关联重新设置密钥，并可能生成新的Diffie-Hellman密钥；根据基本协议规范[RFC5201]和ESP扩展[RFC5202]中的定义，通过在更新数据包中包含附加参数来触发所有这些操作。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
When using ESP (and possibly other transport modes in the future), the host is able to receive packets that are protected using a HIP created ESP SA from any address. Thus, a host can change its IP address and continue to send packets to its peers without necessarily rekeying. However, the peers are not able to send packets to these new addresses before they can reliably and securely update the set of addresses that they associate with the sending host. Furthermore, mobility may change the path characteristics in such a manner that reordering occurs and packets fall outside the ESP anti-replay window for the SA, thereby requiring rekeying.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
当使用ESP（以及将来可能的其他传输模式）时，主机能够从任何地址接收使用HIP创建的ESP SA保护的数据包。因此，主机可以更改其IP地址并继续向其对等方发送数据包，而无需重新设置密钥。然而，在对等方能够可靠且安全地更新与发送主机关联的地址集之前，它们无法将数据包发送到这些新地址。此外，移动性可以以这样的方式改变路径特征，即发生重新排序并且分组落在SA的ESP反重放窗口之外，因此需要重新键控。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.1.3. Multihoming Overview
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.1.3. 多归宿概述
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A related operational configuration is host multihoming, in which a host has multiple locators simultaneously rather than sequentially, as in the case of mobility. By using the LOCATOR parameter defined herein, a host can inform its peers of additional (multiple) locators at which it can be reached, and can declare a particular locator as a &#34;preferred&#34; locator. Although this document defines a basic mechanism for multihoming, it does not define detailed policies and procedures, such as which locators to choose when more than one pair is available, the operation of simultaneous mobility and multihoming, source address selection policies (beyond those specified in [RFC3484]), and the implications of multihoming on transport protocols and ESP anti-replay windows. Additional definitions of HIP-based multihoming are expected to be part of future documents.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
一种相关的操作配置是主机多归属，在这种配置中，主机同时具有多个定位器，而不是顺序地具有多个定位器，如在移动性的情况下。通过使用本文定义的定位器参数，主机可以通知其对等方可以到达的附加（多个）定位器，并且可以将特定定位器声明为“首选”定位器。尽管本文件定义了多址的基本机制，但并未定义详细的策略和程序，例如当多对可用时选择哪个定位器、同时移动和多址的操作、源地址选择策略（超出[RFC3484]中规定的策略），以及多宿对传输协议和ESP反重放窗口的影响。基于髋关节的多导引头的其他定义预计将成为未来文件的一部分。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.2. Protocol Overview
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.2. 协议概述
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In this section, we briefly introduce a number of usage scenarios for HIP mobility and multihoming. These scenarios assume that HIP is being used with the ESP transform [RFC5202], although other scenarios may be defined in the future. To understand these usage scenarios, the reader should be at least minimally familiar with the HIP protocol specification [RFC5201]. However, for the (relatively) uninitiated reader, it is most important to keep in mind that in HIP the actual payload traffic is protected with ESP, and that the ESP SPI acts as an index to the right host-to-host context. More specification details are found later in Section 4 and Section 5.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在本节中，我们将简要介绍髋关节移动和多宿的一些使用场景。这些场景假设HIP正在与ESP转换[RFC5202]一起使用，尽管将来可能会定义其他场景。为了理解这些使用场景，读者至少应该对HIP协议规范[RFC5201]至少熟悉一点。但是，对于（相对）不熟悉的读取器，最重要的是要记住，在HIP中，实际有效负载流量由ESP保护，并且ESP SPI充当正确主机到主机上下文的索引。更多规范细节见第4节和第5节。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The scenarios below assume that the two hosts have completed a single HIP base exchange with each other. Both of the hosts therefore have one incoming and one outgoing SA. Further, each SA uses the same pair of IP addresses, which are the ones used in the base exchange.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
下面的场景假设两台主机已相互完成一次HIP base交换。因此，这两台主机都有一个传入和一个传出SA。此外，每个SA使用相同的IP地址对，这是在基本交换中使用的IP地址对。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The readdressing protocol is an asymmetric protocol where a mobile or multihomed host informs a peer host about changes of IP addresses on affected SPIs. The readdressing exchange is designed to be piggybacked on existing HIP exchanges. The majority of the packets on which the LOCATOR parameters are expected to be carried are UPDATE packets. However, some implementations may want to experiment with sending LOCATOR parameters also on other packets, such as R1, I2, and NOTIFY.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
重新穿戴协议是一种非对称协议，其中移动或多址主机通知对等主机受影响SPI上IP地址的更改。再换装交换的设计是以现有的髋关节交换为基础的。预期在其上携带定位器参数的大多数分组是更新分组。然而，一些实现可能还希望在其他数据包（如R1、I2和NOTIFY）上尝试发送定位器参数。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The scenarios below at times describe addresses as being in either an ACTIVE, VERIFIED, or DEPRECATED state. From the perspective of a host, newly-learned addresses of the peer must be verified before put into active service, and addresses removed by the peer are put into a deprecated state. Under limited conditions described below (Section 5.6), an UNVERIFIED address may be used. The addressing states are defined more formally in Section 5.1.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
下面的场景有时将地址描述为处于活动、已验证或已弃用状态。从主机的角度来看，在投入活动服务之前，必须验证对等方新学到的地址，并且对等方删除的地址会进入不推荐状态。在下述有限条件下（第5.6节），可使用未经验证的地址。第5.1节对寻址状态进行了更正式的定义。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Hosts that use link-local addresses as source addresses in their HIP handshakes may not be reachable by a mobile peer. Such hosts SHOULD provide a globally routable address either in the initial handshake or via the LOCATOR parameter.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在HIP握手中使用链路本地地址作为源地址的主机可能无法被移动对等方访问。此类主机应在初始握手或通过定位器参数提供全局可路由地址。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.2.1. Mobility with a Single SA Pair (No Rekeying)
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.2.1. 具有单个SA对的移动性（无密钥更新）
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A mobile host must sometimes change an IP address bound to an interface. The change of an IP address might be needed due to a change in the advertised IPv6 prefixes on the link, a reconnected PPP link, a new DHCP lease, or an actual movement to another subnet. In order to maintain its communication context, the host must inform its peers about the new IP address. This first example considers the
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
移动主机有时必须更改绑定到接口的IP地址。由于链路上公布的IPv6前缀、重新连接的PPP链路、新的DHCP租约或实际移动到另一个子网，可能需要更改IP地址。为了维护其通信上下文，主机必须将新IP地址通知其对等方。第一个例子考虑了
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
case in which the mobile host has only one interface, IP address, a single pair of SAs (one inbound, one outbound), and no rekeying occurs on the SAs. We also assume that the new IP addresses are within the same address family (IPv4 or IPv6) as the first address. This is the simplest scenario, depicted in Figure 3.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
移动主机只有一个接口、IP地址、一对SAs（一个入站，一个出站），且SAs上未发生密钥更新的情况。我们还假设新IP地址与第一个地址位于同一地址族（IPv4或IPv6）中。这是最简单的场景，如图3所示。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-5">
Mobile Host Peer Host
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-5">
移动主机对等主机
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
             UPDATE(ESP_INFO, LOCATOR, SEQ)
        -----------------------------------&gt;
             UPDATE(ESP_INFO, SEQ, ACK, ECHO_REQUEST)
        &lt;-----------------------------------
             UPDATE(ACK, ECHO_RESPONSE)
        -----------------------------------&gt;
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
             UPDATE(ESP_INFO, LOCATOR, SEQ)
        -----------------------------------&gt;
             UPDATE(ESP_INFO, SEQ, ACK, ECHO_REQUEST)
        &lt;-----------------------------------
             UPDATE(ACK, ECHO_RESPONSE)
        -----------------------------------&gt;
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-7">
Figure 3: Readdress without Rekeying, but with Address Check
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-7">
图3：不重新键入但带有地址检查的ReadAddress
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The steps of the packet processing are as follows:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
分组处理的步骤如下：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1. The mobile host is disconnected from the peer host for a brief period of time while it switches from one IP address to another. Upon obtaining a new IP address, the mobile host sends a LOCATOR parameter to the peer host in an UPDATE message. The UPDATE message also contains an ESP_INFO parameter containing the values of the old and new SPIs for a security association. In this case, the OLD SPI and NEW SPI parameters both are set to the value of the preexisting incoming SPI; this ESP_INFO does not trigger a rekeying event but is instead included for possible parameter-inspecting middleboxes on the path. The LOCATOR parameter contains the new IP address (Locator Type of &#34;1&#34;, defined below) and a locator lifetime. The mobile host waits for this UPDATE to be acknowledged, and retransmits if necessary, as specified in the base specification [RFC5201].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1. 当移动主机从一个IP地址切换到另一个IP地址时，会短暂断开与对等主机的连接。在获得新的IP地址时，移动主机在更新消息中向对等主机发送定位器参数。更新消息还包含一个ESP_INFO参数，其中包含安全关联的旧SPI和新SPI的值。在这种情况下，旧SPI和新SPI参数都被设置为先前存在的传入SPI的值；此ESP_信息不会触发密钥更新事件，而是包含在路径上可能的参数检查中间框中。定位器参数包含新的IP地址（定位器类型为“1”，定义如下）和定位器生存期。根据基本规范[RFC5201]中的规定，移动主机等待确认此更新，并在必要时重新传输。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2. The peer host receives the UPDATE, validates it, and updates any local bindings between the HIP association and the mobile host&#39;s destination address. The peer host MUST perform an address verification by placing a nonce in the ECHO_REQUEST parameter of the UPDATE message sent back to the mobile host. It also includes an ESP_INFO parameter with the OLD SPI and NEW SPI parameters both set to the value of the preexisting incoming SPI, and sends this UPDATE (with piggybacked acknowledgment) to the mobile host at its new address. The peer MAY use the new address immediately, but it MUST limit the amount of data it sends to the address until address verification completes.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2. 对等主机接收更新，验证更新，并更新HIP关联和移动主机目标地址之间的任何本地绑定。对等主机必须通过在发送回移动主机的更新消息的ECHO_请求参数中放置nonce来执行地址验证。它还包括一个ESP_INFO参数，其中旧SPI和新SPI参数都设置为先前存在的传入SPI的值，并将此更新（带有piggybacked确认）发送到移动主机的新地址。对等方可以立即使用新地址，但在地址验证完成之前，它必须限制发送到该地址的数据量。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
3. The mobile host completes the readdress by processing the UPDATE ACK and echoing the nonce in an ECHO_RESPONSE. Once the peer host receives this ECHO_RESPONSE, it considers the new address to be verified and can put the address into full use.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
3. 移动主机通过处理更新确认并在ECHO_响应中回显nonce来完成重新寻址。一旦对等主机收到此ECHO_响应，它将认为新地址需要验证，并可以充分利用该地址。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
While the peer host is verifying the new address, the new address is marked as UNVERIFIED in the interim, and the old address is DEPRECATED. Once the peer host has received a correct reply to its UPDATE challenge, it marks the new address as ACTIVE and removes the old address.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
当对等主机验证新地址时，新地址会被标记为未验证，旧地址会被弃用。对等主机收到对其更新质询的正确答复后，会将新地址标记为活动地址并删除旧地址。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.2.2. Mobility with a Single SA Pair (Mobile-Initiated Rekey)
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.2.2. 使用单个SA对的移动性（移动启动的重新密钥）
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The mobile host may decide to rekey the SAs at the same time that it notifies the peer of the new address. In this case, the above procedure described in Figure 3 is slightly modified. The UPDATE message sent from the mobile host includes an ESP_INFO with the OLD SPI set to the previous SPI, the NEW SPI set to the desired new SPI value for the incoming SA, and the KEYMAT Index desired. Optionally, the host may include a DIFFIE_HELLMAN parameter for a new Diffie-Hellman key. The peer completes the request for a rekey as is normally done for HIP rekeying, except that the new address is kept as UNVERIFIED until the UPDATE nonce challenge is received as described above. Figure 4 illustrates this scenario.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
移动主机可以在通知对等方新地址的同时，决定为SAs重新设置密钥。在这种情况下，对图3中描述的上述程序稍作修改。从移动主机发送的更新消息包括ESP_信息，其中旧SPI设置为以前的SPI，新SPI设置为传入SA所需的新SPI值，以及所需的键盘索引。可选地，主机可以包括用于新DIFFIE-HELLMAN密钥的DIFFIE_-HELLMAN参数。对等方完成重设密钥的请求，与通常对HIP重设密钥所做的一样，除了新地址保持为未验证状态，直到如上所述接收到更新nonce质询。图4说明了这个场景。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-5">
Mobile Host Peer Host
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-5">
移动主机对等主机
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
             UPDATE(ESP_INFO, LOCATOR, SEQ, [DIFFIE_HELLMAN])
        -----------------------------------&gt;
             UPDATE(ESP_INFO, SEQ, ACK, [DIFFIE_HELLMAN,] ECHO_REQUEST)
        &lt;-----------------------------------
             UPDATE(ACK, ECHO_RESPONSE)
        -----------------------------------&gt;
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
             UPDATE(ESP_INFO, LOCATOR, SEQ, [DIFFIE_HELLMAN])
        -----------------------------------&gt;
             UPDATE(ESP_INFO, SEQ, ACK, [DIFFIE_HELLMAN,] ECHO_REQUEST)
        &lt;-----------------------------------
             UPDATE(ACK, ECHO_RESPONSE)
        -----------------------------------&gt;
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-14">
Figure 4: Readdress with Mobile-Initiated Rekey
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-14">
图4：使用移动启动的重新设置密钥进行重新设置
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.2.3. Host Multihoming
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.2.3. 宿主多宿主
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A (mobile or stationary) host may sometimes have more than one interface or global address. The host may notify the peer host of the additional interface or address by using the LOCATOR parameter. To avoid problems with the ESP anti-replay window, a host SHOULD use a different SA for each interface or address used to receive packets from the peer host when multiple locator pairs are being used simultaneously rather than sequentially.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
（移动或固定）主机有时可能有多个接口或全局地址。主机可通过使用定位器参数将附加接口或地址通知对等主机。为避免ESP反重播窗口出现问题，当同时使用多个定位器对而不是顺序使用时，主机应为用于从对等主机接收数据包的每个接口或地址使用不同的SA。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
When more than one locator is provided to the peer host, the host SHOULD indicate which locator is preferred (the locator on which the host prefers to receive traffic). By default, the addresses used in the base exchange are preferred until indicated otherwise.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
当向对等主机提供多个定位器时，主机应指示首选哪个定位器（主机首选接收流量的定位器）。默认情况下，除非另有说明，否则基本交换中使用的地址是首选的。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In the multihoming case, the sender may also have multiple valid locators from which to source traffic. In practice, a HIP association in a multihoming configuration may have both a preferred peer locator and a preferred local locator, although rules for source address selection should ultimately govern the selection of the source locator based on the destination locator.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在多归属的情况下，发送方也可能有多个有效的定位器，从这些定位器发送到源流量。在实践中，多归属配置中的髋部关联可以同时具有优选对等定位器和优选本地定位器，尽管源地址选择的规则最终应基于目的地定位器来控制源定位器的选择。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Although the protocol may allow for configurations in which there is an asymmetric number of SAs between the hosts (e.g., one host has two interfaces and two inbound SAs, while the peer has one interface and one inbound SA), it is RECOMMENDED that inbound and outbound SAs be created pairwise between hosts. When an ESP_INFO arrives to rekey a particular outbound SA, the corresponding inbound SA should be also rekeyed at that time. Although asymmetric SA configurations might be experimented with, their usage may constrain interoperability at this time. However, it is recommended that implementations attempt to support peers that prefer to use non-paired SAs. It is expected that this section and behavior will be modified in future revisions of this protocol, once the issue and its implications are better understood.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
尽管协议允许主机之间SA数量不对称的配置（例如，一台主机有两个接口和两个入站SA，而对等主机有一个接口和一个入站SA），但建议在主机之间成对创建入站和出站SA。当ESP_信息到达重新输入特定出站SA时，相应的入站SA也应在该时间重新输入。虽然可以尝试使用非对称SA配置，但此时它们的使用可能会限制互操作性。但是，建议实现尝试支持更喜欢使用非配对SAs的对等方。一旦问题及其影响得到更好的理解，预计本协议的未来修订版将修改本节和行为。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Consider the case between two hosts, one single-homed and one multihomed. The multihomed host may decide to inform the single-homed host about its other address. It is RECOMMENDED that the multihomed host set up a new SA pair for use on this new address. To do this, the multihomed host sends a LOCATOR with an ESP_INFO, indicating the request for a new SA by setting the OLD SPI value to zero, and the NEW SPI value to the newly created incoming SPI. A Locator Type of &#34;1&#34; is used to associate the new address with the new SPI. The LOCATOR parameter also contains a second Type &#34;1&#34; locator, that of the original address and SPI. To simplify parameter processing and avoid explicit protocol extensions to remove locators, each LOCATOR parameter MUST list all locators in use on a connection (a complete listing of inbound locators and SPIs for the host). The multihomed host waits for an ESP_INFO (new outbound SA) from the peer and an ACK of its own UPDATE. As in the mobility case, the peer host must perform an address verification before actively using the new address. Figure 5 illustrates this scenario.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
考虑两个主机之间的情况，一个单宿主和一个多宿主。多宿主机可以决定将其其他地址通知单宿主机。建议多宿主主机设置一个新的SA对，以便在此新地址上使用。为此，多宿主机发送一个带有ESP_信息的定位器，通过将旧SPI值设置为零来指示对新SA的请求，并将新SPI值设置为新创建的传入SPI。定位器类型“1”用于将新地址与新SPI关联。LOCATOR参数还包含第二种类型的“1”定位器，即原始地址和SPI的定位器。为了简化参数处理并避免显式协议扩展以删除定位器，每个定位器参数必须列出连接上使用的所有定位器（主机入站定位器和SPI的完整列表）。多宿主主机等待来自对等主机的ESP_信息（新出站SA）以及其自身更新的确认。与移动性情况一样，对等主机必须在主动使用新地址之前执行地址验证。图5说明了这个场景。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-5">
Multi-homed Host Peer Host
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-5">
多主机对等主机
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
              UPDATE(ESP_INFO, LOCATOR, SEQ, [DIFFIE_HELLMAN])
        -----------------------------------&gt;
              UPDATE(ESP_INFO, SEQ, ACK, [DIFFIE_HELLMAN,] ECHO_REQUEST)
        &lt;-----------------------------------
              UPDATE(ACK, ECHO_RESPONSE)
        -----------------------------------&gt;
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
              UPDATE(ESP_INFO, LOCATOR, SEQ, [DIFFIE_HELLMAN])
        -----------------------------------&gt;
              UPDATE(ESP_INFO, SEQ, ACK, [DIFFIE_HELLMAN,] ECHO_REQUEST)
        &lt;-----------------------------------
              UPDATE(ACK, ECHO_RESPONSE)
        -----------------------------------&gt;
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-19">
Figure 5: Basic Multihoming Scenario
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-19">
图5：基本多主场景
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In multihoming scenarios, it is important that hosts receiving UPDATEs associate them correctly with the destination address used in the packet carrying the UPDATE. When processing inbound LOCATORs that establish new security associations on an interface with multiple addresses, a host uses the destination address of the UPDATE containing the LOCATOR as the local address to which the LOCATOR plus ESP_INFO is targeted. This is because hosts may send UPDATEs with the same (locator) IP address to different peer addresses -- this has the effect of creating multiple inbound SAs implicitly affiliated with different peer source addresses.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在多宿主场景中，重要的是接收更新的主机将其与承载更新的数据包中使用的目标地址正确关联。当处理在具有多个地址的接口上建立新安全关联的入站定位器时，主机使用包含定位器的更新的目标地址作为定位器和ESP_信息的目标本地地址。这是因为主机可能会将具有相同（定位器）IP地址的更新发送到不同的对等地址——这会导致创建多个与不同对等源地址隐式关联的入站SA。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.2.4. Site Multihoming
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.2.4. 站点多归宿
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A host may have an interface that has multiple globally routable IP addresses. Such a situation may be a result of the site having multiple upper Internet Service Providers, or just because the site provides all hosts with both IPv4 and IPv6 addresses. The host should stay reachable at all or any subset of the currently available global routable addresses, independent of how they are provided.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
主机可能具有具有多个全局可路由IP地址的接口。这种情况可能是由于站点具有多个上层Internet服务提供商，或者只是因为站点为所有主机提供IPv4和IPv6地址。主机应该在当前可用的全局可路由地址的所有或任何子集上保持可访问性，而与它们的提供方式无关。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This case is handled the same as if there were different IP addresses, described above in Section 3.2.3. Note that a single interface may experience site multihoming while the host itself may have multiple interfaces.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本案例的处理方式与上文第3.2.3节所述的不同IP地址的处理方式相同。请注意，单个接口可能会经历站点多宿主，而主机本身可能有多个接口。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Note that a host may be multihomed and mobile simultaneously, and that a multihomed host may want to protect the location of some of its interfaces while revealing the real IP address of some others.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
请注意，主机可能同时是多主机和移动主机，多主机主机可能希望保护其某些接口的位置，同时显示其他一些接口的真实IP地址。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document does not presently specify additional site multihoming extensions to HIP; further alignment with the IETF shim6 working group may be considered in the future.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本文件目前未规定HIP的额外站点多主扩展；未来可能会考虑进一步与IETF shim6工作组保持一致。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.2.5. Dual host multihoming
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.2.5. 双主机多宿
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Consider the case in which both hosts would like to add an additional address after the base exchange completes. In Figure 6, consider that host1, which used address addr1a in the base exchange to set up SPI1a and SPI2a, wants to add address addr1b. It would send an UPDATE with LOCATOR (containing the address addr1b) to host2, using destination address addr2a, and a new set of SPIs would be added between hosts 1 and 2 (call them SPI1b and SPI2b -- not shown in the figure). Next, consider host2 deciding to add addr2b to the relationship. Host2 must select one of host1&#39;s addresses towards which to initiate an UPDATE. It may choose to initiate an UPDATE to addr1a, addr1b, or both. If it chooses to send to both, then a full mesh (four SA pairs) of SAs would exist between the two hosts. This is the most general case; it often may be the case that hosts primarily establish new SAs only with the peer&#39;s Preferred locator. The readdressing protocol is flexible enough to accommodate this choice.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
考虑两个主机希望在基础交换完成后添加一个附加地址的情况。在图6中，考虑在基础交换机中使用地址ADDR1A建立SPI1A和SPI2A的HoST1想要添加地址ADDR1B。它将使用目标地址addr2a向主机2发送带有定位器（包含地址addr1b）的更新，并在主机1和主机2之间添加一组新的SPI（称为SPI1b和SPI2b，图中未显示）。接下来，考虑HoST2决定向该关系添加ADDR2B。Host2必须选择host1的其中一个地址来启动更新。它可以选择启动对addr1a、addr1b或两者的更新。如果它选择发送到这两个主机，那么两个主机之间将存在一个完整的SAs网格（四个SA对）。这是最普遍的情况；通常情况下，主机主要使用对等方的首选定位器建立新的SA。重新着装协议足够灵活，可以适应这种选择。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
              -&lt;- SPI1a --                         -- SPI2a -&gt;-
      host1 &lt;              &gt; addr1a &lt;---&gt; addr2a &lt;              &gt; host2
              -&gt;- SPI2a --                         -- SPI1a -&lt;-
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
              -&lt;- SPI1a --                         -- SPI2a -&gt;-
      host1 &lt;              &gt; addr1a &lt;---&gt; addr2a &lt;              &gt; host2
              -&gt;- SPI2a --                         -- SPI1a -&lt;-
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
                             addr1b &lt;---&gt; addr2a  (second SA pair)
                             addr1a &lt;---&gt; addr2b  (third SA pair)
                             addr1b &lt;---&gt; addr2b  (fourth SA pair)
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
                             addr1b &lt;---&gt; addr2a  (second SA pair)
                             addr1a &lt;---&gt; addr2b  (third SA pair)
                             addr1b &lt;---&gt; addr2b  (fourth SA pair)
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-4">
Figure 6: Dual Multihoming Case in Which Each Host Uses LOCATOR to Add a Second Address
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-4">
图6：双多宿主情况，其中每个主机使用定位器添加第二个地址
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.2.6. Combined Mobility and Multihoming
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.2.6. 联合机动和多归宿
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
It looks likely that in the future, many mobile hosts will be simultaneously mobile and multihomed, i.e., have multiple mobile interfaces. Furthermore, if the interfaces use different access technologies, it is fairly likely that one of the interfaces may appear stable (retain its current IP address) while some other(s) may experience mobility (undergo IP address change).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在未来，许多移动主机可能同时具有移动和多址功能，即具有多个移动接口。此外，如果接口使用不同的接入技术，则其中一个接口很可能看起来稳定（保留其当前IP地址），而其他一些接口可能会经历移动性（经历IP地址更改）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The use of LOCATOR plus ESP_INFO should be flexible enough to handle most such scenarios, although more complicated scenarios have not been studied so far.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
定位器加ESP_信息的使用应足够灵活，以处理大多数此类场景，尽管到目前为止还没有研究过更复杂的场景。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.2.7. Using LOCATORs across Addressing Realms
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.2.7. 跨寻址域使用定位器
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
It is possible for HIP associations to migrate to a state in which both parties are only using locators in different addressing realms. For example, the two hosts may initiate the HIP association when both
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
HIP关联可能迁移到一种状态，即双方仅在不同的寻址域中使用定位器。例如，当两个主机同时启动HIP关联时，两个主机可能会启动HIP关联
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
are using IPv6 locators, then one host may loose its IPv6 connectivity and obtain an IPv4 address. In such a case, some type of mechanism for interworking between the different realms must be employed; such techniques are outside the scope of the present text. The basic problem in this example is that the host readdressing to IPv4 does not know a corresponding IPv4 address of the peer. This may be handled (experimentally) by possibly configuring this address information manually or in the DNS, or the hosts exchange both IPv4 and IPv6 addresses in the locator.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
如果正在使用IPv6定位器，则一台主机可能会失去其IPv6连接并获取IPv4地址。在这种情况下，必须采用某种类型的机制来实现不同领域之间的互通；这些技术不在本案文的范围之内。本例中的基本问题是，重新安装到IPv4的主机不知道对等方的相应IPv4地址。这可以通过手动或在DNS中配置此地址信息来处理（实验），或者主机在定位器中交换IPv4和IPv6地址。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.2.8. Network Renumbering
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.2.8. 网络重新编号
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
It is expected that IPv6 networks will be renumbered much more often than most IPv4 networks. From an end-host point of view, network renumbering is similar to mobility.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
预计IPv6网络将比大多数IPv4网络更频繁地重新编号。从终端主机的角度来看，网络重新编号类似于移动性。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.2.9. Initiating the Protocol in R1 or I2
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.2.9. 在R1或I2中启动协议
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A Responder host MAY include a LOCATOR parameter in the R1 packet that it sends to the Initiator. This parameter MUST be protected by the R1 signature. If the R1 packet contains LOCATOR parameters with a new Preferred locator, the Initiator SHOULD directly set the new Preferred locator to status ACTIVE without performing address verification first, and MUST send the I2 packet to the new Preferred locator. The I1 destination address and the new Preferred locator may be identical. All new non-preferred locators must still undergo address verification once the base exchange completes.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
响应者主机可以在其发送给发起方的R1分组中包括定位器参数。此参数必须由R1签名保护。如果R1数据包包含带有新首选定位器的定位器参数，则发起方应直接将新首选定位器设置为活动状态，而无需首先执行地址验证，并且必须将I2数据包发送给新首选定位器。I1目的地地址和新的优选定位器可以相同。一旦基本交换完成，所有新的非首选定位器仍必须进行地址验证。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
Initiator Responder
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
发起者响应者
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
                              R1 with LOCATOR
                  &lt;-----------------------------------
   record additional addresses
   change responder address
                     I2 sent to newly indicated preferred address
                  -----------------------------------&gt;
                                                     (process normally)
                                  R2
                  &lt;-----------------------------------
   (process normally, later verification of non-preferred locators)
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
                              R1 with LOCATOR
                  &lt;-----------------------------------
   record additional addresses
   change responder address
                     I2 sent to newly indicated preferred address
                  -----------------------------------&gt;
                                                     (process normally)
                                  R2
                  &lt;-----------------------------------
   (process normally, later verification of non-preferred locators)
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-21">
Figure 7: LOCATOR Inclusion in R1
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-21">
图7:R1中的定位器包含
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
An Initiator MAY include one or more LOCATOR parameters in the I2 packet, independent of whether or not there was a LOCATOR parameter in the R1. These parameters MUST be protected by the I2 signature. Even if the I2 packet contains LOCATOR parameters, the Responder MUST still send the R2 packet to the source address of the I2. The new
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
启动器可以在I2分组中包括一个或多个定位器参数，这与R1中是否存在定位器参数无关。这些参数必须受到I2签名的保护。即使I2数据包包含定位器参数，响应者仍必须将R2数据包发送到I2的源地址。新的
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Preferred locator SHOULD be identical to the I2 source address. If the I2 packet contains LOCATOR parameters, all new locators must undergo address verification as usual, and the ESP traffic that subsequently follows should use the Preferred locator.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
首选定位器应与I2源地址相同。如果I2数据包包含定位器参数，则所有新定位器必须像往常一样进行地址验证，随后的ESP通信应使用首选定位器。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
Initiator Responder
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
发起者响应者
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
                             I2 with LOCATOR
                  -----------------------------------&gt;
                                                     (process normally)
                                             record additional addresses
                       R2 sent to source address of I2
                  &lt;-----------------------------------
   (process normally)
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
                             I2 with LOCATOR
                  -----------------------------------&gt;
                                                     (process normally)
                                             record additional addresses
                       R2 sent to source address of I2
                  &lt;-----------------------------------
   (process normally)
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-21">
Figure 8: LOCATOR Inclusion in I2
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-21">
图8:I2中的定位器包含
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The I1 and I2 may be arriving from different source addresses if the LOCATOR parameter is present in R1. In this case, implementations simultaneously using multiple pre-created R1s, indexed by Initiator IP addresses, may inadvertently fail the puzzle solution of I2 packets due to a perceived puzzle mismatch. See, for instance, the example in Appendix A of [RFC5201]. As a solution, the Responder&#39;s puzzle indexing mechanism must be flexible enough to accommodate the situation when R1 includes a LOCATOR parameter.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
如果定位器参数存在于R1中，则I1和I2可能来自不同的源地址。在这种情况下，同时使用多个预先创建的R1（由启动器IP地址索引）的实现可能会由于感知到的谜题不匹配而导致I2数据包的谜题解决方案意外失败。例如，参见[RFC5201]附录A中的示例。作为解决方案，响应者的谜题索引机制必须足够灵活，以适应R1包含定位器参数的情况。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.3. Other Considerations
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.3. 其他考虑
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.3.1. Address Verification
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.3.1. 地址验证
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
When a HIP host receives a set of locators from another HIP host in a LOCATOR, it does not necessarily know whether the other host is actually reachable at the claimed addresses. In fact, a malicious peer host may be intentionally giving bogus addresses in order to cause a packet flood towards the target addresses [RFC4225]. Likewise, viral software may have compromised the peer host, programming it to redirect packets to the target addresses. Thus, the HIP host must first check that the peer is reachable at the new address.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
当HIP主机从定位器中的另一个HIP主机接收定位器集时，它不一定知道另一个主机在声明的地址是否实际可到达。事实上，恶意对等主机可能故意提供虚假地址，以导致数据包涌入目标地址[RFC4225]。类似地，病毒软件可能危害对等主机，将其编程以将数据包重定向到目标地址。因此，HIP主机必须首先检查对等方是否可以在新地址访问。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
An additional potential benefit of performing address verification is to allow middleboxes in the network along the new path to obtain the peer host&#39;s inbound SPI.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
执行地址验证的另一个潜在好处是允许网络中沿着新路径的中间盒获得对等主机的入站SPI。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Address verification is implemented by the challenger sending some piece of unguessable information to the new address, and waiting for some acknowledgment from the Responder that indicates reception of the information at the new address. This may include the exchange of
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
地址验证是通过挑战者向新地址发送一些不可用的信息，并等待响应者的一些确认来实现的，该确认指示在新地址接收到信息。这可能包括交换
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
a nonce, or the generation of a new SPI and observation of data arriving on the new SPI.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
一个nonce，或新SPI的生成和到达新SPI的数据的观察。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.3.2. Credit-Based Authorization
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.3.2. 基于信用的授权
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Credit-Based Authorization (CBA) allows a host to securely use a new locator even though the peer&#39;s reachability at the address embedded in the locator has not yet been verified. This is accomplished based on the following three hypotheses:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
基于信用的授权（CBA）允许主机安全地使用新的定位器，即使尚未验证对等方在定位器中嵌入的地址的可达性。这是基于以下三个假设完成的：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1. A flooding attacker typically seeks to somehow multiply the packets it generates for the purpose of its attack because bandwidth is an ample resource for many victims.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1. 洪水攻击者通常试图以某种方式将其生成的数据包乘以攻击目的，因为带宽对于许多受害者来说是一个充足的资源。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2. An attacker can often cause unamplified flooding by sending packets to its victim, either by directly addressing the victim in the packets, or by guiding the packets along a specific path by means of an IPv6 Routing header, if Routing headers are not filtered by firewalls.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2. 如果路由报头未被防火墙过滤，攻击者通常可以通过向其受害者发送数据包，直接在数据包中寻址受害者，或通过IPv6路由报头沿特定路径引导数据包，从而导致未经扩展的洪泛。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
3. Consequently, the additional effort required to set up a redirection-based flooding attack (without CBA and return routability checks) would pay off for the attacker only if amplification could be obtained this way.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
3. 因此，设置基于重定向的泛洪攻击（无CBA和返回可路由性检查）所需的额外努力只有在以这种方式获得放大的情况下才能为攻击者带来回报。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
On this basis, rather than eliminating malicious packet redirection in the first place, Credit-Based Authorization prevents amplifications. This is accomplished by limiting the data a host can send to an unverified address of a peer by the data recently received from that peer. Redirection-based flooding attacks thus become less attractive than, for example, pure direct flooding, where the attacker itself sends bogus packets to the victim.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在此基础上，基于信用的授权不是首先消除恶意数据包重定向，而是防止放大。这是通过限制主机可以通过最近从对等方接收的数据发送到对等方未验证地址的数据来实现的。因此，基于重定向的泛洪攻击不如纯粹的直接泛洪攻击吸引人，后者是攻击者自己向受害者发送虚假数据包。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Figure 9 illustrates Credit-Based Authorization: Host B measures the amount of data recently received from peer A and, when A readdresses, sends packets to A&#39;s new, unverified address as long as the sum of the packet sizes does not exceed the measured, received data volume. When insufficient credit is left, B stops sending further packets to A until A&#39;s address becomes ACTIVE. The address changes may be due to mobility, multihoming, or any other reason. Not shown in Figure 9 are the results of credit aging (Section 5.6.2), a mechanism used to dampen possible time-shifting attacks.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
图9说明了基于信用的授权：主机B测量最近从对等方A接收的数据量，当A重新格式化时，只要数据包大小的总和不超过测量的接收数据量，就将数据包发送到A的新的未验证地址。当信用不足时，B停止向A发送更多的数据包，直到A的地址变为活动状态。地址更改可能是由于移动性、多址或任何其他原因造成的。图9中未显示信贷老化的结果（第5.6.2节），这是一种用于抑制可能的时间转移攻击的机制。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
           +-------+                        +-------+
           |   A   |                        |   B   |
           +-------+                        +-------+
               |                                |
       address |-------------------------------&gt;| credit += size(packet)
        ACTIVE |                                |
               |-------------------------------&gt;| credit += size(packet)
               |&lt;-------------------------------| do not change credit
               |                                |
               + address change                 |
               + address verification starts    |
       address |&lt;-------------------------------| credit -= size(packet)
    UNVERIFIED |-------------------------------&gt;| credit += size(packet)
               |&lt;-------------------------------| credit -= size(packet)
               |                                |
               |&lt;-------------------------------| credit -= size(packet)
               |                                X credit &lt; size(packet)
               |                                | =&gt; do not send packet!
               + address verification concludes |
       address |                                |
        ACTIVE |&lt;-------------------------------| do not change credit
               |                                |
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
           +-------+                        +-------+
           |   A   |                        |   B   |
           +-------+                        +-------+
               |                                |
       address |-------------------------------&gt;| credit += size(packet)
        ACTIVE |                                |
               |-------------------------------&gt;| credit += size(packet)
               |&lt;-------------------------------| do not change credit
               |                                |
               + address change                 |
               + address verification starts    |
       address |&lt;-------------------------------| credit -= size(packet)
    UNVERIFIED |-------------------------------&gt;| credit += size(packet)
               |&lt;-------------------------------| credit -= size(packet)
               |                                |
               |&lt;-------------------------------| credit -= size(packet)
               |                                X credit &lt; size(packet)
               |                                | =&gt; do not send packet!
               + address verification concludes |
       address |                                |
        ACTIVE |&lt;-------------------------------| do not change credit
               |                                |
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-22">
Figure 9: Readdressing Scenario
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-22">
图9：重新着装场景
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.3.3. Preferred Locator
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.3.3. 首选定位器
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
When a host has multiple locators, the peer host must decide which to use for outbound packets. It may be that a host would prefer to receive data on a particular inbound interface. HIP allows a particular locator to be designated as a Preferred locator and communicated to the peer (see Section 4).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
当主机有多个定位器时，对等主机必须决定使用哪个定位器来进行出站数据包。主机可能更希望在特定的入站接口上接收数据。HIP允许将特定定位器指定为首选定位器并与对等方通信（参见第4节）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In general, when multiple locators are used for a session, there is the question of using multiple locators for failover only or for load-balancing. Due to the implications of load-balancing on the transport layer that still need to be worked out, this document assumes that multiple locators are used primarily for failover. An implementation may use ICMP interactions, reachability checks, or other means to detect the failure of a locator.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
通常，当一个会话使用多个定位器时，存在仅将多个定位器用于故障转移或用于负载平衡的问题。由于传输层上的负载平衡仍然需要解决，本文档假设多个定位器主要用于故障切换。实现可以使用ICMP交互、可达性检查或其他方法来检测定位器的故障。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.3.4. Interaction with Security Associations
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.3.4. 与安全协会的互动
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document specifies a new HIP protocol parameter, the LOCATOR parameter (see Section 4), that allows the hosts to exchange information about their locator(s) and any changes in their locator(s). The logical structure created with LOCATOR parameters
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本文档指定了一个新的HIP协议参数LOCATOR参数（参见第4节），该参数允许主机交换有关其定位器的信息以及定位器中的任何更改。使用定位器参数创建的逻辑结构
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
has three levels: hosts, Security Associations (SAs) indexed by Security Parameter Indices (SPIs), and addresses.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
有三个级别：主机、由安全参数索引（SPI）索引的安全关联（SA）和地址。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The relation between these levels for an association constructed as defined in the base specification [RFC5201] and ESP transform [RFC5202] is illustrated in Figure 10.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
图10说明了根据基本规范[RFC5201]和ESP转换[RFC5202]中的定义构建的关联的这些级别之间的关系。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
              -&lt;- SPI1a --                         -- SPI2a -&gt;-
      host1 &lt;              &gt; addr1a &lt;---&gt; addr2a &lt;              &gt; host2
              -&gt;- SPI2a --                         -- SPI1a -&lt;-
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
              -&lt;- SPI1a --                         -- SPI2a -&gt;-
      host1 &lt;              &gt; addr1a &lt;---&gt; addr2a &lt;              &gt; host2
              -&gt;- SPI2a --                         -- SPI1a -&lt;-
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-17">
Figure 10: Relation between Hosts, SPIs, and Addresses (Base Specification)
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-17">
图10：主机、SPI和地址之间的关系（基本规范）
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In Figure 10, host1 and host2 negotiate two unidirectional SAs, and each host selects the SPI value for its inbound SA. The addresses addr1a and addr2a are the source addresses that the hosts use in the base HIP exchange. These are the &#34;preferred&#34; (and only) addresses conveyed to the peer for use on each SA. That is, although packets sent to any of the hosts&#39; interfaces may be accepted on the inbound SA, the peer host in general knows of only the single destination address learned in the base exchange (e.g., for host1, it sends a packet on SPI2a to addr2a to reach host2), unless other mechanisms exist to learn of new addresses.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在图10中，host1和host2协商两个单向SA，每个主机为其入站SA选择SPI值。地址addr1a和addr2a是主机在基本HIP exchange中使用的源地址。这些是传送给对等方的“首选”（且仅限于）地址，用于每个SA。也就是说，尽管发送到任何主机接口的数据包可以在入站SA上被接受，但对等主机通常只知道在基本交换中学习到的单个目的地地址（例如，对于主机1，它在SPI2a上发送数据包到addr2a以到达主机2），除非存在其他机制来学习新地址。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In general, the bindings that exist in an implementation corresponding to this document can be depicted as shown in Figure 11. In this figure, a host can have multiple inbound SPIs (and, not shown, multiple outbound SPIs) associated with another host. Furthermore, each SPI may have multiple addresses associated with it. These addresses that are bound to an SPI are not used to lookup the incoming SA. Rather, the addresses are those that are provided to the peer host, as hints for which addresses to use to reach the host on that SPI. The LOCATOR parameter is used to change the set of addresses that a peer associates with a particular SPI.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
通常，与此文档对应的实现中存在的绑定可以如图11所示进行描述。在此图中，一台主机可以有多个入站SPI（未显示，还有多个出站SPI）与另一台主机关联。此外，每个SPI可以具有与其关联的多个地址。绑定到SPI的这些地址不用于查找传入SA。相反，这些地址是提供给对等主机的地址，作为指向该SPI上主机的地址的提示。LOCATOR参数用于更改对等方与特定SPI关联的地址集。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
                            address11
                          /
                   SPI1   - address12
                 /
                /           address21
           host -- SPI2   &lt;
                \           address22
                 \
                   SPI3   - address31
                          \
                            address32
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
                            address11
                          /
                   SPI1   - address12
                 /
                /           address21
           host -- SPI2   &lt;
                \           address22
                 \
                   SPI3   - address31
                          \
                            address32
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Figure 11: Relation between Hosts, SPIs, and Addresses (General Case)
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
图11：主机、SPI和地址之间的关系（一般情况）
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A host may establish any number of security associations (or SPIs) with a peer. The main purpose of having multiple SPIs with a peer is to group the addresses into collections that are likely to experience fate sharing. For example, if the host needs to change its addresses on SPI2, it is likely that both address21 and address22 will simultaneously become obsolete. In a typical case, such SPIs may correspond with physical interfaces; see below. Note, however, that especially in the case of site multihoming, one of the addresses may become unreachable while the other one still works. In the typical case, however, this does not require the host to inform its peers about the situation, since even the non-working address still logically exists.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
主机可以与对等机建立任意数量的安全关联（或SPI）。将多个SPI与一个对等点连接的主要目的是将地址分组到可能经历命运共享的集合中。例如，如果主机需要更改其在SPI2上的地址，则address21和address22很可能同时过时。在典型情况下，此类SPI可能与物理接口相对应；见下文。但是，请注意，特别是在站点多宿主的情况下，其中一个地址可能无法访问，而另一个地址仍然有效。然而，在典型情况下，这并不要求主机将情况通知其对等方，因为即使非工作地址在逻辑上仍然存在。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A basic property of HIP SAs is that the inbound IP address is not used to lookup the incoming SA. Therefore, in Figure 11, it may seem unnecessary for address31, for example, to be associated only with SPI3 -- in practice, a packet may arrive to SPI1 via destination address address31 as well. However, the use of different source and destination addresses typically leads to different paths, with different latencies in the network, and if packets were to arrive via an arbitrary destination IP address (or path) for a given SPI, the reordering due to different latencies may cause some packets to fall outside of the ESP anti-replay window. For this reason, HIP provides a mechanism to affiliate destination addresses with inbound SPIs, when there is a concern that anti-replay windows might be violated. In this sense, we can say that a given inbound SPI has an &#34;affinity&#34; for certain inbound IP addresses, and this affinity is communicated to the peer host. Each physical interface SHOULD have a separate SA, unless the ESP anti-replay window is loose.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
HIP SA的一个基本属性是入站IP地址不用于查找入站SA。因此，在图11中，例如address31似乎没有必要仅与SPI3关联——实际上，数据包也可以通过目的地址address31到达SPI1。然而，使用不同的源地址和目标地址通常会导致不同的路径，在网络中具有不同的延迟，并且如果数据包通过给定SPI的任意目标IP地址（或路径）到达，则由于不同延迟而导致的重新排序可能会导致一些数据包落在ESP防重播窗口之外。因此，当担心可能违反反重播窗口时，HIP提供了将目标地址与入站SPI关联的机制。从这个意义上讲，我们可以说，给定的入站SPI对某些入站IP地址具有“亲缘关系”，并且该亲缘关系被传送到对等主机。每个物理接口应具有单独的SA，除非ESP防重播窗口松动。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Moreover, even when the destination addresses used for a particular SPI are held constant, the use of different source interfaces may also cause packets to fall outside of the ESP anti-replay window, since the path traversed is often affected by the source address or
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
此外，即使当用于特定SPI的目的地地址保持不变时，使用不同的源接口也可能导致数据包落在ESP反重放窗口之外，因为通过的路径通常受到源地址或地址的影响
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
interface used. A host has no way to influence the source interface on which a peer sends its packets on a given SPI. A host SHOULD consistently use the same source interface and address when sending to a particular destination IP address and SPI. For this reason, a host may find it useful to change its SPI or at least reset its ESP anti-replay window when the peer host readdresses.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
使用的接口。主机无法影响对等方在给定SPI上发送其数据包的源接口。当发送到特定的目标IP地址和SPI时，主机应始终使用相同的源接口和地址。因此，当对等主机重新加载时，主机可能会发现更改其SPI或至少重置其ESP防重播窗口很有用。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
An address may appear on more than one SPI. This creates no ambiguity since the receiver will ignore the IP addresses during SA lookup anyway. However, this document does not specify such cases.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
一个地址可能出现在多个SPI上。这不会产生歧义，因为在SA查找过程中，接收方无论如何都会忽略IP地址。但是，本文件并未具体说明此类情况。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
When the LOCATOR parameter is sent in an UPDATE packet, then the receiver will respond with an UPDATE acknowledgment. When the LOCATOR parameter is sent in an R1 or I2 packet, the base exchange retransmission mechanism will confirm its successful delivery. LOCATORs may experimentally be used in NOTIFY packets; in this case, the recipient MUST consider the LOCATOR as informational and not immediately change the current preferred address, but can test the additional locators when the need arises. The use of the LOCATOR in a NOTIFY message may not be compatible with middleboxes.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
当定位器参数在更新包中发送时，接收器将以更新确认响应。当定位器参数在R1或I2数据包中发送时，基本交换重传机制将确认其成功传递。定位器可以实验性地用于通知分组中；在这种情况下，接收方必须将定位器视为信息性的，而不是立即改变当前首选地址，而是在需要时测试附加定位器。在通知消息中使用定位器可能与中间盒不兼容。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
4. LOCATOR Parameter Format
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
4. 定位器参数格式
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The LOCATOR parameter is a critical parameter as defined by [RFC5201]. It consists of the standard HIP parameter Type and Length fields, plus zero or more Locator sub-parameters. Each Locator sub-parameter contains a Traffic Type, Locator Type, Locator Length, Preferred locator bit, Locator Lifetime, and a Locator encoding. A LOCATOR containing zero Locator fields is permitted but has the effect of deprecating all addresses.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
定位器参数是[RFC5201]定义的关键参数。它由标准髋部参数类型和长度字段以及零个或多个定位器子参数组成。每个定位器子参数包含流量类型、定位器类型、定位器长度、首选定位器位、定位器寿命和定位器编码。允许使用包含零定位器字段的定位器，但其效果是拒绝使用所有地址。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
        0                   1                   2                   3
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |             Type              |            Length             |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       | Traffic Type   | Locator Type | Locator Length | Reserved   |P|
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                       Locator Lifetime                        |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                            Locator                            |
       |                                                               |
       |                                                               |
       |                                                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       .                                                               .
       .                                                               .
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       | Traffic Type   | Locator Type | Locator Length | Reserved   |P|
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                       Locator Lifetime                        |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                            Locator                            |
       |                                                               |
       |                                                               |
       |                                                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
        0                   1                   2                   3
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |             Type              |            Length             |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       | Traffic Type   | Locator Type | Locator Length | Reserved   |P|
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                       Locator Lifetime                        |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                            Locator                            |
       |                                                               |
       |                                                               |
       |                                                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       .                                                               .
       .                                                               .
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       | Traffic Type   | Locator Type | Locator Length | Reserved   |P|
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                       Locator Lifetime                        |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                            Locator                            |
       |                                                               |
       |                                                               |
       |                                                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-20">
Figure 12: LOCATOR Parameter Format
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-20">
图12：定位器参数格式
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Type: 193
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
类型：193
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Length: Length in octets, excluding Type and Length fields, and excluding padding.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
长度：以八位字节为单位的长度，不包括类型和长度字段，也不包括填充。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Traffic Type: Defines whether the locator pertains to HIP signaling, user data, or both.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
流量类型：定义定位器是否属于HIP信令、用户数据或两者。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Locator Type: Defines the semantics of the Locator field.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
定位器类型：定义定位器字段的语义。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Locator Length: Defines the length of the Locator field, in units of 4-byte words (Locators up to a maximum of 4*255 octets are supported).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
定位器长度：以4字节字为单位定义定位器字段的长度（最多支持4*255个八位字节的定位器）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Reserved: Zero when sent, ignored when received.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
保留：发送时为零，接收时忽略。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
P: Preferred locator. Set to one if the locator is preferred for that Traffic Type; otherwise, set to zero.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
首选定位器。如果定位器是该交通类型的首选定位器，则设置为1；否则，设置为零。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Locator Lifetime: Locator lifetime, in seconds.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
定位器寿命：定位器寿命，以秒为单位。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Locator: The locator whose semantics and encoding are indicated by the Locator Type field. All Locator sub-fields are integral multiples of four octets in length.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
定位器：其语义和编码由定位器类型字段指示的定位器。所有定位器子字段都是四个八位字节长度的整数倍。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Locator Lifetime indicates how long the following locator is expected to be valid. The lifetime is expressed in seconds. Each locator MUST have a non-zero lifetime. The address is expected to become deprecated when the specified number of seconds has passed since the reception of the message. A deprecated address SHOULD NOT be used as a destination address if an alternate (non-deprecated) is available and has sufficient scope.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
定位器生存期指示以下定位器预期有效的时间。寿命以秒表示。每个定位器必须具有非零生存期。当收到消息后经过指定的秒数时，该地址将被弃用。如果备用（未弃用）地址可用且具有足够的作用域，则不应将弃用的地址用作目标地址。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
4.1. Traffic Type and Preferred Locator
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
4.1. 流量类型和首选定位器
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The following Traffic Type values are defined:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
定义了以下流量类型值：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
0: Both signaling (HIP control packets) and user data.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
0：信令（HIP控制数据包）和用户数据。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1: Signaling packets only.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1：仅信令数据包。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2: Data packets only.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2：仅限数据包。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The &#34;P&#34; bit, when set, has scope over the corresponding Traffic Type. That is, when a &#34;P&#34; bit is set for Traffic Type &#34;2&#34;, for example, it means that the locator is preferred for data packets. If there is a conflict (for example, if the &#34;P&#34; bit is set for an address of Type &#34;0&#34; and a different address of Type &#34;2&#34;), the more specific Traffic Type rule applies (in this case, &#34;2&#34;). By default, the IP addresses used in the base exchange are Preferred locators for both signaling and user data, unless a new Preferred locator supersedes them. If no locators are indicated as preferred for a given Traffic Type, the implementation may use an arbitrary locator from the set of active locators.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
设置“P”位时，其作用域超过相应的通信量类型。也就是说，例如，当为业务类型“2”设置“P”位时，这意味着对于数据分组优选定位器。如果存在冲突（例如，如果为类型为“0”的地址和类型为“2”的不同地址设置了“P”位），则应用更具体的通信量类型规则（在本例中为“2”）。默认情况下，基本交换中使用的IP地址是信令和用户数据的首选定位器，除非新的首选定位器取代它们。如果没有定位器被指示为给定业务类型的优选定位器，则实现可以使用来自活动定位器集合的任意定位器。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
4.2. Locator Type and Locator
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
4.2. 定位器类型和定位器
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The following Locator Type values are defined, along with the associated semantics of the Locator field:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
定义了以下定位器类型值以及定位器字段的关联语义：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
0: An IPv6 address or an IPv4-in-IPv6 format IPv4 address [RFC4291] (128 bits long). This locator type is defined primarily for non-ESP-based usage.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
0:IPv6地址或IPv6格式的IPv4地址[RFC4291]（128位长）。此定位器类型主要用于非基于ESP的用途。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1: The concatenation of an ESP SPI (first 32 bits) followed by an IPv6 address or an IPv4-in-IPv6 format IPv4 address (an additional 128 bits). This IP address is defined primarily for ESP-based usage.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1：ESP SPI（前32位）后跟IPv6地址或IPv4-in-IPv6格式IPv4地址（附加128位）的级联。此IP地址主要是为基于ESP的使用而定义的。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
4.3. UPDATE Packet with Included LOCATOR
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
4.3. 使用包含的定位器更新数据包
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A number of combinations of parameters in an UPDATE packet are possible (e.g., see Section 3.2). In this document, procedures are defined only for the case in which one LOCATOR and one ESP_INFO parameter is used in any HIP packet. Furthermore, the LOCATOR SHOULD list all of the locators that are active on the HIP association (including those on SAs not covered by the ESP_INFO parameter). Any UPDATE packet that includes a LOCATOR parameter SHOULD include both an HMAC and a HIP_SIGNATURE parameter. The relationship between the announced Locators and any ESP_INFO parameters present in the packet is defined in Section 5.2. The sending of multiple LOCATOR and/or ESP_INFO parameters is for further study; receivers may wish to experiment with supporting such a possibility.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
更新数据包中的参数组合是可能的（例如，见第3.2节）。在本文件中，程序仅适用于在任何HIP数据包中使用一个定位器和一个ESP_信息参数的情况。此外，定位器应列出髋部关联上活动的所有定位器（包括ESP_INFO参数未涵盖的SAs上的定位器）。任何包含定位器参数的更新数据包都应该同时包含HMAC和HIP_签名参数。第5.2节定义了公布的定位器与数据包中存在的任何ESP_信息参数之间的关系。发送多个定位器和/或ESP_信息参数有待进一步研究；接收者可能希望尝试支持这种可能性。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5. Processing Rules
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5. 处理规则
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This section describes rules for sending and receiving the LOCATOR parameter, testing address reachability, and using Credit-Based Authorization (CBA) on UNVERIFIED locators.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本节介绍发送和接收定位器参数、测试地址可达性以及在未验证定位器上使用基于信用的授权（CBA）的规则。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.1. Locator Data Structure and Status
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.1. 定位器数据结构和状态
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In a typical implementation, each outgoing locator is represented by a piece of state that contains the following data:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在典型实现中，每个传出定位器由包含以下数据的一段状态表示：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o the actual bit pattern representing the locator,
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 表示定位器的实际位模式，
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o the lifetime (seconds),
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 寿命（秒），
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o the status (UNVERIFIED, ACTIVE, DEPRECATED),
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 状态（未验证、活动、不推荐），
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o the Traffic Type scope of the locator, and
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 定位器的流量类型范围，以及
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o whether the locator is preferred for any particular scope.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 定位器是否适用于任何特定范围。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The status is used to track the reachability of the address embedded within the LOCATOR parameter:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
状态用于跟踪定位器参数中嵌入的地址的可达性：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
UNVERIFIED indicates that the reachability of the address has not been verified yet,
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
未验证表示地址的可达性尚未验证，
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ACTIVE indicates that the reachability of the address has been verified and the address has not been deprecated,
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ACTIVE表示已验证地址的可访问性，且地址未被弃用，
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
DEPRECATED indicates that the locator lifetime has expired.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
不推荐使用表示定位器生存期已过期。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The following state changes are allowed:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
允许以下状态更改：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
UNVERIFIED to ACTIVE The reachability procedure completes successfully.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
未验证以激活可达性过程已成功完成。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
UNVERIFIED to DEPRECATED The locator lifetime expires while the locator is UNVERIFIED.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
未验证到不推荐使用定位器未验证时，定位器生存期将过期。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ACTIVE to DEPRECATED The locator lifetime expires while the locator is ACTIVE.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ACTIVE to Disprecated当定位器处于活动状态时，定位器生存期将到期。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ACTIVE to UNVERIFIED There has been no traffic on the address for some time, and the local policy mandates that the address reachability must be verified again before starting to use it again.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
从活动到未验证地址上已经有一段时间没有通信了，本地政策要求在再次开始使用地址之前必须再次验证地址的可达性。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
DEPRECATED to UNVERIFIED The host receives a new lifetime for the locator.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
已弃用为未验证主机将接收定位器的新生存期。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A DEPRECATED address MUST NOT be changed to ACTIVE without first verifying its reachability.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在未首先验证其可访问性之前，不得将不推荐使用的地址更改为活动地址。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Note that the state of whether or not a locator is preferred is not necessarily the same as the value of the Preferred bit in the Locator sub-parameter received from the peer. Peers may recommend certain locators to be preferred, but the decision on whether to actually use a locator as a preferred locator is a local decision, possibly influenced by local policy.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
注意，定位器是否优选的状态不一定与从对等方接收的定位器子参数中的优选比特的值相同。对等方可能会推荐某些定位器作为首选定位器，但关于是否实际使用定位器作为首选定位器的决定是本地决定，可能受本地策略的影响。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.2. Sending LOCATORs
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.2. 发送定位器
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The decision of when to send LOCATORs is basically a local policy issue. However, it is RECOMMENDED that a host send a LOCATOR whenever it recognizes a change of its IP addresses in use on an active HIP association, and assumes that the change is going to last at least for a few seconds. Rapidly sending LOCATORs that force the peer to change the preferred address SHOULD be avoided.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
何时发送定位器的决定基本上是一个本地策略问题。但是，建议主机在识别活动HIP关联上使用的IP地址发生更改时发送定位器，并假设更改至少持续几秒钟。应避免快速发送迫使对等方更改首选地址的定位器。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
When a host decides to inform its peers about changes in its IP addresses, it has to decide how to group the various addresses with SPIs. The grouping should consider also whether middlebox interaction requires sending the same LOCATOR in separate UPDATEs on different paths. Since each SPI is associated with a different Security Association, the grouping policy may also be based on ESP anti-replay protection considerations. In the typical case, simply basing the grouping on actual kernel level physical and logical interfaces may be the best policy. Grouping policy is outside of the scope of this document.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
当主机决定通知其对等方其IP地址的更改时，它必须决定如何使用SPI对各种地址进行分组。分组也应该考虑中间件是否需要在不同路径上的单独更新中发送相同的定位器。由于每个SPI都与不同的安全关联相关联，因此分组策略也可能基于ESP防重播保护考虑。在典型情况下，仅根据实际内核级物理和逻辑接口进行分组可能是最佳策略。分组策略不在本文档的范围内。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Note that the purpose of announcing IP addresses in a LOCATOR is to provide connectivity between the communicating hosts. In most cases, tunnels or virtual interfaces such as IPsec tunnel interfaces or Mobile IP home addresses provide sub-optimal connectivity. Furthermore, it should be possible to replace most tunnels with HIP based &#34;non-tunneling&#34;, therefore making most virtual interfaces fairly unnecessary in the future. Therefore, virtual interfaces SHOULD NOT be announced in general. On the other hand, there are clearly situations where tunnels are used for diagnostic and/or testing purposes. In such and other similar cases announcing the IP addresses of virtual interfaces may be appropriate.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
请注意，在定位器中公布IP地址的目的是提供通信主机之间的连接。在大多数情况下，隧道或虚拟接口（如IPsec隧道接口或移动IP主地址）提供次优连接。此外，应该可以用基于HIP的“非隧道”替换大多数隧道，因此在将来大多数虚拟接口都是不必要的。因此，一般不应宣布虚拟接口。另一方面，在某些情况下，隧道显然用于诊断和/或测试目的。在此类和其他类似情况下，公布虚拟接口的IP地址可能是合适的。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Hosts MUST NOT announce broadcast or multicast addresses in LOCATORs. Link-local addresses MAY be announced to peers that are known to be neighbors on the same link, such as when the IP destination address of a peer is also link-local. The announcement of link-local addresses in this case is a policy decision; link-local addresses used as Preferred locators will create reachability problems when the host moves to another link. In any case, link-local addresses MUST NOT be announced to a peer unless that peer is known to be on the same link.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
主机不得在定位器中宣布广播或多播地址。链路本地地址可以向已知为同一链路上的邻居的对等方宣布，例如当对等方的IP目的地地址也是链路本地时。在这种情况下，公布链路本地地址是一项政策决定；当主机移动到另一个链路时，用作首选定位器的链路本地地址将产生可达性问题。在任何情况下，链路本地地址都不得向对等方宣布，除非已知该对等方位于同一链路上。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Once the host has decided on the groups and assignment of addresses to the SPIs, it creates a LOCATOR parameter that serves as a complete representation of the addresses and affiliated SPIs intended for active use. We now describe a few cases introduced in Section 3.2. We assume that the Traffic Type for each locator is set to &#34;0&#34; (other values for Traffic Type may be specified in documents that separate the HIP control plane from data plane traffic). Other mobility and multihoming cases are possible but are left for further experimentation.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
一旦主机决定了SPI的地址组和分配，它将创建一个定位器参数，作为地址和相关SPI的完整表示，以供活动使用。我们现在描述第3.2节中介绍的几个案例。我们假设每个定位器的交通类型设置为“0”（交通类型的其他值可以在分离HIP控制平面和数据平面交通的文档中指定）。其他机动性和多归宿情况也是可能的，但仍有待进一步试验。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1. Host mobility with no multihoming and no rekeying. The mobile host creates a single UPDATE containing a single ESP_INFO with a single LOCATOR parameter. The ESP_INFO contains the current value of the SPI in both the OLD SPI and NEW SPI fields. The LOCATOR contains a single Locator with a &#34;Locator Type&#34; of &#34;1&#34;;
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1. 主机移动性，无多宿和密钥更新。移动主机创建一个更新，其中包含一个ESP_信息和一个定位器参数。ESP_信息在旧SPI和新SPI字段中都包含SPI的当前值。定位器包含“定位器类型”为“1”的单个定位器；
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-7">
the SPI must match that of the ESP_INFO. The Preferred bit SHOULD be set and the &#34;Locator Lifetime&#34; is set according to local policy. The UPDATE also contains a SEQ parameter as usual. This packet is retransmitted as defined in the HIP protocol specification [RFC5201]. The UPDATE should be sent to the peer&#39;s preferred IP address with an IP source address corresponding to the address in the LOCATOR parameter.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-7">
SPI必须与ESP\U信息的SPI匹配。应设置首选位，并根据本地策略设置“定位器寿命”。与往常一样，更新还包含一个SEQ参数。按照HIP协议规范[RFC5201]中的定义重新传输该数据包。更新应发送到对等方的首选IP地址，IP源地址与定位器参数中的地址相对应。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2. Host mobility with no multihoming but with rekeying. The mobile host creates a single UPDATE containing a single ESP_INFO with a single LOCATOR parameter (with a single address). The ESP_INFO contains the current value of the SPI in the OLD SPI and the new value of the SPI in the NEW SPI, and a KEYMAT Index as selected by local policy. Optionally, the host may choose to initiate a Diffie Hellman rekey by including a DIFFIE_HELLMAN parameter. The LOCATOR contains a single Locator with &#34;Locator Type&#34; of &#34;1&#34;; the SPI must match that of the NEW SPI in the ESP_INFO. Otherwise, the steps are identical to the case in which no rekeying is initiated.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2. 主机移动性，不需要多宿，但需要重新设置密钥。移动主机创建一个更新，其中包含一个ESP_信息和一个定位器参数（带有一个地址）。ESP_信息包含旧SPI中SPI的当前值和新SPI中SPI的新值，以及本地策略选择的KEYMAT索引。可选地，主机可以选择通过包括Diffie_-Hellman参数来启动Diffie-Hellman重设密钥。定位器包含“定位器类型”为“1”的单个定位器；SPI必须与ESP\U信息中的新SPI匹配。否则，这些步骤与不启动密钥更新的情况相同。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
3. Host multihoming (addition of an address). We only describe the simple case of adding an additional address to a (previously) single-homed, non-mobile host. The host SHOULD set up a new SA pair between this new address and the preferred address of the peer host. To do this, the multihomed host creates a new inbound SA and creates a new SPI. For the outgoing UPDATE message, it inserts an ESP_INFO parameter with an OLD SPI field of &#34;0&#34;, a NEW SPI field corresponding to the new SPI, and a KEYMAT Index as selected by local policy. The host adds to the UPDATE message a LOCATOR with two Type &#34;1&#34; Locators: the original address and SPI active on the association, and the new address and new SPI being added (with the SPI matching the NEW SPI contained in the ESP_INFO). The Preferred bit SHOULD be set depending on the policy to tell the peer host which of the two locators is preferred. The UPDATE also contains a SEQ parameter and optionally a DIFFIE_HELLMAN parameter, and follows rekeying procedures with respect to this new address. The UPDATE message SHOULD be sent to the peer&#39;s Preferred address with a source address corresponding to the new locator.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
3. 主机多宿主（添加地址）。我们只描述一个简单的例子，即向（以前）一个单独的、非移动主机添加一个额外的地址。主机应在此新地址和对等主机的首选地址之间设置新的SA对。为此，多宿主主机创建一个新的入站SA并创建一个新的SPI。对于传出的更新消息，它插入一个ESP_INFO参数，其中旧SPI字段为“0”，新SPI字段对应于新SPI，以及本地策略选择的KEYMAT索引。主机向更新消息中添加一个带有两个类型“1”定位器的定位器：关联上的原始地址和SPI活动，以及添加的新地址和新SPI（SPI与ESP_信息中包含的新SPI匹配）。应根据策略设置首选位，以告知对等主机两个定位器中的哪一个是首选的。更新还包含一个SEQ参数和一个DIFFIE_HELLMAN参数（可选），并遵循与此新地址相关的密钥更新过程。更新消息应发送到对等方的首选地址，其源地址对应于新定位器。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The sending of multiple LOCATORs, locators with Locator Type &#34;0&#34;, and multiple ESP_INFO parameters is for further study. Note that the inclusion of LOCATOR in an R1 packet requires the use of Type &#34;0&#34; locators since no SAs are set up at that point.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
发送多个定位器、定位器类型为“0”的定位器和多个ESP_信息参数有待进一步研究。请注意，R1数据包中包含定位器需要使用类型“0”定位器，因为在该点未设置SA。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.3. Handling Received LOCATORs
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.3. 处理收到的定位器
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A host SHOULD be prepared to receive a LOCATOR parameter in the following HIP packets: R1, I2, UPDATE, and NOTIFY.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
主机应准备好接收以下HIP数据包中的定位器参数：R1、I2、UPDATE和NOTIFY。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document describes sending both ESP_INFO and LOCATOR parameters in an UPDATE. The ESP_INFO parameter is included when there is a need to rekey or key a new SPI, and is otherwise included for the possible benefit of HIP-aware middleboxes. The LOCATOR parameter contains a complete map of the locators that the host wishes to make or keep active for the HIP association.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本文档介绍在更新中发送ESP_信息和定位器参数。当需要重新输入或输入新的SPI时，会包含ESP_INFO参数，另外还包括该参数，以使HIP感知的中间盒可能受益。定位器参数包含宿主希望为髋部关联创建或保持活动状态的定位器的完整地图。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In general, the processing of a LOCATOR depends upon the packet type in which it is included. Here, we describe only the case in which ESP_INFO is present and a single LOCATOR and ESP_INFO are sent in an UPDATE message; other cases are for further study. The steps below cover each of the cases described in Section 5.2.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
通常，定位器的处理取决于其所包含的分组类型。在这里，我们仅描述存在ESP_信息并且在更新消息中发送单个定位器和ESP_信息的情况；其他案例有待进一步研究。以下步骤涵盖第5.2节所述的每种情况。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The processing of ESP_INFO and LOCATOR parameters is intended to be modular and support future generalization to the inclusion of multiple ESP_INFO and/or multiple LOCATOR parameters. A host SHOULD first process the ESP_INFO before the LOCATOR, since the ESP_INFO may contain a new SPI value mapped to an existing SPI, while a Type &#34;1&#34; locator will only contain a reference to the new SPI.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ESP_信息和定位器参数的处理旨在模块化，并支持将来将多个ESP_信息和/或多个定位器参数包括在内。主机应首先在定位器之前处理ESP_信息，因为ESP_信息可能包含映射到现有SPI的新SPI值，而类型“1”定位器将仅包含对新SPI的引用。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
When a host receives a validated HIP UPDATE with a LOCATOR and ESP_INFO parameter, it processes the ESP_INFO as follows. The ESP_INFO parameter indicates whether an SA is being rekeyed, created, deprecated, or just identified for the benefit of middleboxes. The host examines the OLD SPI and NEW SPI values in the ESP_INFO parameter:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
当主机接收到带有定位器和ESP_信息参数的已验证髋部更新时，它将按如下方式处理ESP_信息。ESP_INFO参数表示SA是否正在被重新设置密钥、创建、弃用，或者只是为了中间包的利益而被识别。主机检查ESP_INFO参数中的旧SPI和新SPI值：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1. (no rekeying) If the OLD SPI is equal to the NEW SPI and both correspond to an existing SPI, the ESP_INFO is gratuitous (provided for middleboxes) and no rekeying is necessary.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1. （无密钥更新）如果旧的SPI等于新的SPI，并且两者都对应于现有的SPI，则ESP_信息是免费的（为中间盒提供），无需密钥更新。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2. (rekeying) If the OLD SPI indicates an existing SPI and the NEW SPI is a different non-zero value, the existing SA is being rekeyed and the host follows HIP ESP rekeying procedures by creating a new outbound SA with an SPI corresponding to the NEW SPI, with no addresses bound to this SPI. Note that locators in the LOCATOR parameter will reference this new SPI instead of the old SPI.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2. （重设密钥）如果旧SPI指示现有SPI，而新SPI是不同的非零值，则现有SA将被重设密钥，主机将通过创建一个新的出站SA，该出站SA具有与新SPI对应的SPI，并且没有地址绑定到此SPI，从而遵循HIP ESP重设密钥的过程。请注意，LOCATOR参数中的定位器将引用此新SPI，而不是旧SPI。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
3. (new SA) If the OLD SPI value is zero and the NEW SPI is a new non-zero value, then a new SA is being requested by the peer. This case is also treated like a rekeying event; the receiving host must create a new SA and respond with an UPDATE ACK.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
3. （新SA）如果旧SPI值为零，而新SPI为新的非零值，则对等方正在请求新SA。这种情况也被视为一个重新键入事件；接收主机必须创建一个新SA并用更新确认进行响应。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
4. (deprecating the SA) If the OLD SPI indicates an existing SPI and the NEW SPI is zero, the SA is being deprecated and all locators uniquely bound to the SPI are put into the DEPRECATED state.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
4. （弃用SA）如果旧SPI指示现有SPI，而新SPI为零，则SA将弃用，并且唯一绑定到SPI的所有定位器将处于弃用状态。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
If none of the above cases apply, a protocol error has occurred and the processing of the UPDATE is stopped.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
如果上述情况均不适用，则会发生协议错误并停止更新处理。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Next, the locators in the LOCATOR parameter are processed. For each locator listed in the LOCATOR parameter, check that the address therein is a legal unicast or anycast address. That is, the address MUST NOT be a broadcast or multicast address. Note that some implementations MAY accept addresses that indicate the local host, since it may be allowed that the host runs HIP with itself.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
接下来，处理定位器参数中的定位器。对于locator参数中列出的每个定位器，请检查其中的地址是否为合法的单播或选播地址。也就是说，地址不能是广播或多播地址。请注意，一些实现可能接受指示本地主机的地址，因为可能允许主机自身运行HIP。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The below assumes that all locators are of Type &#34;1&#34; with a Traffic Type of &#34;0&#34;; other cases are for further study.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
以下假设所有定位器类型为“1”，流量类型为“0”；其他案例有待进一步研究。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
For each Type &#34;1&#34; address listed in the LOCATOR parameter, the host checks whether the address is already bound to the SPI indicated. If the address is already bound, its lifetime is updated. If the status of the address is DEPRECATED, the status is changed to UNVERIFIED. If the address is not already bound, the address is added, and its status is set to UNVERIFIED. Mark all addresses corresponding to the SPI that were NOT listed in the LOCATOR parameter as DEPRECATED.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
对于LOCATOR参数中列出的每种类型的“1”地址，主机将检查该地址是否已绑定到指定的SPI。如果地址已绑定，则更新其生存期。如果地址的状态不推荐使用，则状态将更改为未验证。如果该地址尚未绑定，则会添加该地址，并将其状态设置为未验证。将定位器参数中未列出的与SPI相对应的所有地址标记为已弃用。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
As a result, at the end of processing, the addresses listed in the LOCATOR parameter have either a state of UNVERIFIED or ACTIVE, and any old addresses on the old SA not listed in the LOCATOR parameter have a state of DEPRECATED.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
因此，在处理结束时，LOCATOR参数中列出的地址的状态为“未验证”或“活动”，而LOCATOR参数中未列出的旧SA上的任何旧地址的状态为“已弃用”。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Once the host has processed the locators, if the LOCATOR parameter contains a new Preferred locator, the host SHOULD initiate a change of the Preferred locator. This requires that the host first verifies reachability of the associated address, and only then changes the Preferred locator; see Section 5.5.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
一旦主机处理了定位器，如果定位器参数包含新的首选定位器，则主机应启动首选定位器的更改。这要求主机首先验证关联地址的可达性，然后才更改首选定位器；见第5.5节。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
If a host receives a locator with an unsupported Locator Type, and when such a locator is also declared to be the Preferred locator for the peer, the host SHOULD send a NOTIFY error with a Notify Message Type of LOCATOR_TYPE_UNSUPPORTED, with the Notification Data field containing the locator(s) that the receiver failed to process. Otherwise, a host MAY send a NOTIFY error if a (non-preferred) locator with an unsupported Locator Type is received in a LOCATOR parameter.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
如果主机接收到具有不支持的定位器类型的定位器，并且当该定位器也被声明为对等方的首选定位器时，主机应发送通知错误，通知消息类型为locator_Type_unsupported，通知数据字段包含接收方未能处理的定位器。否则，如果在定位器参数中接收到不支持定位器类型的（非首选）定位器，主机可能会发送通知错误。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.4. Verifying Address Reachability
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.4. 验证地址可达性
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A host MUST verify the reachability of an UNVERIFIED address. The status of a newly learned address MUST initially be set to UNVERIFIED unless the new address is advertised in a R1 packet as a new Preferred locator. A host MAY also want to verify the reachability of an ACTIVE address again after some time, in which case it would set the status of the address to UNVERIFIED and reinitiate address verification.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
主机必须验证未验证地址的可达性。新读入地址的状态最初必须设置为未验证，除非新地址作为新的首选定位器在R1数据包中公布。主机可能还希望在一段时间后再次验证活动地址的可达性，在这种情况下，它会将地址的状态设置为未验证并重新初始化地址验证。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A host typically starts the address-verification procedure by sending a nonce to the new address. For example, when the host is changing its SPI and sending an ESP_INFO to the peer, the NEW SPI value SHOULD be random and the value MAY be copied into an ECHO_REQUEST sent in the rekeying UPDATE. However, if the host is not changing its SPI, it MAY still use the ECHO_REQUEST parameter in an UPDATE message sent to the new address. A host MAY also use other message exchanges as confirmation of the address reachability.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
主机通常通过向新地址发送nonce来启动地址验证过程。例如，当主机更改其SPI并向对等方发送ESP_信息时，新的SPI值应该是随机的，并且可以将该值复制到在密钥更新中发送的ECHO_请求中。但是，如果主机没有更改其SPI，它可能仍会在发送到新地址的更新消息中使用ECHO_请求参数。主机还可以使用其他消息交换来确认地址可达性。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Note that in the case of receiving a LOCATOR in an R1 and replying with an I2 to the new address in the LOCATOR, receiving the corresponding R2 is sufficient proof of reachability for the Responder&#39;s preferred address. Since further address verification of such an address can impede the HIP-base exchange, a host MUST NOT separately verify reachability of a new Preferred locator that was received on an R1.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
注意，在接收R1中的定位器并用I2回复定位器中的新地址的情况下，接收相应的R2足以证明响应者的首选地址的可达性。由于此类地址的进一步地址验证可能会妨碍HIP-base交换，因此主机不得单独验证R1上接收到的新首选定位器的可达性。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In some cases, it MAY be sufficient to use the arrival of data on a newly advertised SA as implicit address reachability verification as depicted in Figure 13, instead of waiting for the confirmation via a HIP packet. In this case, a host advertising a new SPI as part of its address reachability check SHOULD be prepared to receive traffic on the new SA.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在某些情况下，使用新公布的SA上的数据的到达作为隐式地址可达性验证（如图13所示）可能就足够了，而不是通过HIP数据包等待确认。在这种情况下，作为地址可达性检查的一部分，发布新SPI广告的主机应该准备接收新SA上的流量。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-5">
Mobile host Peer host
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-5">
移动主机对等主机
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
                                                   prepare incoming SA
                      NEW SPI in ESP_INFO (UPDATE)
                &lt;-----------------------------------
   switch to new outgoing SA
                           data on new SA
                -----------------------------------&gt;
                                                   mark address ACTIVE
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
                                                   prepare incoming SA
                      NEW SPI in ESP_INFO (UPDATE)
                &lt;-----------------------------------
   switch to new outgoing SA
                           data on new SA
                -----------------------------------&gt;
                                                   mark address ACTIVE
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-13">
Figure 13: Address Activation Via Use of a New SA
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-13">
图13：通过使用新SA进行地址激活
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
When address verification is in progress for a new Preferred locator, the host SHOULD select a different locator listed as ACTIVE, if one
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
当对新的首选定位器进行地址验证时，主机应选择一个列为活动的不同定位器（如果有）
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
such locator is available, to continue communications until address verification completes. Alternatively, the host MAY use the new Preferred locator while in UNVERIFIED status to the extent Credit-Based Authorization permits. Credit-Based Authorization is explained in Section 5.6. Once address verification succeeds, the status of the new Preferred locator changes to ACTIVE.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
这样的定位器是可用的，以继续通信，直到地址验证完成。或者，在基于信用的授权许可的范围内，主机可以在处于未验证状态时使用新的优选定位器。第5.6节解释了基于信用的授权。一旦地址验证成功，新首选定位器的状态将更改为活动。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.5. Changing the Preferred Locator
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.5. 更改首选定位器
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A host MAY want to change the Preferred outgoing locator for different reasons, e.g., because traffic information or ICMP error messages indicate that the currently used preferred address may have become unreachable. Another reason may be due to receiving a LOCATOR parameter that has the &#34;P&#34; bit set.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
主机可能出于不同的原因想要更改首选传出定位器，例如，因为流量信息或ICMP错误消息表明当前使用的首选地址可能无法访问。另一个原因可能是由于接收到设置了“P”位的定位器参数。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
To change the Preferred locator, the host initiates the following procedure:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
要更改首选定位器，主机将启动以下过程：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1. If the new Preferred locator has ACTIVE status, the Preferred locator is changed and the procedure succeeds.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1. 如果新的首选定位器处于活动状态，则首选定位器将更改，并且过程将成功。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2. If the new Preferred locator has UNVERIFIED status, the host starts to verify its reachability. The host SHOULD use a different locator listed as ACTIVE until address verification completes if one such locator is available. Alternatively, the host MAY use the new Preferred locator, even though in UNVERIFIED status, to the extent Credit-Based Authorization permits. Once address verification succeeds, the status of the new Preferred locator changes to ACTIVE and its use is no longer governed by Credit-Based Authorization.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2. 如果新的首选定位器具有未验证状态，主机将开始验证其可达性。如果有一个定位器可用，主机应使用列为活动的其他定位器，直到地址验证完成。或者，主机可以在基于信用的授权许可的范围内使用新的首选定位器，即使处于未验证状态。一旦地址验证成功，新首选定位器的状态将变为活动，其使用不再受基于信用的授权的控制。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
3. If the peer host has not indicated a preference for any address, then the host picks one of the peer&#39;s ACTIVE addresses randomly or according to policy. This case may arise if, for example, ICMP error messages that deprecate the Preferred locator arrive, but the peer has not yet indicated a new Preferred locator.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
3. 如果对等主机未表示对任何地址的偏好，则主机随机或根据策略选择对等主机的一个活动地址。例如，如果不推荐首选定位器的ICMP错误消息到达，但对等方尚未指示新的首选定位器，则可能出现这种情况。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
4. If the new Preferred locator has DEPRECATED status and there is at least one non-deprecated address, the host selects one of the non-deprecated addresses as a new Preferred locator and continues. If the selected address is UNVERIFIED, the address verification procedure described above will apply.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
4. 如果新的首选定位器处于不推荐状态，并且至少有一个未推荐的地址，则主机将选择其中一个未推荐的地址作为新的首选定位器并继续。如果所选地址未经验证，将采用上述地址验证程序。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.6. Credit-Based Authorization
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.6. 基于信用的授权
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
To prevent redirection-based flooding attacks, the use of a Credit-Based Authorization (CBA) approach is mandatory when a host sends data to an UNVERIFIED locator. The following algorithm meets the security considerations for prevention of amplification and time-shifting attacks. Other forms of credit aging, and other values for the CreditAgingFactor and CreditAgingInterval parameters in particular, are for further study, and so are the advanced CBA techniques specified in [CBA-MIPv6].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
为了防止基于重定向的泛洪攻击，当主机向未经验证的定位器发送数据时，必须使用基于信用的授权（CBA）方法。以下算法满足防止放大和时移攻击的安全考虑。其他形式的信贷账龄，特别是CreditAgingFactor和CreditAgingInterval参数的其他值，以及[CBA-MIPv6]中规定的高级CBA技术，有待进一步研究。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.6.1. Handling Payload Packets
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.6.1. 处理有效负载数据包
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A host maintains a &#34;credit counter&#34; for each of its peers. Whenever a packet arrives from a peer, the host SHOULD increase that peer&#39;s credit counter by the size of the received packet. When the host has a packet to be sent to the peer, and when the peer&#39;s Preferred locator is listed as UNVERIFIED and no alternative locator with status ACTIVE is available, the host checks whether it can send the packet to the UNVERIFIED locator. The packet SHOULD be sent if the value of the credit counter is higher than the size of the outbound packet. If the credit counter is too low, the packet MUST be discarded or buffered until address verification succeeds. When a packet is sent to a peer at an UNVERIFIED locator, the peer&#39;s credit counter MUST be reduced by the size of the packet. The peer&#39;s credit counter is not affected by packets that the host sends to an ACTIVE locator of that peer.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
主机为每个对等机维护一个“信用计数器”。每当一个数据包从一个对等方到达，主机就应该将该对等方的信用计数器增加接收到的数据包的大小。当主机有一个数据包要发送给对等方，并且对等方的首选定位器被列为未验证定位器，并且没有状态为ACTIVE的备用定位器可用时，主机检查是否可以将数据包发送给未验证定位器。如果信用计数器的值高于出站数据包的大小，则应发送数据包。如果信用计数器过低，则必须丢弃或缓冲数据包，直到地址验证成功。当一个数据包被发送到一个未经验证的定位器上的对等方时，对等方的信用计数器必须减少数据包的大小。对等方的信用计数器不受主机发送到该对等方的活动定位器的数据包的影响。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Figure 14 depicts the actions taken by the host when a packet is received. Figure 15 shows the decision chain in the event a packet is sent.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
图14描述了主机在收到数据包时采取的操作。图15显示了发送数据包时的决策链。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
       Inbound
       packet
          |
          |       +----------------+               +---------------+
          |       |    Increase    |               |    Deliver    |
          +-----&gt; | credit counter |-------------&gt; |   packet to   |
                  | by packet size |               |  application  |
                  +----------------+               +---------------+
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
       Inbound
       packet
          |
          |       +----------------+               +---------------+
          |       |    Increase    |               |    Deliver    |
          +-----&gt; | credit counter |-------------&gt; |   packet to   |
                  | by packet size |               |  application  |
                  +----------------+               +---------------+
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-7">
Figure 14: Receiving Packets with Credit-Based Authorization
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-7">
图14：使用基于信用的授权接收数据包
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
    Outbound
     packet
        |          _________________
        |         /                 \                 +---------------+
        |        /  Is the preferred \       No       |  Send packet  |
        +-----&gt; | destination address |-------------&gt; |  to preferred |
                 \    UNVERIFIED?    /                |    address    |
                  \_________________/                 +---------------+
                           |
                           | Yes
                           |
                           v
                   _________________
                  /                 \                 +---------------+
                 /   Does an ACTIVE  \      Yes       |  Send packet  |
                | destination address |-------------&gt; |   to ACTIVE   |
                 \       exist?      /                |    address    |
                  \_________________/                 +---------------+
                           |
                           | No
                           |
                           v
                   _________________
                  /                 \                 +---------------+
                 /   Credit counter  \       No       |               |
                |          &gt;=         |-------------&gt; |  Drop packet  |
                 \    packet size?   /                |               |
                  \_________________/                 +---------------+
                           |
                           | Yes
                           |
                           v
                   +---------------+                  +---------------+
                   | Reduce credit |                  |  Send packet  |
                   |  counter by   |----------------&gt; | to preferred  |
                   |  packet size  |                  |    address    |
                   +---------------+                  +---------------+
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
    Outbound
     packet
        |          _________________
        |         /                 \                 +---------------+
        |        /  Is the preferred \       No       |  Send packet  |
        +-----&gt; | destination address |-------------&gt; |  to preferred |
                 \    UNVERIFIED?    /                |    address    |
                  \_________________/                 +---------------+
                           |
                           | Yes
                           |
                           v
                   _________________
                  /                 \                 +---------------+
                 /   Does an ACTIVE  \      Yes       |  Send packet  |
                | destination address |-------------&gt; |   to ACTIVE   |
                 \       exist?      /                |    address    |
                  \_________________/                 +---------------+
                           |
                           | No
                           |
                           v
                   _________________
                  /                 \                 +---------------+
                 /   Credit counter  \       No       |               |
                |          &gt;=         |-------------&gt; |  Drop packet  |
                 \    packet size?   /                |               |
                  \_________________/                 +---------------+
                           |
                           | Yes
                           |
                           v
                   +---------------+                  +---------------+
                   | Reduce credit |                  |  Send packet  |
                   |  counter by   |----------------&gt; | to preferred  |
                   |  packet size  |                  |    address    |
                   +---------------+                  +---------------+
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-8">
Figure 15: Sending Packets with Credit-Based Authorization
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-8">
图15：使用基于信用的授权发送数据包
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.6.2. Credit Aging
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.6.2. 信用老化
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A host ensures that the credit counters it maintains for its peers gradually decrease over time. Such &#34;credit aging&#34; prevents a malicious peer from building up credit at a very slow speed and using this, all at once, for a severe burst of redirected packets.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
主机确保它为其对等机维护的信用计数器随时间逐渐减少。这样的“信用老化”可以防止恶意的对等方以非常慢的速度建立信用，并利用这一点，一次完成重定向数据包的严重突发。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Credit aging may be implemented by multiplying credit counters with a factor, CreditAgingFactor (a fractional value less than one), in fixed time intervals of CreditAgingInterval length. Choosing appropriate values for CreditAgingFactor and CreditAgingInterval is important to ensure that a host can send packets to an address in state UNVERIFIED even when the peer sends at a lower rate than the host itself. When CreditAgingFactor or CreditAgingInterval are too small, the peer&#39;s credit counter might be too low to continue sending packets until address verification concludes.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
信用账龄可通过将信用计数器与系数CreditAgingFactor（小于1的分数值）相乘，在CreditAgingInterval长度的固定时间间隔内实现。为CreditAgingFactor和CreditAgingInterval选择适当的值对于确保主机可以向处于未验证状态的地址发送数据包非常重要，即使当对等方以低于主机本身的速率发送数据包时也是如此。当CreditAgingFactor或CreditAgingInterval太小时，对等方的信用计数器可能太低，无法继续发送数据包，直到地址验证结束。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The parameter values proposed in this document are as follows:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本文件中建议的参数值如下：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
CreditAgingFactor 7/8 CreditAgingInterval 5 seconds
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
CreditAgingFactor 7/8 CreditAgingInterval 5秒
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
These parameter values work well when the host transfers a file to the peer via a TCP connection and the end-to-end round-trip time does not exceed 500 milliseconds. Alternative credit-aging algorithms may use other parameter values or different parameters, which may even be dynamically established.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
当主机通过TCP连接将文件传输到对等方并且端到端的往返时间不超过500毫秒时，这些参数值可以正常工作。其他信用账龄算法可能使用其他参数值或不同参数，甚至可能动态建立。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6. Security Considerations
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6. 安全考虑
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The HIP mobility mechanism provides a secure means of updating a host&#39;s IP address via HIP UPDATE packets. Upon receipt, a HIP host cryptographically verifies the sender of an UPDATE, so forging or replaying a HIP UPDATE packet is very difficult (see [RFC5201]). Therefore, security issues reside in other attack domains. The two we consider are malicious redirection of legitimate connections as well as redirection-based flooding attacks using this protocol. This can be broken down into the following:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
HIP移动机制提供了通过HIP更新包更新主机IP地址的安全方法。收到后，HIP主机以加密方式验证更新的发送方，因此伪造或重放HIP更新数据包非常困难（请参见[RFC5201]）。因此，安全问题存在于其他攻击域中。我们考虑的两个是恶意的重定向合法连接，以及基于重定向的洪泛攻击使用此协议。这可分为以下几点：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
Impersonation attacks
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
模拟攻击
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-9">
- direct conversation with the misled victim
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-9">
- 与被误导的受害者直接对话
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-9">
- man-in-the-middle attack
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-9">
- 中间人攻击
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
DoS attacks
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
拒绝服务攻击
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-9">
- flooding attacks (== bandwidth-exhaustion attacks)
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-9">
- 泛洪攻击（=带宽耗尽攻击）
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
* tool 1: direct flooding
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
* 工具1：直接注水
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
* tool 2: flooding by zombies
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
* 工具2：僵尸泛滥
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
* tool 3: redirection-based flooding
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
* 工具3：基于重定向的泛洪
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-9">
- memory-exhaustion attacks
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-9">
- 内存耗尽攻击
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-9">
- computational-exhaustion attacks
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-9">
- 计算耗尽攻击
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
We consider these in more detail in the following sections.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
我们在下面的章节中更详细地考虑这些。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In Section 6.1 and Section 6.2, we assume that all users are using HIP. In Section 6.3 we consider the security ramifications when we have both HIP and non-HIP users. Security considerations for Credit-Based Authorization are discussed in [SIMPLE-CBA].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在第6.1节和第6.2节中，我们假设所有用户都在使用HIP。在第6.3节中，我们考虑了安全性后果，当我们有髋和非髋关节用户。[SIMPLE-CBA]中讨论了基于信用的授权的安全注意事项。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6.1. Impersonation Attacks
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6.1. 模拟攻击
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
An attacker wishing to impersonate another host will try to mislead its victim into directly communicating with them, or carry out a man-in-the-middle (MitM) attack between the victim and the victim&#39;s desired communication peer. Without mobility support, both attack types are possible only if the attacker resides on the routing path between its victim and the victim&#39;s desired communication peer, or if the attacker tricks its victim into initiating the connection over an incorrect routing path (e.g., by acting as a router or using spoofed DNS entries).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
希望模拟另一台主机的攻击者将试图误导其受害者直接与其通信，或在受害者和受害者所需的通信对等方之间执行中间人（MitM）攻击。如果不支持移动性，则只有当攻击者驻留在其受害者和受害者所需通信对等方之间的路由路径上，或者如果攻击者诱使其受害者通过不正确的路由路径启动连接（例如，通过充当路由器或使用伪造的DNS条目），这两种攻击类型才可能发生。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The HIP extensions defined in this specification change the situation in that they introduce an ability to redirect a connection (like IPv6), both before and after establishment. If no precautionary measures are taken, an attacker could misuse the redirection feature to impersonate a victim&#39;s peer from any arbitrary location. The authentication and authorization mechanisms of the HIP base exchange [RFC5201] and the signatures in the UPDATE message prevent this attack. Furthermore, ownership of a HIP association is securely linked to a HIP HI/HIT. If an attacker somehow uses a bug in the implementation or weakness in some protocol to redirect a HIP connection, the original owner can always reclaim their connection (they can always prove ownership of the private key associated with their public HI).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本规范中定义的HIP扩展改变了这种情况，它们引入了重定向连接（如IPv6）的能力，在建立之前和之后都是如此。如果没有采取预防措施，攻击者可能会滥用重定向功能从任意位置模拟受害者的对等方。HIP base exchange[RFC5201]的身份验证和授权机制以及更新消息中的签名可防止此攻击。此外，髋部协会的所有权与髋部HI/HIT安全关联。如果攻击者以某种方式使用实现中的错误或某些协议中的弱点重定向HIP连接，则原始所有者始终可以收回其连接（他们始终可以证明与公共HI关联的私钥的所有权）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
MitM attacks are always possible if the attacker is present during the initial HIP base exchange and if the hosts do not authenticate each other&#39;s identities. However, once the opportunistic base exchange has taken place, even a MitM cannot steal the HIP connection anymore because it is very difficult for an attacker to create an UPDATE packet (or any HIP packet) that will be accepted as a legitimate update. UPDATE packets use HMAC and are signed. Even when an attacker can snoop packets to obtain the SPI and HIT/HI, they still cannot forge an UPDATE packet without knowledge of the secret keys.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
如果攻击者在初始HIP-base交换期间在场，并且主机未验证彼此的身份，则始终可能发生MitM攻击。但是，一旦发生了机会主义基本交换，即使是MitM也无法再窃取HIP连接，因为攻击者很难创建将被接受为合法更新的更新包（或任何HIP包）。更新数据包使用HMAC并签名。即使攻击者可以窥探数据包以获取SPI和HIT/HI，他们仍然无法在不知道密钥的情况下伪造更新数据包。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6.2. Denial-of-Service Attacks
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6.2. 拒绝服务攻击
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6.2.1. Flooding Attacks
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6.2.1. 洪水袭击
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The purpose of a denial-of-service attack is to exhaust some resource of the victim such that the victim ceases to operate correctly. A denial-of-service attack can aim at the victim&#39;s network attachment (flooding attack), its memory, or its processing capacity. In a flooding attack, the attacker causes an excessive number of bogus or unwanted packets to be sent to the victim, which fills their available bandwidth. Note that the victim does not necessarily need to be a node; it can also be an entire network. The attack basically functions the same way in either case.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
拒绝服务攻击的目的是耗尽受害者的某些资源，从而使受害者停止正常操作。拒绝服务攻击可以针对受害者的网络连接（洪水攻击）、内存或处理能力。在泛洪攻击中，攻击者会向受害者发送过多的伪造或不需要的数据包，这会占用受害者的可用带宽。注意，受害者不一定需要是节点；它也可以是一个完整的网络。在这两种情况下，攻击的功能基本相同。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
An effective DoS strategy is distributed denial of service (DDoS). Here, the attacker conventionally distributes some viral software to as many nodes as possible. Under the control of the attacker, the infected nodes, or &#34;zombies&#34;, jointly send packets to the victim. With such an &#39;army&#39;, an attacker can take down even very high bandwidth networks/victims.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
分布式拒绝服务（DDoS）是一种有效的拒绝服务策略。在这里，攻击者通常会将一些病毒软件分发到尽可能多的节点。在攻击者的控制下，受感染的节点或“僵尸”共同向受害者发送数据包。有了这样一支“军队”，攻击者甚至可以摧毁非常高带宽的网络/受害者。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
With the ability to redirect connections, an attacker could realize a DDoS attack without having to distribute viral code. Here, the attacker initiates a large download from a server, and subsequently redirects this download to its victim. The attacker can repeat this with multiple servers. This threat is mitigated through reachability checks and credit-based authorization. Both strategies do not eliminate flooding attacks per se, but they preclude: (i) their use from a location off the path towards the flooded victim; and (ii) any amplification in the number and size of the redirected packets. As a result, the combination of a reachability check and credit-based authorization lowers a HIP redirection-based flooding attack to the level of a direct flooding attack in which the attacker itself sends the flooding traffic to the victim.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
借助重定向连接的能力，攻击者可以实现DDoS攻击，而无需分发病毒代码。在这里，攻击者从服务器启动一个大型下载，然后将此下载重定向到其受害者。攻击者可以在多台服务器上重复此操作。这种威胁通过可达性检查和基于信用的授权得到缓解。这两种策略本身并不能消除洪水袭击，但它们排除了：（i）在通往洪水受害者的道路以外的位置使用洪水袭击；以及（ii）重定向分组的数量和大小的任何放大。因此，可达性检查和基于信用的授权的结合将基于HIP重定向的泛洪攻击降低到直接泛洪攻击的级别，在这种攻击中，攻击者自己将泛洪通信发送给受害者。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6.2.2. Memory/Computational-Exhaustion DoS Attacks
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6.2.2. 内存/计算耗尽DoS攻击
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
We now consider whether or not the proposed extensions to HIP add any new DoS attacks (consideration of DoS attacks using the base HIP exchange and updates is discussed in [RFC5201]). A simple attack is to send many UPDATE packets containing many IP addresses that are not flagged as preferred. The attacker continues to send such packets until the number of IP addresses associated with the attacker&#39;s HI crashes the system. Therefore, there SHOULD be a limit to the number of IP addresses that can be associated with any HI. Other forms of memory/computationally exhausting attacks via the HIP UPDATE packet are handled in the base HIP document [RFC5201].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
现在，我们考虑是否提出的HIP扩展添加任何新的DoS攻击（考虑到使用HIP交换和更新的DoS攻击在[RCF5201]中讨论）。一种简单的攻击是发送多个更新包，其中包含许多未标记为首选的IP地址。攻击者继续发送此类数据包，直到与攻击者HI关联的IP地址数使系统崩溃。因此，应限制可与任何HI关联的IP地址的数量。通过HIP更新包的其他形式的内存/计算消耗攻击在基本HIP文档[RFC5201]中处理。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A central server that has to deal with a large number of mobile clients may consider increasing the SA lifetimes to try to slow down the rate of rekeying UPDATEs or increasing the cookie difficulty to slow down the rate of attack-oriented connections.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
必须处理大量移动客户端的中央服务器可以考虑增加SA寿命，以尝试降低更新密钥的速率或增加Cookie难度以减缓面向攻击的连接的速率。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6.3. Mixed Deployment Environment
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6.3. 混合部署环境
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
We now assume an environment with both HIP and non-HIP aware hosts. Four cases exist.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
现在，我们假设一个环境同时具有HIP和非HIP感知主机。存在四个案例。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1. A HIP host redirects its connection onto a non-HIP host. The non-HIP host will drop the reachability packet, so this is not a threat unless the HIP host is a MitM that could somehow respond successfully to the reachability check.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1. HIP主机将其连接重定向到非HIP主机。非HIP主机将丢弃可达性数据包，因此这不是威胁，除非HIP主机是能够以某种方式成功响应可达性检查的MitM。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2. A non-HIP host attempts to redirect their connection onto a HIP host. This falls into IPv4 and IPv6 security concerns, which are outside the scope of this document.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2. 非HIP主机尝试将其连接重定向到HIP主机上。这属于IPv4和IPv6安全问题，超出了本文档的范围。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
3. A non-HIP host attempts to steal a HIP host&#39;s session (assume that Secure Neighbor Discovery is not active for the following). The non-HIP host contacts the service that a HIP host has a connection with and then attempts to change its IP address to steal the HIP host&#39;s connection. What will happen in this case is implementation dependent but such a request should fail by being ignored or dropped. Even if the attack were successful, the HIP host could reclaim its connection via HIP.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
3. 非HIP主机试图窃取HIP主机的会话（假定安全邻居发现在以下情况下不处于活动状态）。非HIP主机与HIP主机连接的服务联系，然后尝试更改其IP地址以窃取HIP主机的连接。在这种情况下会发生什么取决于实现，但这样的请求应该被忽略或删除而失败。即使攻击成功，HIP主机也可以通过HIP恢复连接。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
4. A HIP host attempts to steal a non-HIP host&#39;s session. A HIP host could spoof the non-HIP host&#39;s IP address during the base exchange or set the non-HIP host&#39;s IP address as its preferred address via an UPDATE. Other possibilities exist, but a simple solution is to prevent the use of HIP address check information to influence non-HIP sessions.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
4. HIP主机试图窃取非HIP主机的会话。HIP主机可以在基本交换期间欺骗非HIP主机的IP地址，或者通过更新将非HIP主机的IP地址设置为其首选地址。存在其他可能性，但一个简单的解决方案是防止使用HIP地址检查信息影响非HIP会话。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
7. IANA Considerations
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
7. IANA考虑
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document defines a LOCATOR parameter for the Host Identity Protocol [RFC5201]. This parameter is defined in Section 4 with a Type of 193.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本文档定义了主机标识协议[RFC5201]的定位器参数。该参数在第4节中定义，类型为193。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document also defines a LOCATOR_TYPE_UNSUPPORTED Notify Message Type as defined in the Host Identity Protocol specification [RFC5201]. This parameter is defined in Section 5.3 with a value of 46.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本文档还定义了主机标识协议规范[RFC5201]中定义的定位器类型。该参数在第5.3节中定义为46。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
8. Authors and Acknowledgments
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
8. 作者和致谢
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Pekka Nikander and Jari Arkko originated this document, and Christian Vogt and Thomas Henderson (editor) later joined as co-authors. Greg Perkins contributed the initial draft of the security section. Petri Jokela was a co-author of the initial individual submission.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
佩卡·尼坎德（Pekka Nikander）和贾里·阿尔科（Jari Arkko）撰写了这份文件，克里斯蒂安·沃格特（Christian Vogt）和托马斯·亨德森（Thomas Henderson）（编辑）后来加入为合著者。格雷格·帕金斯（Greg Perkins）贡献了安全部分的初稿。Petri Jokela是初次个人提交的合著者。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The authors thank Miika Komu, Mika Kousa, Jeff Ahrenholz, and Jan Melen for many improvements to the document.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
作者感谢Miika Komu、Mika Kousa、Jeff Ahrenholz和Jan Melen对文档的许多改进。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
9. References
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
9. 工具书类
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
9.1. Normative references
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
9.1. 规范性引用文件
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC2119] Bradner, S., &#34;Key words for use in RFCs to Indicate Requirement Levels&#34;, BCP 14, RFC 2119, March 1997.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC2119]Bradner，S.，“RFC中用于表示需求水平的关键词”，BCP 14，RFC 2119，1997年3月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC3484] Draves, R., &#34;Default Address Selection for Internet Protocol version 6 (IPv6)&#34;, RFC 3484, February 2003.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC3484]Draves，R.，“互联网协议版本6（IPv6）的默认地址选择”，RFC 3484，2003年2月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC4291] Hinden, R. and S. Deering, &#34;IP Version 6 Addressing Architecture&#34;, RFC 4291, February 2006.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC4291]Hinden，R.和S.Deering，“IP版本6寻址体系结构”，RFC 42912006年2月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC4303] Kent, S., &#34;IP Encapsulating Security Payload (ESP)&#34;, RFC 4303, December 2005.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC4303]Kent，S.，“IP封装安全有效载荷（ESP）”，RFC 4303，2005年12月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC4423] Moskowitz, R. and P. Nikander, &#34;Host Identity Protocol (HIP) Architecture&#34;, RFC 4423, May 2006.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC4423]Moskowitz，R.和P.Nikander，“主机身份协议（HIP）体系结构”，RFC 4423，2006年5月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC5201] Moskowitz, R., Nikander, P., Jokela, P., Ed., and T. Henderson, &#34;Host Identity Protocol&#34;, RFC 5201, April 2008.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC5201]Moskowitz，R.，Nikander，P.，Jokela，P.，Ed.，和T.Henderson，“主机身份协议”，RFC 52012008年4月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC5202] Jokela, P., Moskowitz, R., and P. Nikander, &#34;Using the ESP Transport Format with the Host Identity Protocol (HIP)&#34;, RFC 5202, April 2008.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC5202]Jokela，P.，Moskowitz，R.，和P.Nikander，“将ESP传输格式与主机标识协议（HIP）结合使用”，RFC 52022008年4月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC5204] Laganier, J. and L. Eggert, &#34;Host Identity Protocol (HIP) Rendezvous Extension&#34;, RFC 5204, April 2008.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC5204]Laganier，J.和L.Eggert，“主机身份协议（HIP）会合扩展”，RFC 52042008年4月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
9.2. Informative references
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
9.2. 参考资料
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[CBA-MIPv6] Vogt, C. and J. Arkko, &#34;Credit-Based Authorization for Mobile IPv6 Early Binding Updates&#34;, Work in Progress, February 2005.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[CBA-MIPv6]Vogt，C.和J.Arkko，“移动IPv6早期绑定更新的基于信用的授权”，正在进行的工作，2005年2月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC4225] Nikander, P., Arkko, J., Aura, T., Montenegro, G., and E. Nordmark, &#34;Mobile IP Version 6 Route Optimization Security Design Background&#34;, RFC 4225, December 2005.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC4225]Nikander，P.，Arkko，J.，Aura，T.，黑山，G.，和E.Nordmark，“移动IP版本6路由优化安全设计背景”，RFC 42252005年12月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[SIMPLE-CBA] Vogt, C. and J. Arkko, &#34;Credit-Based Authorization for Concurrent Reachability Verification&#34;, Work in Progress, February 2006.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[SIMPLE-CBA]Vogt，C.和J.Arkko，“并行可达性验证的基于信用的授权”，正在进行的工作，2006年2月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Authors&#39; Addresses
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
作者地址
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Pekka Nikander Ericsson Research NomadicLab JORVAS FIN-02420 FINLAND
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
佩卡·尼坎德·爱立信研究实验室JORVAS FIN-02420芬兰
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   Phone: +358 9 299 1
   EMail: pekka.nikander@nomadiclab.com
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   Phone: +358 9 299 1
   EMail: pekka.nikander@nomadiclab.com
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Thomas R. Henderson (editor) The Boeing Company P.O. Box 3707 Seattle, WA USA
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Thomas R.Henderson（编辑）波音公司美国华盛顿州西雅图3707号邮政信箱
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   EMail: thomas.r.henderson@boeing.com
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   EMail: thomas.r.henderson@boeing.com
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Christian Vogt Ericsson Research NomadicLab Hirsalantie 11 JORVAS FIN-02420 FINLAND
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
克里斯蒂安·沃格特·爱立信游牧研究实验室Hirsalantie 11 JORVAS FIN-02420芬兰
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Phone: EMail: christian.vogt@ericsson.com
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
电话：电子邮件：克里斯蒂安。vogt@ericsson.com
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Jari Arkko Ericsson Research NomadicLab JORVAS FIN-02420 FINLAND
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
雅丽阿尔科爱立信游牧研究实验室JORVAS FIN-02420芬兰
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   Phone: +358 40 5079256
   EMail: jari.arkko@ericsson.com
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   Phone: +358 40 5079256
   EMail: jari.arkko@ericsson.com
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Full Copyright Statement
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
完整版权声明
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Copyright (C) The IETF Trust (2008).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
版权所有（C）IETF信托基金（2008年）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document is subject to the rights, licenses and restrictions contained in BCP 78, and except as set forth therein, the authors retain all their rights.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本文件受BCP 78中包含的权利、许可和限制的约束，除其中规定外，作者保留其所有权利。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document and the information contained herein are provided on an &#34;AS IS&#34; basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本文件及其包含的信息以“原样”为基础提供，贡献者、他/她所代表或赞助的组织（如有）、互联网协会、IETF信托基金和互联网工程任务组不承担任何明示或暗示的担保，包括但不限于任何保证，即使用本文中的信息不会侵犯任何权利，或对适销性或特定用途适用性的任何默示保证。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Intellectual Property
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
知识产权
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The IETF takes no position regarding the validity or scope of any Intellectual Property Rights or other rights that might be claimed to pertain to the implementation or use of the technology described in this document or the extent to which any license under such rights might or might not be available; nor does it represent that it has made any independent effort to identify any such rights. Information on the procedures with respect to rights in RFC documents can be found in BCP 78 and BCP 79.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IETF对可能声称与本文件所述技术的实施或使用有关的任何知识产权或其他权利的有效性或范围，或此类权利下的任何许可可能或可能不可用的程度，不采取任何立场；它也不表示它已作出任何独立努力来确定任何此类权利。有关RFC文件中权利的程序信息，请参见BCP 78和BCP 79。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Copies of IPR disclosures made to the IETF Secretariat and any assurances of licenses to be made available, or the result of an attempt made to obtain a general license or permission for the use of such proprietary rights by implementers or users of this specification can be obtained from the IETF on-line IPR repository at http://www.ietf.org/ipr.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
向IETF秘书处披露的知识产权副本和任何许可证保证，或本规范实施者或用户试图获得使用此类专有权利的一般许可证或许可的结果，可从IETF在线知识产权存储库获取，网址为http://www.ietf.org/ipr.
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The IETF invites any interested party to bring to its attention any copyrights, patents or patent applications, or other proprietary rights that may cover technology that may be required to implement this standard. Please address the information to the IETF at ietf-ipr@ietf.org.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IETF邀请任何相关方提请其注意任何版权、专利或专利申请，或其他可能涵盖实施本标准所需技术的专有权利。请将信息发送至IETF的IETF-ipr@ietf.org.
        </p>
      </div>
    </div>
  </div>
  <div id="rfc_footer"></div>
</body>
</html>
