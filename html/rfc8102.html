<!DOCTYPE html>

<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name='description' content="RFC 8102: Remote-LFA Node Protection and Manageability中文翻译 中文RFC RFC文档 RFC翻译 RFC中文版">
  <title>RFC8102 中文翻译 中文RFC RFC文档 RFC翻译 RFC中文版</title>

  <link rel="shortcut icon" type="image/x-icon"
    href="favicon.ico" />

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

  <link rel="stylesheet" href="master.css">
  <script src="index.js"></script>
  <script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?b7f7721ebaa11b23aaf77df0590e7f4a";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();
  </script>
  <script data-ad-client="ca-pub-9129771189441092" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  
</head>
<body>
  <nav class="navbar navbar-expand navbar-light bg-light">
    <a class="navbar-brand" href="index.html">RFC2CN</a>
    <div class="collapse navbar-collapse" id="navbarText">
      <div class="navbar-nav mr-auto">
        <a class="nav-item nav-link" href="about.html">打赏</a>
      </div>
    </div>
  </nav>

  <span id="rfc_number" class="hidden">8102</span>
  <div style="height: 1ex;"></div>
  <div class="jump-to-original-rfc-container">
    <a href="https://datatracker.ietf.org/doc/html/rfc8102">
      <button type="button" class="btn btn-light btn-sm">
        <span class="jump-to-original-rfc">Orig</span>
      </button>
    </a>
  </div>
  <div class="container">
    <div class="row">
      <div id="rfc_header" class="col-sm-12 col-md-12">
        <div class="alert alert-info" role="alert">
          <h1 class="alert-heading">RFC 8102: Remote-LFA Node Protection and Manageability 中文翻译</h1>
          <span class="URL">URL :
            <a href="https://datatracker.ietf.org/doc/html/rfc8102">
              https://datatracker.ietf.org/doc/html/rfc8102
            </a>
          </span><br>
          <span class="title_ja">
            标题 : <strong>RFC 8102</strong></span><br>
          <span class="updated_by">翻译类型 : 自动生成</span><br>
        </div>
      </div>
      <div id="rfc_alert" class="col-sm-12 col-md-12 hidden" role="alert">
        <div class="alert alert-danger">
          <span id="rfc_alert_obsoleted_by"></span>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
Internet Engineering Task Force (IETF)                    P. Sarkar, Ed.
Request for Comments: 8102                                  Arrcus, Inc.
Category: Standards Track                                       S. Hegde
ISSN: 2070-1721                                                C. Bowers
                                                  Juniper Networks, Inc.
                                                              H. Gredler
                                                           RtBrick, Inc.
                                                            S. Litkowski
                                                                  Orange
                                                              March 2017
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
Internet Engineering Task Force (IETF)                    P. Sarkar, Ed.
Request for Comments: 8102                                  Arrcus, Inc.
Category: Standards Track                                       S. Hegde
ISSN: 2070-1721                                                C. Bowers
                                                  Juniper Networks, Inc.
                                                              H. Gredler
                                                           RtBrick, Inc.
                                                            S. Litkowski
                                                                  Orange
                                                              March 2017
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-14">
Remote-LFA Node Protection and Manageability
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-14">
远程LFA节点保护和可管理性
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Abstract
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
摘要
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The loop-free alternates (LFAs) computed following the current remote-LFA specification guarantees only link protection. The resulting remote-LFA next hops (also called &#34;PQ-nodes&#34;) may not guarantee node protection for all destinations being protected by it.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
按照当前远程LFA规范计算的无环交替（LFA）仅保证链路保护。由此产生的远程LFA下一跳（也称为“PQ节点”）可能无法保证对受其保护的所有目的地的节点保护。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document describes an extension to the remote-loop-free-based IP fast reroute mechanisms that specifies procedures for determining whether or not a given PQ-node provides node protection for a specific destination. The document also shows how the same procedure can be utilized for the collection of complete characteristics for alternate paths. Knowledge about the characteristics of all alternate paths is a precursor to applying the operator-defined policy for eliminating paths not fitting the constraints.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本文档描述了基于远程无环路的IP快速重路由机制的扩展，该机制指定了确定给定PQ节点是否为特定目的地提供节点保护的过程。本文件还说明了如何使用相同的程序收集备用路径的完整特征。了解所有备用路径的特征是应用操作员定义的策略消除不符合约束的路径的前提。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Status of This Memo
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
关于下段备忘
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This is an Internet Standards Track document.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
这是一份互联网标准跟踪文件。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document is a product of the Internet Engineering Task Force (IETF). It represents the consensus of the IETF community. It has received public review and has been approved for publication by the Internet Engineering Steering Group (IESG). Further information on Internet Standards is available in Section 2 of RFC 7841.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本文件是互联网工程任务组（IETF）的产品。它代表了IETF社区的共识。它已经接受了公众审查，并已被互联网工程指导小组（IESG）批准出版。有关互联网标准的更多信息，请参见RFC 7841第2节。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Information about the current status of this document, any errata, and how to provide feedback on it may be obtained at http://www.rfc-editor.org/info/rfc8102.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
有关本文件当前状态、任何勘误表以及如何提供反馈的信息，请访问http://www.rfc-editor.org/info/rfc8102.
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Copyright Notice
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
版权公告
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Copyright (c) 2017 IETF Trust and the persons identified as the document authors. All rights reserved.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
版权所有（c）2017 IETF信托基金和确定为文件作者的人员。版权所有。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document is subject to BCP 78 and the IETF Trust&#39;s Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document. Please review these documents carefully, as they describe your rights and restrictions with respect to this document. Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本文件受BCP 78和IETF信托有关IETF文件的法律规定的约束(http://trustee.ietf.org/license-info)自本文件出版之日起生效。请仔细阅读这些文件，因为它们描述了您对本文件的权利和限制。从本文件中提取的代码组件必须包括信托法律条款第4.e节中所述的简化BSD许可证文本，并提供简化BSD许可证中所述的无担保。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Table of Contents
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
目录
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace toc">
   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   4
     1.1.  Abbreviations . . . . . . . . . . . . . . . . . . . . . .   4
     1.2.  Requirements Language . . . . . . . . . . . . . . . . . .   5
   2.  Node Protection with Remote-LFA . . . . . . . . . . . . . . .   5
     2.1.  The Problem . . . . . . . . . . . . . . . . . . . . . . .   5
     2.2.  Additional Definitions  . . . . . . . . . . . . . . . . .   7
       2.2.1.  Link-Protecting Extended P-Space  . . . . . . . . . .   7
       2.2.2.  Node-Protecting Extended P-Space  . . . . . . . . . .   7
       2.2.3.  Q-Space . . . . . . . . . . . . . . . . . . . . . . .   8
       2.2.4.  Link-Protecting PQ-Space  . . . . . . . . . . . . . .   8
       2.2.5.  Candidate Node-Protecting PQ-Space  . . . . . . . . .   8
       2.2.6.  Cost-Based Definitions  . . . . . . . . . . . . . . .   8
         2.2.6.1.  Link-Protecting Extended P-Space  . . . . . . . .   9
         2.2.6.2.  Node-Protecting Extended P-Space  . . . . . . . .   9
         2.2.6.3.  Q-Space . . . . . . . . . . . . . . . . . . . . .  10
     2.3.  Computing Node-Protecting R-LFA Path  . . . . . . . . . .  10
       2.3.1.  Computing Candidate Node-Protecting PQ-Nodes for
               Primary Next Hops . . . . . . . . . . . . . . . . . .  10
       2.3.2.  Computing Node-Protecting Paths from PQ-Nodes to
               Destinations  . . . . . . . . . . . . . . . . . . . .  12
       2.3.3.  Computing Node-Protecting R-LFA Paths for
               Destinations with Multiple Primary Next-Hop Nodes . .  14
       2.3.4.  Limiting Extra Computational Overhead . . . . . . . .  18
   3.  Manageability of Remote-LFA Alternate Paths . . . . . . . . .  19
     3.1.  The Problem . . . . . . . . . . . . . . . . . . . . . . .  19
     3.2.  The Solution  . . . . . . . . . . . . . . . . . . . . . .  20
   4.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .  20
   5.  Security Considerations . . . . . . . . . . . . . . . . . . .  20
   6.  References  . . . . . . . . . . . . . . . . . . . . . . . . .  21
     6.1.  Normative References  . . . . . . . . . . . . . . . . . .  21
     6.2.  Informative References  . . . . . . . . . . . . . . . . .  21
   Acknowledgements  . . . . . . . . . . . . . . . . . . . . . . . .  21
   Authors&#39; Addresses  . . . . . . . . . . . . . . . . . . . . . . .  22
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace toc">
   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   4
     1.1.  Abbreviations . . . . . . . . . . . . . . . . . . . . . .   4
     1.2.  Requirements Language . . . . . . . . . . . . . . . . . .   5
   2.  Node Protection with Remote-LFA . . . . . . . . . . . . . . .   5
     2.1.  The Problem . . . . . . . . . . . . . . . . . . . . . . .   5
     2.2.  Additional Definitions  . . . . . . . . . . . . . . . . .   7
       2.2.1.  Link-Protecting Extended P-Space  . . . . . . . . . .   7
       2.2.2.  Node-Protecting Extended P-Space  . . . . . . . . . .   7
       2.2.3.  Q-Space . . . . . . . . . . . . . . . . . . . . . . .   8
       2.2.4.  Link-Protecting PQ-Space  . . . . . . . . . . . . . .   8
       2.2.5.  Candidate Node-Protecting PQ-Space  . . . . . . . . .   8
       2.2.6.  Cost-Based Definitions  . . . . . . . . . . . . . . .   8
         2.2.6.1.  Link-Protecting Extended P-Space  . . . . . . . .   9
         2.2.6.2.  Node-Protecting Extended P-Space  . . . . . . . .   9
         2.2.6.3.  Q-Space . . . . . . . . . . . . . . . . . . . . .  10
     2.3.  Computing Node-Protecting R-LFA Path  . . . . . . . . . .  10
       2.3.1.  Computing Candidate Node-Protecting PQ-Nodes for
               Primary Next Hops . . . . . . . . . . . . . . . . . .  10
       2.3.2.  Computing Node-Protecting Paths from PQ-Nodes to
               Destinations  . . . . . . . . . . . . . . . . . . . .  12
       2.3.3.  Computing Node-Protecting R-LFA Paths for
               Destinations with Multiple Primary Next-Hop Nodes . .  14
       2.3.4.  Limiting Extra Computational Overhead . . . . . . . .  18
   3.  Manageability of Remote-LFA Alternate Paths . . . . . . . . .  19
     3.1.  The Problem . . . . . . . . . . . . . . . . . . . . . . .  19
     3.2.  The Solution  . . . . . . . . . . . . . . . . . . . . . .  20
   4.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .  20
   5.  Security Considerations . . . . . . . . . . . . . . . . . . .  20
   6.  References  . . . . . . . . . . . . . . . . . . . . . . . . .  21
     6.1.  Normative References  . . . . . . . . . . . . . . . . . .  21
     6.2.  Informative References  . . . . . . . . . . . . . . . . .  21
   Acknowledgements  . . . . . . . . . . . . . . . . . . . . . . . .  21
   Authors&#39; Addresses  . . . . . . . . . . . . . . . . . . . . . . .  22
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
1. Introduction
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
1. 介绍
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Remote-LFA specification [RFC7490] provides loop-free alternates that guarantee only link protection. The resulting remote-LFA alternate next hops (also referred to as the &#34;PQ-nodes&#34;) may not provide node protection for all destinations covered by the same remote-LFA alternate, in case of failure of the primary next-hop node, and it does not provide a means to determine the same.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
远程LFA规范[RFC7490]提供无环路替代方案，仅保证链路保护。在主下一跳节点发生故障的情况下，产生的远程LFA备用下一跳（也称为“PQ节点”）可能不会为同一远程LFA备用覆盖的所有目的地提供节点保护，并且不会提供确定相同目的地的方法。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Also, the LFA Manageability document [RFC7916] requires a computing router to find all possible alternate next hops (including all possible remote-LFA), collect the complete set of path characteristics for each alternate path, run an alternate-selection policy (configured by the operator), and find the best alternate path. This will require that the remote-LFA implementation gathers all the required path characteristics along each link on the entire remote-LFA alternate path.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
此外，LFA可管理性文件[RFC7916]要求计算路由器查找所有可能的备用下一跳（包括所有可能的远程LFA），收集每个备用路径的完整路径特征集，运行备用选择策略（由操作员配置），并找到最佳备用路径。这将要求远程LFA实现沿整个远程LFA备用路径上的每个链路收集所有必需的路径特征。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
With current LFA [RFC5286] and remote-LFA implementations, the forward SPF (and reverse SPF) is run with the computing router and its immediate one-hop routers as the roots. While that enables computation of path attributes (e.g., Shared Risk Link Group (SRLG) and Admin-groups) for the first alternate path segment from the computing router to the PQ-node, there is no means for the computing router to gather any path attributes for the path segment from the PQ-node to the destination. Consequently, any policy-based selection of alternate paths will consider only the path attributes from the computing router up until the PQ-node.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在当前LFA[RFC5286]和远程LFA实现中，正向SPF（和反向SPF）以计算路由器及其直接单跳路由器作为根运行。虽然这允许计算从计算路由器到PQ节点的第一个备用路径段的路径属性（例如，共享风险链路组（SRLG）和管理组），但计算路由器无法收集从PQ节点到目的地的路径段的任何路径属性。因此，任何基于策略的替代路径的选择将只考虑从计算路由器直到PQ节点的路径属性。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document describes a procedure for determining node protection with remote-LFA. The same procedure is also extended for the collection of a complete set of path attributes, enabling more accurate policy-based selection for alternate paths obtained with remote-LFA.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本文档描述了使用远程LFA确定节点保护的过程。同样的过程也被扩展用于收集完整的路径属性集，从而能够对使用远程LFA获得的备用路径进行更精确的基于策略的选择。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
1.1. Abbreviations
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
1.1. 缩写
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document uses the following list of abbreviations:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本文件使用以下缩略语列表：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
LFA: Loop-Free Alternates
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
LFA：无循环交替
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
RLFA or R-LFA: Remote Loop-Free Alternates
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
RLFA或R-LFA：远程无环路交替
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
ECMP: Equal-Cost Multiple Path
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
ECMP：等成本多路径
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
SPF: Shortest Path First graph computations
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
SPF：最短路径优先图计算
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
NH: Next-Hop node
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
NH：下一跳节点
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
1.2. Requirements Language
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
1.2. 需求语言
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The key words &#34;MUST&#34;, &#34;MUST NOT&#34;, &#34;REQUIRED&#34;, &#34;SHALL&#34;, &#34;SHALL NOT&#34;, &#34;SHOULD&#34;, &#34;SHOULD NOT&#34;, &#34;RECOMMENDED&#34;, &#34;MAY&#34;, and &#34;OPTIONAL&#34; in this document are to be interpreted as described in RFC 2119 [RFC2119].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本文件中的关键词“必须”、“不得”、“要求”、“应”、“不应”、“应”、“不应”、“建议”、“可”和“可选”应按照RFC 2119[RFC2119]中所述进行解释。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2. Node Protection with Remote-LFA
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2. 远程LFA节点保护
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Node protection is required to provide protection of traffic on a given forwarding node against the failure of the first-hop node on the primary forwarding path. Such protection becomes more critical in the absence of mechanisms like non-stop routing in the network. Certain operators refrain from deploying non-stop-routing in their network, due to the required complex state synchronization between redundant control plane hardwares it requires, and the significant additional computation and performance overheads it comes along with. In such cases, node protection is essential to guarantee uninterrupted flow of traffic, even in the case of an entire forwarding node going down.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
需要节点保护来针对主转发路径上的第一跳节点的故障提供给定转发节点上的流量保护。在网络中缺少不间断路由等机制的情况下，这种保护变得更加重要。由于冗余控制平面硬件之间需要复杂的状态同步，以及随之而来的大量额外计算和性能开销，某些运营商避免在其网络中部署不间断路由。在这种情况下，即使在整个转发节点停机的情况下，节点保护对于保证不间断的通信流也是至关重要的。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The following sections discuss the node-protection problem in the context of remote-LFA and propose a solution.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
以下各节讨论远程LFA环境中的节点保护问题，并提出解决方案。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.1. The Problem
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.1. 问题
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
To better illustrate the problem and the solution proposed in this document, the following topology diagram from the remote-LFA document [RFC7490] is being re-used with slight modification.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
为了更好地说明本文件中提出的问题和解决方案，对远程LFA文档[RFC7490]中的以下拓扑图进行了轻微修改，然后重新使用。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
                                             D1
                                            /
                                       S-x-E
                                      /     \
                                     N       R3--D2
                                      \     /
                                      R1---R2
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
                                             D1
                                            /
                                       S-x-E
                                      /     \
                                     N       R3--D2
                                      \     /
                                      R1---R2
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-27">
Figure 1: Topology 1
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-27">
图1：拓扑1
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In the above topology, for all (non-ECMP) destinations reachable via the S-E link, there is no standard LFA alternate. As per the remote-LFA [RFC7490] alternate specifications, node R2 being the only PQ-node for the S-E link provides the next hop for all of the above destinations. Table 1 shows all possible primary and remote-LFA alternate paths for each destination.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在上述拓扑中，对于通过S-E链路可到达的所有（非ECMP）目的地，没有标准LFA备用。根据远程LFA[RFC7490]替代规范，节点R2是S-E链路的唯一PQ节点，为上述所有目的地提供下一跳。表1显示了每个目的地的所有可能的主要和远程LFA备用路径。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
    +-------------+--------------+---------+-------------------------+
    | Destination | Primary Path | PQ-node | Remote-LFA Backup Path  |
    +-------------+--------------+---------+-------------------------+
    | R3          | S-&gt;E-&gt;R3     | R2      | S=&gt;N=&gt;R1=&gt;R2-&gt;R3        |
    | E           | S-&gt;E         | R2      | S=&gt;N=&gt;R1=&gt;R2-&gt;R3-&gt;E     |
    | D1          | S-&gt;E-&gt;D1     | R2      | S=&gt;N=&gt;R1=&gt;R2-&gt;R3-&gt;E-&gt;D1 |
    | D2          | S-&gt;E-&gt;R3-&gt;D2 | R2      | S=&gt;N=&gt;R1=&gt;R2-&gt;R3-&gt;D2    |
    +-------------+--------------+---------+-------------------------+
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
    +-------------+--------------+---------+-------------------------+
    | Destination | Primary Path | PQ-node | Remote-LFA Backup Path  |
    +-------------+--------------+---------+-------------------------+
    | R3          | S-&gt;E-&gt;R3     | R2      | S=&gt;N=&gt;R1=&gt;R2-&gt;R3        |
    | E           | S-&gt;E         | R2      | S=&gt;N=&gt;R1=&gt;R2-&gt;R3-&gt;E     |
    | D1          | S-&gt;E-&gt;D1     | R2      | S=&gt;N=&gt;R1=&gt;R2-&gt;R3-&gt;E-&gt;D1 |
    | D2          | S-&gt;E-&gt;R3-&gt;D2 | R2      | S=&gt;N=&gt;R1=&gt;R2-&gt;R3-&gt;D2    |
    +-------------+--------------+---------+-------------------------+
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-14">
Table 1: Remote-LFA Backup Paths via PQ-Node R2
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-14">
表1：通过PQ节点R2的远程LFA备份路径
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A closer look at Table 1 shows that, while the PQ-node R2 provides link protection for all the destinations, it does not provide node protection for destinations E and D1. In the event of the node-failure on primary next hop E, the alternate path from the remote-LFA next hop R2 to E and D1 also becomes unavailable. So, for a remote-LFA next hop to provide node protection for a given destination, the shortest path from the given PQ-node to the given destination MUST NOT traverse the primary next hop.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
仔细查看表1可以看出，虽然PQ节点R2为所有目的地提供链路保护，但它不为目的地E和D1提供节点保护。如果主下一跳E上的节点发生故障，则从远程LFA下一跳R2到E和D1的备用路径也变得不可用。因此，对于为给定目的地提供节点保护的远程LFA下一跳，从给定PQ节点到给定目的地的最短路径不得穿过主下一跳。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In another extension of the topology in Figure 1, let us consider an additional link between N and E with the same cost as the other links.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在图1中的拓扑的另一个扩展中，让我们考虑N和E之间的附加链路，其代价与其他链路相同。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
                                             D1
                                            /
                                       S-x-E
                                      /   / \
                                     N---+   R3--D2
                                      \     /
                                      R1---R2
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
                                             D1
                                            /
                                       S-x-E
                                      /   / \
                                     N---+   R3--D2
                                      \     /
                                      R1---R2
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-27">
Figure 2: Topology 2
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-27">
图2：拓扑图2
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In the above topology, the S-E link is no longer on any of the shortest paths from N to R3, E, and D1. Hence, R3, E, and D1 are also included in both the extended P-space and the Q-space of E (with respect to the S-E link). Table 2 shows all possible primary and R-LFA alternate paths via PQ-node R3 for each destination reachable through the S-E link in the above topology. The R-LFA alternate paths via PQ-node R2 remain the same as in Table 1.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在上述拓扑中，S-E链路不再位于从N到R3、E和D1的任何最短路径上。因此，R3、E和D1也包括在E的扩展P空间和Q空间中（关于S-E链路）。表2显示了通过上述拓扑中的S-E链路可到达的每个目的地的所有可能的主要路径和R-LFA备用路径，这些路径通过PQ节点R3。通过PQ节点R2的R-LFA备用路径与表1中的相同。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
     +-------------+--------------+---------+------------------------+
     | Destination | Primary Path | PQ-node | Remote-LFA Backup Path |
     +-------------+--------------+---------+------------------------+
     | R3          | S-&gt;E-&gt;R3     | R3      | S=&gt;N=&gt;E=&gt;R3            |
     | E           | S-&gt;E         | R3      | S=&gt;N=&gt;E=&gt;R3-&gt;E         |
     | D1          | S-&gt;E-&gt;D1     | R3      | S=&gt;N=&gt;E=&gt;R3-&gt;E-&gt;D1     |
     | D2          | S-&gt;E-&gt;R3-&gt;D2 | R3      | S=&gt;N=&gt;E=&gt;R3-&gt;D2        |
     +-------------+--------------+---------+------------------------+
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
     +-------------+--------------+---------+------------------------+
     | Destination | Primary Path | PQ-node | Remote-LFA Backup Path |
     +-------------+--------------+---------+------------------------+
     | R3          | S-&gt;E-&gt;R3     | R3      | S=&gt;N=&gt;E=&gt;R3            |
     | E           | S-&gt;E         | R3      | S=&gt;N=&gt;E=&gt;R3-&gt;E         |
     | D1          | S-&gt;E-&gt;D1     | R3      | S=&gt;N=&gt;E=&gt;R3-&gt;E-&gt;D1     |
     | D2          | S-&gt;E-&gt;R3-&gt;D2 | R3      | S=&gt;N=&gt;E=&gt;R3-&gt;D2        |
     +-------------+--------------+---------+------------------------+
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-14">
Table 2: Remote-LFA Backup Paths via PQ-Node R3
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-14">
表2：通过PQ节点R3的远程LFA备份路径
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Again, a closer look at Table 2 shows that, unlike Table 1 where the single PQ-node R2 provided node protection for destinations R3 and D2, if we choose R3 as the R-LFA next hop, it no longer provides node protection for R3 and D2. If S chooses R3 as the R-LFA next hop and if there is a node-failure on primary next hop E, then one of the parallel ECMP paths between N and R3 also becomes unavailable on the alternate path from S to R-LFA next hop R3. So, for a remote-LFA next hop to provide node protection for a given destination, the shortest paths from S to the chosen PQ-node MUST NOT traverse the primary next-hop node.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
再次，仔细查看表2可以发现，与表1中单个PQ节点R2为目的地R3和D2提供节点保护不同，如果我们选择R3作为R-LFA下一跳，它将不再为R3和D2提供节点保护。如果S选择R3作为R-LFA下一跳，并且如果主下一跳E上存在节点故障，则N和R3之间的并行ECMP路径之一在从S到R-LFA下一跳R3的备用路径上也变得不可用。因此，对于为给定目的地提供节点保护的远程LFA下一跳，从S到所选PQ节点的最短路径不得穿过主下一跳节点。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.2. Additional Definitions
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.2. 附加定义
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document adds and enhances the following definitions, extending the ones mentioned in the Remote-LFA specification [RFC7490].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本文档添加并增强了以下定义，扩展了远程LFA规范[RFC7490]中提到的定义。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.2.1. Link-Protecting Extended P-Space
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.2.1. 链路保护扩展P-空间
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Remote-LFA specification [RFC7490] already defines this. The link-protecting extended P-space for a link S-E being protected is the set of routers that are reachable from one or more direct neighbors of S, except primary node E, without traversing the S-E link on any of the shortest paths from the direct neighbor to the router. This MUST exclude any direct neighbor for which there is at least one ECMP path from the direct neighbor traversing the link (S-E) being protected.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
远程LFA规范[RFC7490]已经定义了这一点。被保护链路S-E的链路保护扩展P空间是可从S的一个或多个直接邻居（主节点E除外）访问的路由器集，而无需在从直接邻居到路由器的任何最短路径上遍历S-E链路。这必须从穿越被保护链路（S-E）的直接邻居中排除至少有一条ECMP路径的任何直接邻居。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
For a cost-based definition for link-protecting extended P-space, refer to Section 2.2.6.1.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
有关链路保护扩展P空间的基于成本的定义，请参阅第2.2.6.1节。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.2.2. Node-Protecting Extended P-Space
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.2.2. 节点保护扩展P空间
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The node-protecting extended P-space for a primary next-hop node E being protected is the set of routers that are reachable from one or more direct neighbors of S, except primary node E, without traversing node E. This MUST exclude any direct neighbors for which there is at
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
为受保护的主下一跳节点E保护扩展P空间的节点是从S的一个或多个直接邻居（主节点E除外）可以访问的路由器集，而不需要遍历节点E。这必须排除任何直接邻居，其中至少有
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
least one ECMP path from the direct neighbor traversing the node E being protected.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
来自穿过受保护节点E的直接邻居的至少一条ECMP路径。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
For a cost-based definition for node-protecting extended P-space, refer to Section 2.2.6.2.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
有关保护扩展P空间的节点的基于成本的定义，请参阅第2.2.6.2节。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.2.3. Q-Space
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.2.3. Q空间
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Remote-LFA document [RFC7490] already defines this. The Q-space for a link S-E being protected is the set of nodes that can reach primary node E, without traversing the S-E link on any of the shortest paths from the node itself to primary next hop E. This MUST exclude any node for which there is at least one ECMP path from the node to the primary next hop E traversing the link (S-E) being protected.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
远程LFA文档[RFC7490]已经定义了这一点。受保护链路S-E的Q空间是可以到达主节点E的节点集，而无需在从节点本身到主下一跳E的任何最短路径上遍历S-E链路。这必须排除从节点到主下一跳E至少有一条ECMP路径遍历链路（S-E）的任何节点受到保护。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
For a cost-based definition for Q-Space, refer to Section 2.2.6.3.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
有关Q空间的基于成本的定义，请参阅第2.2.6.3节。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.2.4. Link-Protecting PQ-Space
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.2.4. 链路保护PQ空间
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A node Y is in a link-protecting PQ-space with respect to the link (S-E) being protected if and only if Y is present in both link-protecting extended P-space and the Q-space for the link being protected.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
当且仅当Y同时存在于链路保护扩展P空间和被保护链路的Q空间中时，节点Y相对于被保护链路（S-E）处于链路保护PQ空间中。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.2.5. Candidate Node-Protecting PQ-Space
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.2.5. 候选节点保护PQ空间
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A node Y is in a candidate node-protecting PQ-space with respect to the node (E) being protected if and only if Y is present in both the node-protecting extended P-space and the Q-space for the link being protected.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
当且仅当Y存在于保护扩展P空间的节点和被保护链路的Q空间中时，节点Y位于相对于被保护节点（E）保护PQ空间的候选节点中。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Please note that a node Y being in a candidate node-protecting PQ-space does not guarantee that the R-LFA alternate path via the same, in entirety, is unaffected in the event of a node failure of primary next-hop node E. It only guarantees that the path segment from S to PQ-node Y is unaffected by the same failure event. The PQ-nodes in the candidate node-protecting PQ-space may provide node protection for only a subset of destinations that are reachable through the corresponding primary link.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
请注意，处于保护PQ空间的候选节点中的节点Y不能保证在主下一跳节点E发生节点故障时，通过相同节点的R-LFA备用路径整体不受影响。它只能保证从S到PQ节点Y的路径段不受相同故障事件的影响。保护PQ空间的候选节点中的PQ节点可以仅为可通过相应的主链路到达的目的地子集提供节点保护。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.2.6. Cost-Based Definitions
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.2.6. 基于成本的定义
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This section provides cost-based definitions for some of the terms introduced in Section 2.2 of this document.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本节为本文件第2.2节中介绍的一些术语提供了基于成本的定义。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.2.6.1. Link-Protecting Extended P-Space
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.2.6.1. 链路保护扩展P-空间
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Please refer to Section 2.2.1 for a formal definition of link-protecting extended P-space.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
关于链路保护扩展P空间的正式定义，请参考第2.2.1节。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A node Y is in a link-protecting extended P-space with respect to the link (S-E) being protected if and only if there exists at least one direct neighbor of S (Ni) other than primary next hop E that satisfies the following condition.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
当且仅当除了主下一跳E之外存在至少一个S（Ni）的直接邻居满足以下条件时，节点Y处于相对于被保护的链路（S-E）的链路保护扩展P空间中。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   D_opt(Ni,Y) &lt; D_opt(Ni,S) + D_opt(S,Y)
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   D_opt(Ni,Y) &lt; D_opt(Ni,S) + D_opt(S,Y)
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Where, D_opt(A,B) : Distance on the most optimum path from A to B. Ni : A direct neighbor of S other than primary next hop E. Y : The node being evaluated for link-protecting extended P-Space.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
其中，D_opt（A，B）：从A到B的最佳路径上的距离。Ni：S的直接邻居，而不是主下一跳E。Y：被评估用于链路保护扩展P空间的节点。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-14">
Figure 3: Link-Protecting Ext-P-Space Condition
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-14">
图3：链路保护Ext-P-Space条件
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.2.6.2. Node-Protecting Extended P-Space
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.2.6.2. 节点保护扩展P空间
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Please refer to Section 2.2.2 for a formal definition of node-protecting extended P-space.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
关于节点保护扩展P空间的正式定义，请参考第2.2.2节。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A node Y is in a node-protecting extended P-space with respect to the node E being protected if and only if there exists at least one direct neighbor of S (Ni) other than primary next hop E, that satisfies the following condition.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
当且仅当除了主下一跳E之外存在至少一个S（Ni）的直接邻居且满足以下条件时，节点Y处于相对于被保护的节点E保护扩展P空间的节点中。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   D_opt(Ni,Y) &lt; D_opt(Ni,E) + D_opt(E,Y)
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   D_opt(Ni,Y) &lt; D_opt(Ni,E) + D_opt(E,Y)
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Where, D_opt(A,B) : Distance on the most optimum path from A to B. E : The primary next hop on the shortest path from S to destination. Ni : A direct neighbor of S other than primary next hop E. Y : The node being evaluated for node-protecting extended P-Space.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
式中，D_opt（A，B）：从A到B的最佳路径上的距离。E：从S到目的地的最短路径上的主要下一跳。Ni：S的直接邻居，而不是主下一跳E.Y：被评估用于保护扩展P空间的节点。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-14">
Figure 4: Node-Protecting Ext-P-Space Condition
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-14">
图4：节点保护Ext-P-Space条件
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Please note that a node Y satisfying the condition in Figure 4 above only guarantees that the R-LFA alternate path segment from S via direct neighbor Ni to the node Y is not affected in the event of a node failure of E. It does not yet guarantee that the path segment
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
请注意，满足上述图4中条件的节点Y仅保证在节点E发生故障时，从S经由直接邻居Ni到节点Y的R-LFA备用路径段不受影响。它还不能保证路径段
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
from node Y to the destination is also unaffected by the same failure event.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
从节点Y到目标也不受相同故障事件的影响。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.2.6.3. Q-Space
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.2.6.3. Q空间
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Please refer to Section 2.2.3 for a formal definition of Q-Space.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
有关Q空间的正式定义，请参考第2.2.3节。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A node Y is in Q-space with respect to the link (S-E) being protected if and only if the following condition is satisfied:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
当且仅当满足以下条件时，节点Y相对于被保护的链路（S-E）在Q空间中：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   D_opt(Y,E) &lt; D_opt(S,E) + D_opt(Y,S)
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   D_opt(Y,E) &lt; D_opt(S,E) + D_opt(Y,S)
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Where, D_opt(A,B) : Distance on the most optimum path from A to B. E : The primary next hop on the shortest path from S to destination. Y : The node being evaluated for Q-Space.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
式中，D_opt（A，B）：从A到B的最佳路径上的距离。E：从S到目的地的最短路径上的主要下一跳。Y：为Q空间求值的节点。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-24">
Figure 5: Q-Space Condition
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-24">
图5:Q空间条件
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.3. Computing Node-Protecting R-LFA Path
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.3. 计算节点保护R-LFA路径
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The R-LFA alternate path through a given PQ-node to a given destination is comprised of two path segments as follows:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
通过给定PQ节点到给定目的地的R-LFA备用路径由以下两个路径段组成：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1. Path segment from the computing router to the PQ-node (Remote-LFA alternate next hop), and
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1. 从计算路由器到PQ节点的路径段（远程LFA备用下一跳），以及
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2. Path segment from the PQ-node to the destination being protected.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2. 从PQ节点到受保护目标的路径段。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
So, to ensure that an R-LFA alternate path for a given destination provides node protection, we need to ensure that none of the above path segments are affected in the event of failure of the primary next-hop node. Sections 2.3.1 and 2.3.2 show how this can be ensured.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
因此，为了确保给定目的地的R-LFA备用路径提供节点保护，我们需要确保在主下一跳节点发生故障时，上述路径段均不受影响。第2.3.1节和第2.3.2节说明了如何确保这一点。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
2.3.1. Computing Candidate Node-Protecting PQ-Nodes for Primary Next Hops
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
2.3.1. 为主下一跳计算候选节点保护PQ节点
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
To choose a node-protecting R-LFA next hop for a destination R3, router S needs to consider a PQ-node from the candidate node-protecting PQ-space for the primary next hop E on the shortest path from S to R3. As mentioned in Section 2.2.2, to consider a PQ-node as a candidate node-protecting PQ-node, there must be at least one direct neighbor Ni of S, such that all shortest paths from Ni to the PQ-node do not traverse primary next-hop node E.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
为了选择用于目的地R3的节点保护R-LFA下一跳，路由器S需要考虑从候选节点的PQ节点保护PQ空间，以便从S到R3的最短路径上的主下一跳E。如2.2.2节所述，为了考虑PQ节点作为保护PQ节点的候选节点，必须至少有一个S的直接邻居Ni，使得从Ni到PQ节点的所有最短路径不穿越主下一跳节点E。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Implementations SHOULD run the inequality in Section 2.2.6.2, Figure 4 for all direct neighbors, other than primary next-hop node E, to determine whether a node Y is a candidate node-protecting PQ-node. All of the metrics needed by this inequality would have been already collected from the forward SPFs rooted at each of direct neighbor S, computed as part of standard LFA [RFC5286] implementation. With reference to the topology in Figure 2, Table 3 shows how the above condition can be used to determine the candidate node-protecting PQ-space for S-E link (primary next hop E).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
实现应针对除主下一跳节点E以外的所有直接邻居运行第2.2.6.2节图4中的不等式，以确定节点Y是否为保护PQ节点的候选节点。该不等式所需的所有度量都已经从每个直接邻居的前向SPF中收集，作为标准LFA[RFC5286]实现的一部分进行计算。参考图2中的拓扑，表3显示了如何使用上述条件来确定为S-E链路（主下一跳E）保护PQ空间的候选节点。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   +------------+----------+----------+----------+---------+-----------+
   | Candidate  |  Direct  |  D_opt   |  D_opt   |  D_opt  | Condition |
   |  PQ-node   | Nbr (Ni) |  (Ni,Y)  |  (Ni,E)  |  (E,Y)  |    Met    |
   |    (Y)     |          |          |          |         |           |
   +------------+----------+----------+----------+---------+-----------+
   |     R2     |    N     | 2 (N,R2) | 1 (N,E)  |    2    |    Yes    |
   |            |          |          |          |  (E,R2) |           |
   |     R3     |    N     | 2 (N,R3) | 1 (N,E)  |    1    |     No    |
   |            |          |          |          |  (E,R3) |           |
   +------------+----------+----------+----------+---------+-----------+
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   +------------+----------+----------+----------+---------+-----------+
   | Candidate  |  Direct  |  D_opt   |  D_opt   |  D_opt  | Condition |
   |  PQ-node   | Nbr (Ni) |  (Ni,Y)  |  (Ni,E)  |  (E,Y)  |    Met    |
   |    (Y)     |          |          |          |         |           |
   +------------+----------+----------+----------+---------+-----------+
   |     R2     |    N     | 2 (N,R2) | 1 (N,E)  |    2    |    Yes    |
   |            |          |          |          |  (E,R2) |           |
   |     R3     |    N     | 2 (N,R3) | 1 (N,E)  |    1    |     No    |
   |            |          |          |          |  (E,R3) |           |
   +------------+----------+----------+----------+---------+-----------+
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-4">
Table 3: Node-Protection Evaluation for R-LFA Repair Tunnel to PQ-Node
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-4">
表3：R-LFA维修隧道至PQ节点的节点保护评估
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
As seen in the above Table 3, R3 does not meet the node-protecting extended p-space inequality; so, while R2 is in candidate node-protecting PQ-space, R3 is not.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
如上表3所示，R3不满足节点保护扩展p-空间不等式；因此，当R2在候选节点保护PQ空间时，R3不是。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Some SPF implementations may also produce a list of links and nodes traversed on the shortest path(s) from a given root to others. In such implementations, router S may have executed a forward SPF with each of its direct neighbors as the SPF root, executed as part of the standard LFA computations [RFC5286]. So, S may re-use the list of links and nodes collected from the same SPF computations to decide whether or not a node Y is a candidate node-protecting PQ-node. A node Y shall be considered as a node-protecting PQ-node if and only if there is at least one direct neighbor of S, other than the primary next hop E for which the primary next-hop node E does not exist on the list of nodes traversed on any of the shortest paths from the direct neighbor to the PQ-node. Table 4 is an illustration of the mechanism with the topology in Figure 2.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
一些SPF实现还可能生成从给定根到其他根的最短路径上经过的链接和节点列表。在这样的实现中，路由器S可能已经执行了转发SPF，其每个直接邻居作为SPF根，作为标准LFA计算的一部分执行[RFC5286]。因此，S可以重新使用从相同SPF计算收集的链路和节点的列表来确定节点Y是否是保护PQ节点的候选节点。当且仅当存在至少一个S的直接邻居时，节点Y应被视为保护PQ节点，但主下一跳E除外，其主下一跳节点E在从直接邻居到PQ节点的任何最短路径上遍历的节点列表中不存在。表4是具有图2中拓扑结构的机构的图示。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   +-------------+---------------------------+------------+------------+
   | Candidate   | Repair Tunnel Path        | Link       | Node       |
   | PQ-node     | (Repairing router to PQ-  | Protection | Protection |
   |             | node)                     |            |            |
   +-------------+---------------------------+------------+------------+
   | R2          | S-&gt;N-&gt;R1-&gt;R2              | Yes        | Yes        |
   | R2          | S-&gt;E-&gt;R3-&gt;R2              | No         | No         |
   | R3          | S-&gt;N-&gt;E-&gt;R3               | Yes        | No         |
   +-------------+---------------------------+------------+------------+
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   +-------------+---------------------------+------------+------------+
   | Candidate   | Repair Tunnel Path        | Link       | Node       |
   | PQ-node     | (Repairing router to PQ-  | Protection | Protection |
   |             | node)                     |            |            |
   +-------------+---------------------------+------------+------------+
   | R2          | S-&gt;N-&gt;R1-&gt;R2              | Yes        | Yes        |
   | R2          | S-&gt;E-&gt;R3-&gt;R2              | No         | No         |
   | R3          | S-&gt;N-&gt;E-&gt;R3               | Yes        | No         |
   +-------------+---------------------------+------------+------------+
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-10">
Table 4: Protection of Remote-LFA Tunnel to the PQ-Node
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-10">
表4：至PQ节点的远程LFA隧道保护
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
As seen in the above Table 4, while R2 is a candidate node-protecting remote-LFA next hop for R3 and D2, it is not so for E and D1, since the primary next hop E is on the shortest path from R2 to E and D1.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
如上表4所示，虽然R2是保护R3和D2的远程LFA下一跳的候选节点，但E和D1并非如此，因为主下一跳E位于从R2到E和D1的最短路径上。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.3.2. Computing Node-Protecting Paths from PQ-Nodes to Destinations
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.3.2. 计算从PQ节点到目的地的节点保护路径
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Once a computing router finds all the candidate node-protecting PQ-nodes for a given directly attached primary link, it shall follow the procedure as proposed in this section to choose one or more node-protecting R-LFA paths for destinations reachable through the same primary link in the primary SPF graph.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
一旦计算路由器为给定的直接连接主链路找到所有保护PQ节点的候选节点，它应按照本节中提出的程序，为通过主SPF图中相同主链路可到达的目的地选择一个或多个保护R-LFA路径的节点。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
To find a node-protecting R-LFA path for a given destination, the computing router needs to pick a subset of PQ-nodes from the candidate node-protecting PQ-space for the corresponding primary next hop, such that all the path(s) from the PQ-node(s) to the given destination remain unaffected in the event of a node failure of the primary next-hop node. To determine whether a given PQ-node belongs to such a subset of PQ-nodes, the computing router MUST ensure that none of the primary next-hop nodes are found on any of the shortest paths from the PQ-node to the given destination.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
为了找到保护给定目的地的R-LFA路径的节点，计算路由器需要从保护PQ空间的候选节点中为相应的主下一跳选择PQ节点的子集，以便所有来自PQ节点的路径在主下一跳节点发生节点故障的情况下，发送到给定目的地的消息不受影响。为了确定给定的PQ节点是否属于这样的PQ节点子集，计算路由器必须确保在从PQ节点到给定目的地的任何最短路径上都找不到主下一跳节点。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document proposes an additional forward SPF computation for each of the PQ-nodes to discover all shortest paths from the PQ-nodes to the destination. This will help determine whether or not a given primary next-hop node is on the shortest paths from the PQ-node to the given destination. To determine whether or not a given candidate node-protecting PQ-node provides node-protecting alternate for a given destination, all the shortest paths from the PQ-node to the given destination have to be inspected to check if the primary next-hop node is found on any of these shortest paths. To compute all the shortest paths from a candidate node-protecting PQ-node to one or more destinations, the computing router MUST run the forward SPF on the candidate node-protecting PQ-node. Soon after running the forward SPF, the computer router SHOULD run the inequality in Figure 6 below, once for each destination. A PQ-node that does not
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本文件建议为每个PQ节点进行额外的前向SPF计算，以发现从PQ节点到目的地的所有最短路径。这将有助于确定给定的主下一跳节点是否位于从PQ节点到给定目的地的最短路径上。为了确定保护PQ节点的给定候选节点是否为给定目的地提供节点保护备用，必须检查从PQ节点到给定目的地的所有最短路径，以检查是否在这些最短路径中的任何一条上找到主下一跳节点。为了计算从保护PQ节点的候选节点到一个或多个目的地的所有最短路径，计算路由器必须在保护PQ节点的候选节点上运行前向SPF。在运行前向SPF后不久，计算机路由器应该为每个目的地运行下图6中的不等式。一个不存在的PQ节点
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
qualify the condition for a given destination does not guarantee node protection for the path segment from the PQ-node to the specific destination.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
限定给定目的地的条件不能保证从PQ节点到特定目的地的路径段的节点保护。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   D_opt(Y,D) &lt; D_opt(Y,E) + Distance_opt(E,D)
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   D_opt(Y,D) &lt; D_opt(Y,E) + Distance_opt(E,D)
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Where, D_opt(A,B) : Distance on the most optimum path from A to B. D : The destination node. E : The primary next hop on the shortest path from S to destination. Y : The node-protecting PQ-node being evaluated
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
其中，D_opt（A，B）：从A到B的最佳路径上的距离。D：目标节点。E：从S到目的地的最短路径上的主要下一跳。Y：保护正在评估的PQ节点的节点
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
Figure 6: Node-Protecting Condition for PQ-Node to Destination
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
图6:PQ节点到目的地的节点保护条件
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
All of the above metric costs, except D_opt(Y, D), can be obtained with forward and reverse SPFs with E (the primary next hop) as the root, run as part of the regular LFA and remote-LFA implementation. The Distance_opt(Y, D) metric can only be determined by the additional forward SPF run with PQ-node Y as the root. With reference to the topology in Figure 2, Table 5 shows that the above condition can be used to determine node protection with a node-protecting PQ-node R2.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
除了D_opt（Y，D）之外，上述所有度量成本都可以通过以E（主下一跳）为根的正向和反向spf获得，作为常规LFA和远程LFA实现的一部分运行。距离_opt（Y，D）度量只能通过PQ节点Y作为根的附加正向SPF运行来确定。参考图2中的拓扑结构，表5显示了上述条件可用于通过保护PQ节点R2的节点确定节点保护。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   +-------------+------------+---------+--------+---------+-----------+
   | Destination | Primary-NH |  D_opt  | D_opt  |  D_opt  | Condition |
   |     (D)     |    (E)     |  (Y, D) | (Y, E) |  (E, D) |    Met    |
   +-------------+------------+---------+--------+---------+-----------+
   |      R3     |     E      |    1    |   2    |    1    |    Yes    |
   |             |            | (R2,R3) | (R2,E) |  (E,R3) |           |
   |      E      |     E      |    2    |   2    | 0 (E,E) |     No    |
   |             |            |  (R2,E) | (R2,E) |         |           |
   |      D1     |     E      |    3    |   2    |    1    |     No    |
   |             |            | (R2,D1) | (R2,E) |  (E,D1) |           |
   |      D2     |     E      |    2    |   2    |    1    |    Yes    |
   |             |            | (R2,D2) | (R2,E) |  (E,D2) |           |
   +-------------+------------+---------+--------+---------+-----------+
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   +-------------+------------+---------+--------+---------+-----------+
   | Destination | Primary-NH |  D_opt  | D_opt  |  D_opt  | Condition |
   |     (D)     |    (E)     |  (Y, D) | (Y, E) |  (E, D) |    Met    |
   +-------------+------------+---------+--------+---------+-----------+
   |      R3     |     E      |    1    |   2    |    1    |    Yes    |
   |             |            | (R2,R3) | (R2,E) |  (E,R3) |           |
   |      E      |     E      |    2    |   2    | 0 (E,E) |     No    |
   |             |            |  (R2,E) | (R2,E) |         |           |
   |      D1     |     E      |    3    |   2    |    1    |     No    |
   |             |            | (R2,D1) | (R2,E) |  (E,D1) |           |
   |      D2     |     E      |    2    |   2    |    1    |    Yes    |
   |             |            | (R2,D2) | (R2,E) |  (E,D2) |           |
   +-------------+------------+---------+--------+---------+-----------+
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-4">
Table 5: Node-Protection Evaluation for R-LFA Path Segment between PQ-Node and Destination
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-4">
表5：PQ节点与目的地之间R-LFA路径段的节点保护评估
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
As seen in the example above, R2 does not meet the node-protecting inequality for destination E and D1. And so, once again, while R2 is a node-protecting remote-LFA next hop for R3 and D2, it is not so for E and D1.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
如上例所示，R2不满足目的地E和D1的节点保护不等式。因此，再一次，虽然R2是保护R3和D2的远程LFA下一跳的节点，但E和D1并非如此。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In SPF implementations that also produce a list of links and nodes traversed on the shortest path(s) from a given root to others, the inequality in Figure 6 above need not be evaluated. Instead, to determine whether or not a PQ-node provides node protection for a given destination, the list of nodes computed from forward SPF that run on the PQ-node for the given destination SHOULD be inspected. In case the list contains the primary next-hop node, the PQ-node does not provide node protection. Else, the PQ-node guarantees the node-protecting alternate for the given destination. Below is an illustration of the mechanism with candidate node-protecting PQ-node R2 in the topology in Figure 2.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在SPF实现中，也会生成从给定根到其他根的最短路径上经过的链接和节点列表，不需要评估上面图6中的不等式。相反，为了确定PQ节点是否为给定目的地提供节点保护，应检查根据在PQ节点上为给定目的地运行的前向SPF计算的节点列表。如果列表包含主下一跳节点，则PQ节点不提供节点保护。否则，PQ节点保证为给定目的地保护备用节点。下面是图2中拓扑中候选节点保护PQ节点R2的机制的示例。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   +-------------+---------------------------+------------+------------+
   | Destination | Shortest Path (Repairing  | Link       | Node       |
   |             | router to PQ-node)        | Protection | Protection |
   +-------------+---------------------------+------------+------------+
   | R3          | R2-&gt;R3                    | Yes        | Yes        |
   | E           | R2-&gt;R3-&gt;E                 | Yes        | No         |
   | D1          | R2-&gt;R3-&gt;E-&gt;D1             | Yes        | No         |
   | D2          | R2-&gt;R3-&gt;D2                | Yes        | Yes        |
   +-------------+---------------------------+------------+------------+
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   +-------------+---------------------------+------------+------------+
   | Destination | Shortest Path (Repairing  | Link       | Node       |
   |             | router to PQ-node)        | Protection | Protection |
   +-------------+---------------------------+------------+------------+
   | R3          | R2-&gt;R3                    | Yes        | Yes        |
   | E           | R2-&gt;R3-&gt;E                 | Yes        | No         |
   | D1          | R2-&gt;R3-&gt;E-&gt;D1             | Yes        | No         |
   | D2          | R2-&gt;R3-&gt;D2                | Yes        | Yes        |
   +-------------+---------------------------+------------+------------+
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-8">
Table 6: Protection of Remote-LFA Path between PQ-node and Destination
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-8">
表6:PQ节点与目的地之间的远程LFA路径保护
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
As seen in the above example, while R2 is a candidate node-protecting R-LFA next hop for R3 and D2, it is not so for E and D1, since the primary next hop E is on the shortest path from R2 to E and D1.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
如上例所示，虽然R2是保护R3和D2的R-LFA下一跳的候选节点，但E和D1并非如此，因为主下一跳E位于从R2到E和D1的最短路径上。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The procedure described in this document helps no more than to determine whether or not a given remote-LFA alternate provides node protection for a given destination. It does not find out any new remote-LFA alternate next hops, outside the ones already computed by the standard remote-LFA procedure. However, in the case of availability of more than one PQ-node (remote-LFA alternates) for a destination where node protection is required for the given primary next hop, this procedure will eliminate the PQ-nodes that do not provide node protection and choose only the ones that do.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本文档中描述的过程仅用于确定给定的远程LFA备选方案是否为给定的目的地提供节点保护。它没有发现任何新的远程LFA备用下一跳，超出了标准远程LFA程序已经计算的跳数。但是，如果一个目的地的多个PQ节点（远程LFA备用）可用，且给定的主下一跳需要节点保护，则此过程将消除不提供节点保护的PQ节点，并仅选择提供节点保护的PQ节点。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
2.3.3. Computing Node-Protecting R-LFA Paths for Destinations with Multiple Primary Next-Hop Nodes
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
2.3.3. 为具有多个主下一跳节点的目的地计算节点保护R-LFA路径
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In certain scenarios, when one or more destinations may be reachable via multiple ECMP (equal-cost-multi-path) next-hop nodes and only link protection is required, there is no need to compute any alternate paths for such destinations. In the event of failure of one of the next-hop links, the remaining primary next hops shall always provide link protection. However, if node protection is
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在某些场景中，当一个或多个目的地可通过多个ECMP（等成本多路径）下一跳节点到达且仅需要链路保护时，无需计算此类目的地的任何备用路径。如果一个下一跳链路发生故障，剩余的主下一跳应始终提供链路保护。但是，如果需要节点保护
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
required, the rest of the primary next hops may not guarantee node protection. Figure 7 below shows one such example topology.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
必要时，其余的主下一跳可能无法保证节点保护。下面的图7显示了一个这样的示例拓扑。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
                                    D1
                              2    /
                          S---x---E1
                         / \     / \
                        /   x   /   \
                       /     \ /     \
                      N-------E2      R3--D2
                       \  2          /
                        \           /
                         \         /
                         R1-------R2
                              2
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
                                    D1
                              2    /
                          S---x---E1
                         / \     / \
                        /   x   /   \
                       /     \ /     \
                      N-------E2      R3--D2
                       \  2          /
                        \           /
                         \         /
                         R1-------R2
                              2
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   Primary Next hops:
     Destination D1 = [{ S-E1, E1}, {S-E2, E2}]
     Destination D2 = [{ S-E1, E1}, {S-E2, E2}]
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   Primary Next hops:
     Destination D1 = [{ S-E1, E1}, {S-E2, E2}]
     Destination D2 = [{ S-E1, E1}, {S-E2, E2}]
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-10">
Figure 7: Topology with Multiple ECMP Primary Next Hops
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-10">
图7：具有多个ECMP主下一跳的拓扑
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In the above example topology, costs of all links are 1, except the following links:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在上述示例拓扑中，除以下链接外，所有链接的成本均为1：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
Link: S-E1, Cost: 2
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
链接：S-E1，成本：2
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
      Link: N-E2: Cost: 2
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
      Link: N-E2: Cost: 2
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
      Link: R1-R2: Cost: 2
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
      Link: R1-R2: Cost: 2
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In the above topology, on computing router S, destinations D1 and D2 are reachable via two ECMP next-hop nodes E1 and E2. However, the primary paths via next-hop node E2 also traverse via the next-hop node E1. So, in the event of node failure of next-hop node E1, both primary paths (via E1 and E2) become unavailable. Hence, if node protection is desired for destinations D1 and D2, alternate paths that do not traverse any of the primary next-hop nodes E1 and E2 need to be computed. In the above topology, the only alternate neighbor N does not provide such an LFA alternate path. Hence, one or more R-LFA node-protecting alternate paths for destinations D1 and D2, needs to be computed.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在上述拓扑中，在计算路由器S上，目的地D1和D2可经由两个ECMP下一跳节点E1和E2到达。然而，经由下一跳节点E2的主路径也经由下一跳节点E1穿过。因此，在下一跳节点E1的节点故障的情况下，两个主路径（通过E1和E2）变得不可用。因此，如果目的地D1和D2需要节点保护，则需要计算不穿过任何主下一跳节点E1和E2的备用路径。在上述拓扑中，唯一的备用邻居N不提供这样的LFA备用路径。因此，需要计算保护目的地D1和D2的备用路径的一个或多个R-LFA节点。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In the above topology, the link-protecting PQ-nodes are as follows:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在上述拓扑中，保护PQ节点的链路如下：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
      Primary Next Hop: E1, Link-Protecting PQ-Node: { R2 }
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
      Primary Next Hop: E1, Link-Protecting PQ-Node: { R2 }
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
      Primary Next Hop: E2, Link-Protecting PQ-Node: { R2 }
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
      Primary Next Hop: E2, Link-Protecting PQ-Node: { R2 }
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
To find one (or more) node-protecting R-LFA paths for destinations D1 and D2, one (or more) node-protecting PQ-node(s) need to be determined first. Inequalities specified in Sections 2.2.6.2 and 2.2.6.3 can be evaluated to compute the node-protecting PQ-space for each of the next-hop nodes E1 and E2, as shown in Table 7 below. To select a PQ-node as a node-protecting PQ-node for a destination with multiple primary next-hop nodes, the PQ-node MUST satisfy the inequality for all primary next-hop nodes. Any PQ-node that is NOT a node-protecting PQ-node for all the primary next-hop nodes MUST NOT be chosen as the node-protecting PQ-node for the destination.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
为了为目的地D1和D2找到一个（或多个）保护R-LFA路径的节点，需要首先确定一个（或多个）保护PQ节点的节点。可评估第2.2.6.2节和第2.2.6.3节中规定的不等式，以计算每个下一跳节点E1和E2的节点保护PQ空间，如下表7所示。要选择PQ节点作为具有多个主下一跳节点的目的地的保护PQ节点的节点，PQ节点必须满足所有主下一跳节点的不等式。任何不是为所有主下一跳节点保护PQ节点的节点的PQ节点都不能被选择为为目标节点保护PQ节点的节点。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   +--------+----------+-------+--------+--------+---------+-----------+
   | Primary| Candidate| Direct| D_opt  | D_opt  |  D_opt  | Condition |
   |  Next  |   PQ-    |  Nbr  | (Ni,Y) | (Ni,E) |  (E,Y)  |    Met    |
   |  Hop   | node (Y) |  (Ni) |        |        |         |           |
   |  (E)   |          |       |        |        |         |           |
   +--------+----------+-------+--------+--------+---------+-----------+
   |   E1   |    R2    |   N   |   3    |   3    |    2    |    Yes    |
   |        |          |       | (N,R2) | (N,E1) | (E1,R2) |           |
   |   E2   |    R2    |   N   |   3    |   2    |    3    |    Yes    |
   |        |          |       | (N,R2) | (N,E2) | (E2,R2) |           |
   +--------+----------+-------+--------+--------+---------+-----------+
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   +--------+----------+-------+--------+--------+---------+-----------+
   | Primary| Candidate| Direct| D_opt  | D_opt  |  D_opt  | Condition |
   |  Next  |   PQ-    |  Nbr  | (Ni,Y) | (Ni,E) |  (E,Y)  |    Met    |
   |  Hop   | node (Y) |  (Ni) |        |        |         |           |
   |  (E)   |          |       |        |        |         |           |
   +--------+----------+-------+--------+--------+---------+-----------+
   |   E1   |    R2    |   N   |   3    |   3    |    2    |    Yes    |
   |        |          |       | (N,R2) | (N,E1) | (E1,R2) |           |
   |   E2   |    R2    |   N   |   3    |   2    |    3    |    Yes    |
   |        |          |       | (N,R2) | (N,E2) | (E2,R2) |           |
   +--------+----------+-------+--------+--------+---------+-----------+
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-5">
Table 7: Computing Node-Protected PQ-Nodes for Next Hop E1 and E2
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-5">
表7：为下一跳E1和E2计算节点保护的PQ节点
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In SPF implementations that also produce a list of links and nodes traversed on the shortest path(s) from a given root to others, the tunnel-repair paths from the computing router to candidate PQ-node can be examined to ensure that none of the primary next-hop nodes are traversed. PQ-nodes that provide one or more Tunnel-repair paths that do not traverse any of the primary next-hop nodes are to be considered as node-protecting PQ-nodes. Table 8 below shows the possible tunnel-repair paths to PQ-node R2.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在SPF实现中，也会生成从给定根到其他根的最短路径上经过的链路和节点列表，可以检查从计算路由器到候选PQ节点的隧道修复路径，以确保没有经过任何主下一跳节点。提供一个或多个隧道修复路径的PQ节点（不穿过任何主下一跳节点）将被视为保护PQ节点的节点。下表8显示了到PQ节点R2的可能隧道维修路径。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   +--------------+------------+-------------------+-------------------+
   |  Primary-NH  |  PQ-Node   |   Tunnel-Repair   |    Exclude All    |
   |     (E)      |    (Y)     |       Paths       |     Primary-NH    |
   +--------------+------------+-------------------+-------------------+
   |    E1, E2    |     R2     |  S==&gt;N==&gt;R1==&gt;R2  |        Yes        |
   +--------------+------------+-------------------+-------------------+
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   +--------------+------------+-------------------+-------------------+
   |  Primary-NH  |  PQ-Node   |   Tunnel-Repair   |    Exclude All    |
   |     (E)      |    (Y)     |       Paths       |     Primary-NH    |
   +--------------+------------+-------------------+-------------------+
   |    E1, E2    |     R2     |  S==&gt;N==&gt;R1==&gt;R2  |        Yes        |
   +--------------+------------+-------------------+-------------------+
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-16">
Table 8: Tunnel-Repair Paths to PQ-Node R2
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-16">
表8:PQ节点R2的隧道维修路径
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
From Tables 7 and 8 in the example above, R2 is a node-protecting PQ-node for both primary next hops E1 and E2 and should be chosen as the node-protecting PQ-node for destinations D1 and D2 that are both reachable via the primary next-hop nodes E1 and E2.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
从上面示例中的表7和表8中可以看出，R2是保护主要下一跳E1和E2的PQ节点的节点，并且应该被选为保护目的地D1和D2的PQ节点的节点，目的地D1和D2都可以通过主要下一跳节点E1和E2到达。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Next, to find a node-protecting R-LFA path from a node-protecting PQ-node to destinations D1 and D2, inequalities specified in Figure 6 should be evaluated to ensure that R2 provides a node-protecting R-LFA path for each of these destinations, as shown below in Table 9. For an R-LFA path to qualify as a node-protecting R-LFA path for a destination with multiple ECMP primary next-hop nodes, the R-LFA path from the PQ-node to the destination MUST satisfy the inequality for all primary next-hop nodes.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
接下来，为了找到从保护PQ节点到目的地D1和D2的保护R-LFA路径的节点，应评估图6中规定的不等式，以确保R2为每个目的地提供保护R-LFA路径的节点，如下表9所示。对于具有多个ECMP主下一跳节点的目的地，要使R-LFA路径符合节点保护R-LFA路径的条件，从PQ节点到目的地的R-LFA路径必须满足所有主下一跳节点的不等式。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   +----------+----------+-------+--------+--------+--------+----------+
   | Destinat | Primary- |  PQ-  | D_opt  | D_opt  | D_opt  | Condition|
   | ion (D)  |  NH (E)  |  Node | (Y, D) | (Y, E) | (E, D) |   Met    |
   |          |          |  (Y)  |        |        |        |          |
   +----------+----------+-------+--------+--------+--------+----------+
   |    D1    |    E1    |   R2  | 3 (R2, | 2 (R2, | 1 (E1, |    No    |
   |          |          |       |  D1)   |  E1)   |  D1)   |          |
   |    D1    |    E2    |   R2  | 3 (R2, | 3 (R2, | 2 (E2, |   Yes    |
   |          |          |       |  D1)   |  E2)   |  D1)   |          |
   |    D2    |    E1    |   R2  | 2 (R2, | 2 (R2, | 2 (E1, |   Yes    |
   |          |          |       |  D2)   |  E1)   |  D2)   |          |
   |    D2    |    E2    |   R2  | 2 (R2, | 2 (R2, | 3 (E2, |   Yes    |
   |          |          |       |  D2)   |  E2)   |  D2)   |          |
   +----------+----------+-------+--------+--------+--------+----------+
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   +----------+----------+-------+--------+--------+--------+----------+
   | Destinat | Primary- |  PQ-  | D_opt  | D_opt  | D_opt  | Condition|
   | ion (D)  |  NH (E)  |  Node | (Y, D) | (Y, E) | (E, D) |   Met    |
   |          |          |  (Y)  |        |        |        |          |
   +----------+----------+-------+--------+--------+--------+----------+
   |    D1    |    E1    |   R2  | 3 (R2, | 2 (R2, | 1 (E1, |    No    |
   |          |          |       |  D1)   |  E1)   |  D1)   |          |
   |    D1    |    E2    |   R2  | 3 (R2, | 3 (R2, | 2 (E2, |   Yes    |
   |          |          |       |  D1)   |  E2)   |  D1)   |          |
   |    D2    |    E1    |   R2  | 2 (R2, | 2 (R2, | 2 (E1, |   Yes    |
   |          |          |       |  D2)   |  E1)   |  D2)   |          |
   |    D2    |    E2    |   R2  | 2 (R2, | 2 (R2, | 3 (E2, |   Yes    |
   |          |          |       |  D2)   |  E2)   |  D2)   |          |
   +----------+----------+-------+--------+--------+--------+----------+
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-14">
Table 9: Finding Node-Protecting R-LFA Path for Destinations D1 and D2
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-14">
表9：为目的地D1和D2查找保护R-LFA路径的节点
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In SPF implementations that also produce a list of links and nodes traversed on the shortest path(s) from a given root to others, the R-LFA paths via a node-protecting PQ-node to the final destination can be examined to ensure that none of the primary next-hop nodes are traversed. One or more R-LFA paths that do not traverse any of the primary next-hop nodes guarantees node protection in the event of failure of any of the primary next-hop nodes. Table 10 shows the possible R-LFA-paths for destinations D1 and D2 via the node-protecting PQ-node R2.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在SPF实现中，也会生成从给定根到其他根的最短路径上经过的链路和节点列表，可以检查通过保护PQ节点的节点到最终目的地的R-LFA路径，以确保没有经过任何主下一跳节点。不穿过任何主下一跳节点的一个或多个R-LFA路径在任何主下一跳节点发生故障时保证节点保护。表10显示了目的地D1和D2通过保护PQ节点R2的节点可能的R-LFA路径。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   +-------------+------------+---------+-----------------+------------+
   | Destination | Primary-NH | PQ-Node |   R-LFA Paths   |  Exclude   |
   |     (D)     |    (E)     |   (Y)   |                 |    All     |
   |             |            |         |                 | Primary-NH |
   +-------------+------------+---------+-----------------+------------+
   |      D1     |   E1, E2   |    R2   | S==&gt;N==&gt;R1==&gt;R2 |     No     |
   |             |            |         | --&gt;R3--&gt;E1--&gt;D1 |            |
   |             |            |         |                 |            |
   |      D2     |   E1, E2   |    R2   | S==&gt;N==&gt;R1==&gt;R2 |    Yes     |
   |             |            |         |    --&gt;R3--&gt;D2   |            |
   +-------------+------------+---------+-----------------+------------+
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   +-------------+------------+---------+-----------------+------------+
   | Destination | Primary-NH | PQ-Node |   R-LFA Paths   |  Exclude   |
   |     (D)     |    (E)     |   (Y)   |                 |    All     |
   |             |            |         |                 | Primary-NH |
   +-------------+------------+---------+-----------------+------------+
   |      D1     |   E1, E2   |    R2   | S==&gt;N==&gt;R1==&gt;R2 |     No     |
   |             |            |         | --&gt;R3--&gt;E1--&gt;D1 |            |
   |             |            |         |                 |            |
   |      D2     |   E1, E2   |    R2   | S==&gt;N==&gt;R1==&gt;R2 |    Yes     |
   |             |            |         |    --&gt;R3--&gt;D2   |            |
   +-------------+------------+---------+-----------------+------------+
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-13">
Table 10: R-LFA Paths for Destinations D1 and D2
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-13">
表10：目的地D1和D2的R-LFA路径
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
From Tables 9 and 10 in the example above, the R-LFA path from R2 does not meet the node-protecting inequality for destination D1, while it does meet the same inequality for destination D2. So, while R2 provides a node-protecting R-LFA alternate for D2, it fails to provide node protection for destination D1. Finally, while it is possible to get a node-protecting R-LFA path for D2, no such node-protecting R-LFA path can be found for D1.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
从上例中的表9和表10可以看出，来自R2的R-LFA路径不满足目的地D1的节点保护不等式，而它满足目的地D2的相同不等式。因此，虽然R2为D2提供节点保护R-LFA替代方案，但它无法为目的地D1提供节点保护。最后，虽然可以为D2获得保护R-LFA路径的节点，但无法为D1找到这样的保护R-LFA路径的节点。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.3.4. Limiting Extra Computational Overhead
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.3.4. 限制额外的计算开销
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In addition to the extra reverse SPF computations suggested by the Remote-LFA document [RFC7490] (one reverse SPF for each of the directly connected neighbors), this document proposes a forward SPF computation for each PQ-node discovered in the network. Since the average number of PQ-nodes found in any network is considerably more than the number of direct neighbors of the computing router, the proposal of running one forward SPF per PQ-node may add considerably to the overall SPF computation time.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
除了远程LFA文件[RFC7490]建议的额外反向SPF计算（每个直接连接的邻居一个反向SPF），本文件还建议对网络中发现的每个PQ节点进行正向SPF计算。由于在任何网络中发现的PQ节点的平均数量远大于计算路由器的直接邻居的数量，因此每个PQ节点运行一个前向SPF的建议可能会显著增加总体SPF计算时间。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
To limit the computational overhead of the approach proposed, this document specifies that implementations MUST choose a subset from the entire set of PQ-nodes computed in the network, with a finite limit on the number of PQ-nodes in the subset. Implementations MUST choose a default value for this limit and may provide the user with a configuration knob to override the default limit. This document suggests 16 as a default value for this limit. Implementations MUST also evaluate some default preference criteria while considering a PQ-node in this subset. The exact default preference criteria to be used is outside the scope of this document and is a matter of implementation. Finally, implementations MAY also allow the user to override the default preference criteria, by providing a policy configuration for the same.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
为了限制所提出方法的计算开销，本文件规定实现必须从网络中计算的整个PQ节点集中选择一个子集，子集中的PQ节点数量有限。实现必须为此限制选择默认值，并可能为用户提供配置旋钮以覆盖默认限制。本文件建议将16作为该限制的默认值。在考虑此子集中的PQ节点时，实现还必须评估一些默认首选项标准。要使用的确切默认首选项标准不在本文档的范围内，这是一个实施问题。最后，实现还可以允许用户通过为默认偏好标准提供策略配置来覆盖默认偏好标准。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document proposes that implementations SHOULD use a default preference criteria for PQ-node selection that will put a score on each PQ-node, proportional to the number of primary interfaces for which it provides coverage, its distance from the computing router, and its router-id (or system-id in case of IS-IS). PQ-nodes that cover more primary interfaces SHOULD be preferred over PQ-nodes that cover fewer primary interfaces. When two or more PQ-nodes cover the same number of primary interfaces, PQ-nodes that are closer (based on metric) to the computing router SHOULD be preferred over PQ-nodes farther away from it. For PQ-nodes that cover the same number of primary interfaces and are the same distance from the computing router, the PQ-node with smaller router-id (or system-id in case of IS-IS) SHOULD be preferred.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本文件建议实施应使用PQ节点选择的默认首选标准，该标准将对每个PQ节点进行评分，评分与该节点提供覆盖范围的主要接口数量、其与计算路由器的距离及其路由器id（或IS-IS情况下的系统id）成比例。覆盖更多主接口的PQ节点应优先于覆盖较少主接口的PQ节点。当两个或多个PQ节点覆盖相同数量的主接口时，应优先选择距离计算路由器较近（基于度量）的PQ节点，而不是距离计算路由器较远的PQ节点。对于覆盖相同数量主接口且与计算路由器距离相同的PQ节点，应首选路由器id较小的PQ节点（或IS-IS情况下的系统id）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Once a subset of PQ-nodes is found, a computing router shall run a forward SPF on each of the PQ-nodes in the subset to continue with procedures proposed in Section 2.3.2.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
一旦找到PQ节点子集，计算路由器应在该子集中的每个PQ节点上运行前向SPF，以继续执行第2.3.2节中提出的程序。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3. Manageability of Remote-LFA Alternate Paths
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3. 远程LFA备用路径的可管理性
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.1. The Problem
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.1. 问题
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
With the regular remote-LFA [RFC7490] functionality, the computing router may compute more than one PQ-node as usable remote-LFA alternate next hops. Additionally, [RFC7916] specifies an LFA (and a remote-LFA) manageability framework, in which an alternate selection policy may be configured to let the network operator choose one of them as the most appropriate remote-LFA alternates. For such a policy-based alternate selection to run, the computing router needs to collect all the relevant path characteristics (as specified in Section 6.2.4 of [RFC7916]) for each of the alternate paths (one through each of the PQ-nodes). As mentioned before in Section 2.3, the R-LFA alternate path through a given PQ-node to a given destination is comprised of two path segments. Section 6.2.4 of [RFC7916] specifies that any kind of alternate selection policy must consider path characteristics for both path segments while evaluating one or more RLFA alternate paths.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
利用常规远程LFA[RFC7490]功能，计算路由器可以计算多个PQ节点作为可用的远程LFA备用下一跳。此外，[RFC7916]指定了LFA（和远程LFA）可管理性框架，在该框架中，可配置备选选择策略，以允许网络运营商选择其中一个作为最合适的远程LFA备选方案。为了运行这种基于策略的备用选择，计算路由器需要收集每个备用路径（通过每个PQ节点）的所有相关路径特征（如[RFC7916]第6.2.4节中的规定）。如前2.3节所述，通过给定PQ节点到给定目的地的R-LFA备用路径由两个路径段组成。[fc7916]的节[62.4 ]规定，任何类型的备用选择策略都必须考虑两个路径段的路径特性，同时评估一个或多个RLFA备用路径。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The first path segment (i.e., from the computing router to the PQ-node) can be calculated from the regular forward SPF done as part of standard and remote LFA computations. However, without the mechanism proposed in Section 2.3.2 of this document, there is no way to determine the path characteristics for the second path segment (i.e., from the PQ-node to the destination). In the absence of the path characteristics for the second path segment, two remote-LFA alternate paths may be equally preferred based on the first path segment characteristics only, although the second path segment attributes may be different.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
第一个路径段（即，从计算路由器到PQ节点）可以从作为标准和远程LFA计算的一部分完成的常规前向SPF计算。但是，如果没有本文件第2.3.2节中提出的机制，则无法确定第二个路径段（即从PQ节点到目的地）的路径特征。在缺少第二路径段的路径特征的情况下，尽管第二路径段属性可能不同，但仅基于第一路径段特征，两个远程LFA备用路径可以是同等优选的。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.2. The Solution
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.2. 解决方案
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The additional forward SPF computation proposed in Section 2.3.2 shall also collect links, nodes, and path characteristics along the second path segment. This shall enable the collection of complete path characteristics for a given remote-LFA alternate path to a given destination. The complete alternate path characteristics shall then facilitate more accurate alternate path selection while running the alternate selection policy.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
第2.3.2节中提出的额外正向SPF计算还应收集沿第二路径段的链路、节点和路径特征。这将能够收集到给定目的地的给定远程LFA备用路径的完整路径特征。在运行备用选择策略时，完整的备用路径特性应有助于更准确的备用路径选择。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
As already specified in Section 2.3.4, to limit the computational overhead of the proposed approach, forward SPF computations must be run on a selected subset from the entire set of PQ-nodes computed in the network, with a finite limit on the number of PQ-nodes in the subset. The detailed suggestion on how to select this subset is specified in the same section. While this limits the number of possible alternate paths provided to the alternate-selection policy, this is needed to keep the computational complexity within affordable limits. However, if the alternate-selection policy is very restrictive, this may leave few destinations in the entire topology without protection. Yet this limitation provides a necessary tradeoff between extensive coverage and immense computational overhead.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
如第2.3.4节所述，为了限制拟议方法的计算开销，必须在网络中计算的整个PQ节点集中的选定子集上运行前向SPF计算，且子集中的PQ节点数量有限。关于如何选择此子集的详细建议在同一节中指定。虽然这限制了提供给备用选择策略的可能备用路径的数量，但需要将计算复杂性保持在可承受的范围内。但是，如果备用选择策略非常严格，则可能会在整个拓扑中留下几个没有保护的目的地。然而，这种限制在广泛的覆盖范围和巨大的计算开销之间提供了必要的折衷。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The mechanism proposed in this section does not modify or invalidate any part of [RFC7916]. This document specifies a mechanism to meet the requirements specified in Section 6.2.5.4 of [RFC7916].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本节中提出的机制不会修改[RFC7916]的任何部分或使其无效。本文件规定了满足[RFC7916]第6.2.5.4节规定要求的机制。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
4. IANA Considerations
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
4. IANA考虑
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document does not require any IANA actions.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本文件不要求IANA采取任何行动。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5. Security Considerations
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5. 安全考虑
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document does not introduce any change in any of the protocol specifications. It simply proposes to run an extra SPF rooted on each PQ-node discovered in the whole network.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本文件未对任何协议规范进行任何更改。它只是建议在整个网络中发现的每个PQ节点上运行一个额外的SPF。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6. References
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6. 工具书类
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6.1. Normative References
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6.1. 规范性引用文件
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC2119] Bradner, S., &#34;Key words for use in RFCs to Indicate Requirement Levels&#34;, BCP 14, RFC 2119, DOI 10.17487/RFC2119, March 1997, &lt;http://www.rfc-editor.org/info/rfc2119&gt;.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC2119]Bradner，S.，“RFC中用于表示需求水平的关键词”，BCP 14，RFC 2119，DOI 10.17487/RFC2119，1997年3月&lt;http://www.rfc-editor.org/info/rfc2119&gt;.
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC5286] Atlas, A., Ed. and A. Zinin, Ed., &#34;Basic Specification for IP Fast Reroute: Loop-Free Alternates&#34;, RFC 5286, DOI 10.17487/RFC5286, September 2008, &lt;http://www.rfc-editor.org/info/rfc5286&gt;.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC5286]Atlas，A.，Ed.和A.Zinin，Ed.，“IP快速重路由的基本规范：无环路交替”，RFC 5286，DOI 10.17487/RFC5286，2008年9月&lt;http://www.rfc-editor.org/info/rfc5286&gt;.
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC7490] Bryant, S., Filsfils, C., Previdi, S., Shand, M., and N. So, &#34;Remote Loop-Free Alternate (LFA) Fast Reroute (FRR)&#34;, RFC 7490, DOI 10.17487/RFC7490, April 2015, &lt;http://www.rfc-editor.org/info/rfc7490&gt;.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC7490]Bryant，S.，Filsfils，C.，Previdi，S.，Shand，M.，和N.So，“远程无环路备用（LFA）快速重路由（FRR）”，RFC 7490，DOI 10.17487/RFC74902015年4月&lt;http://www.rfc-editor.org/info/rfc7490&gt;.
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6.2. Informative References
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6.2. 资料性引用
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC7916] Litkowski, S., Ed., Decraene, B., Filsfils, C., Raza, K., Horneffer, M., and P. Sarkar, &#34;Operational Management of Loop-Free Alternates&#34;, RFC 7916, DOI 10.17487/RFC7916, July 2016, &lt;http://www.rfc-editor.org/info/rfc7916&gt;.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC7916]Litkowski，S.，Ed.，DeClaene，B.，Filsfils，C.，Raza，K.，Horneffer，M.，和P.Sarkar，“无回路备用电源的运行管理”，RFC 7916，DOI 10.17487/RFC7916，2016年7月&lt;http://www.rfc-editor.org/info/rfc7916&gt;.
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Acknowledgements
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
致谢
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Many thanks to Bruno Decraene for providing his useful comments. We would also like to thank Uma Chunduri for reviewing this document and providing valuable feedback. Also, many thanks to Harish Raghuveer for his review and comments on the initial draft versions of this document.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
非常感谢布鲁诺·德雷恩提供了有用的意见。我们还要感谢Uma Chunduri审阅本文件并提供宝贵反馈。此外，非常感谢Harish Raghuveer对本文件初稿的审查和评论。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Authors&#39; Addresses
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
作者地址
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Pushpasis Sarkar (editor) Arrcus, Inc.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Pushpasis Sarkar（编辑）Arrcus公司。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   Email: pushpasis.ietf@gmail.com
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   Email: pushpasis.ietf@gmail.com
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Shraddha Hegde Juniper Networks, Inc. Electra, Exora Business Park Bangalore, KA 560103 India
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Shraddha Hegde Juniper Networks，Inc.Electra，Exora商业园区班加罗尔，印度，邮编560103
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   Email: shraddha@juniper.net
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   Email: shraddha@juniper.net
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Chris Bowers Juniper Networks, Inc. 1194 N. Mathilda Ave. Sunnyvale, CA 94089 United States of America
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Chris Bowers Juniper Networks，Inc.美国加利福尼亚州桑尼维尔市马蒂尔达大道北1194号，邮编94089
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   Email: cbowers@juniper.net
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   Email: cbowers@juniper.net
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Hannes Gredler RtBrick, Inc.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
汉内斯·格雷德勒RtBrick公司。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   Email: hannes@rtbrick.com
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   Email: hannes@rtbrick.com
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Stephane Litkowski Orange
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
斯蒂芬利特科夫斯基橙
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   Email: stephane.litkowski@orange.com
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   Email: stephane.litkowski@orange.com
        </pre>
      </div>

    </div>
  </div>
  <div id="rfc_footer"></div>
</body>
</html>
