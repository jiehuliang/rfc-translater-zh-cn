<!DOCTYPE html>

<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name='description' content="RFC 7705: Autonomous System Migration Mechanisms and Their Effects on the BGP AS_PATH Attribute中文翻译 中文RFC RFC文档 RFC翻译 RFC中文版">
  <title>RFC7705 中文翻译 中文RFC RFC文档 RFC翻译 RFC中文版</title>

  <link rel="shortcut icon" type="image/x-icon"
    href="favicon.ico" />

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

  <link rel="stylesheet" href="master.css">
  <script src="index.js"></script>
  <script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?b7f7721ebaa11b23aaf77df0590e7f4a";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();
  </script>
  <script data-ad-client="ca-pub-9129771189441092" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  
</head>
<body>
  <nav class="navbar navbar-expand navbar-light bg-light">
    <a class="navbar-brand" href="index.html">RFC2CN</a>
    <div class="collapse navbar-collapse" id="navbarText">
      <div class="navbar-nav mr-auto">
        <a class="nav-item nav-link" href="about.html">关于</a>
      </div>
    </div>
  </nav>

  <span id="rfc_number" class="hidden">7705</span>
  <div style="height: 1ex;"></div>
  <div class="jump-to-original-rfc-container">
    <a href="https://www.rfc-editor.org/rfc/rfc7705.html">
      <button type="button" class="btn btn-light btn-sm">
        <span class="jump-to-original-rfc">原文</span>
      </button>
    </a>
  </div>
  <div class="container">
    <div class="row">
      <div id="rfc_header" class="col-sm-12 col-md-12">
        <div class="alert alert-info" role="alert">
          <h1 class="alert-heading">RFC 7705: Autonomous System Migration Mechanisms and Their Effects on the BGP AS_PATH Attribute 中文翻译</h1>
          <span class="URL">URL :
            <a href="https://datatracker.ietf.org/doc/html/rfc7705" target="_blank">
              https://datatracker.ietf.org/doc/html/rfc7705
            </a>
          </span><br>
          <span class="title_ja">
            标题 : <strong>RFC 7705</strong></span><br>
          <span class="updated_by">翻译类型 : 自动生成</span><br>
        </div>
      </div>
      <div id="rfc_alert" class="col-sm-12 col-md-12 hidden" role="alert">
        <div class="alert alert-danger">
          <span id="rfc_alert_obsoleted_by"></span>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
Internet Engineering Task Force (IETF)                         W. George
Request for Comments: 7705                             Time Warner Cable
Updates: 4271                                                  S. Amante
Category: Standards Track                                    Apple, Inc.
ISSN: 2070-1721                                            November 2015
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
Internet Engineering Task Force (IETF)                         W. George
Request for Comments: 7705                             Time Warner Cable
Updates: 4271                                                  S. Amante
Category: Standards Track                                    Apple, Inc.
ISSN: 2070-1721                                            November 2015
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-13">
 Autonomous System Migration Mechanisms and Their Effects on the BGP AS_PATH Attribute
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-13">
自治系统迁移机制及其对BGP AS_路径属性的影响
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Abstract
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
摘要
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document discusses some existing commonly used BGP mechanisms for Autonomous System Number (ASN) migration that are not formally part of the BGP4 protocol specification. It is necessary to document these de facto standards to ensure that they are properly supported in future BGP protocol work.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本文档讨论了一些用于自治系统号（ASN）迁移的现有常用BGP机制，这些机制不是BGP4协议规范的正式组成部分。有必要记录这些事实上的标准，以确保它们在未来的BGP协议工作中得到适当支持。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Status of This Memo
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
关于下段备忘
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This is an Internet Standards Track document.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
这是一份互联网标准跟踪文件。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document is a product of the Internet Engineering Task Force (IETF). It represents the consensus of the IETF community. It has received public review and has been approved for publication by the Internet Engineering Steering Group (IESG). Further information on Internet Standards is available in Section 2 of RFC 5741.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本文件是互联网工程任务组（IETF）的产品。它代表了IETF社区的共识。它已经接受了公众审查，并已被互联网工程指导小组（IESG）批准出版。有关互联网标准的更多信息，请参见RFC 5741第2节。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Information about the current status of this document, any errata, and how to provide feedback on it may be obtained at http://www.rfc-editor.org/info/rfc7705.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
有关本文件当前状态、任何勘误表以及如何提供反馈的信息，请访问http://www.rfc-editor.org/info/rfc7705.
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Copyright Notice
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
版权公告
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Copyright (c) 2015 IETF Trust and the persons identified as the document authors. All rights reserved.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
版权所有（c）2015 IETF信托基金和确定为文件作者的人员。版权所有。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document is subject to BCP 78 and the IETF Trust&#39;s Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document. Please review these documents carefully, as they describe your rights and restrictions with respect to this document. Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本文件受BCP 78和IETF信托有关IETF文件的法律规定的约束(http://trustee.ietf.org/license-info)自本文件出版之日起生效。请仔细阅读这些文件，因为它们描述了您对本文件的权利和限制。从本文件中提取的代码组件必须包括信托法律条款第4.e节中所述的简化BSD许可证文本，并提供简化BSD许可证中所述的无担保。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Table of Contents
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
目录
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace toc">
   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
     1.1.  Requirements Language . . . . . . . . . . . . . . . . . .   3
     1.2.  Documentation Note  . . . . . . . . . . . . . . . . . . .   3
   2.  ASN Migration Scenario Overview . . . . . . . . . . . . . . .   3
   3.  External BGP Autonomous System Migration Mechanisms . . . . .   5
     3.1.  Modify Inbound BGP AS_PATH Attribute  . . . . . . . . . .   5
     3.2.  Modify Outbound BGP AS_PATH Attribute . . . . . . . . . .   7
     3.3.  Implementation  . . . . . . . . . . . . . . . . . . . . .   8
   4.  Internal BGP Autonomous System Migration Mechanisms . . . . .   9
     4.1.  Internal BGP AS Migration . . . . . . . . . . . . . . . .  10
     4.2.  Implementation  . . . . . . . . . . . . . . . . . . . . .  12
   5.  Additional Operational Considerations . . . . . . . . . . . .  13
   6.  Security Considerations . . . . . . . . . . . . . . . . . . .  14
   7.  References  . . . . . . . . . . . . . . . . . . . . . . . . .  14
     7.1.  Normative References  . . . . . . . . . . . . . . . . . .  14
     7.2.  Informative References  . . . . . . . . . . . . . . . . .  14
   Appendix A.  Implementation Report  . . . . . . . . . . . . . . .  16
   Acknowledgements  . . . . . . . . . . . . . . . . . . . . . . . .  16
   Authors&#39; Addresses  . . . . . . . . . . . . . . . . . . . . . . .  16
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace toc">
   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
     1.1.  Requirements Language . . . . . . . . . . . . . . . . . .   3
     1.2.  Documentation Note  . . . . . . . . . . . . . . . . . . .   3
   2.  ASN Migration Scenario Overview . . . . . . . . . . . . . . .   3
   3.  External BGP Autonomous System Migration Mechanisms . . . . .   5
     3.1.  Modify Inbound BGP AS_PATH Attribute  . . . . . . . . . .   5
     3.2.  Modify Outbound BGP AS_PATH Attribute . . . . . . . . . .   7
     3.3.  Implementation  . . . . . . . . . . . . . . . . . . . . .   8
   4.  Internal BGP Autonomous System Migration Mechanisms . . . . .   9
     4.1.  Internal BGP AS Migration . . . . . . . . . . . . . . . .  10
     4.2.  Implementation  . . . . . . . . . . . . . . . . . . . . .  12
   5.  Additional Operational Considerations . . . . . . . . . . . .  13
   6.  Security Considerations . . . . . . . . . . . . . . . . . . .  14
   7.  References  . . . . . . . . . . . . . . . . . . . . . . . . .  14
     7.1.  Normative References  . . . . . . . . . . . . . . . . . .  14
     7.2.  Informative References  . . . . . . . . . . . . . . . . .  14
   Appendix A.  Implementation Report  . . . . . . . . . . . . . . .  16
   Acknowledgements  . . . . . . . . . . . . . . . . . . . . . . . .  16
   Authors&#39; Addresses  . . . . . . . . . . . . . . . . . . . . . . .  16
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
1. Introduction
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
1. 介绍
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document discusses some existing commonly used BGP mechanisms for Autonomous System Number (ASN) migration that are not formally part of the BGP4 [RFC4271] protocol specification. These mechanisms are local to a given BGP speaker and do not require negotiation with or cooperation of BGP neighbors. The deployment of these mechanisms do not need to interwork with one another to accomplish the desired results, so slight variations between existing vendor implementations exist and will not necessarily be harmonized due to this document. However, it is necessary to document these de facto standards to ensure that new implementations can be successful, and any future protocol enhancements to BGP that propose to read, copy, manipulate, or compare the AS_PATH attribute can do so without inhibiting the use of these very widely used ASN migration mechanisms.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本文档讨论了用于自治系统号（ASN）迁移的一些现有常用BGP机制，这些机制不是BGP4[RFC4271]协议规范的正式组成部分。这些机制是特定BGP发言人的本地机制，不需要与BGP邻居协商或合作。这些机制的部署不需要相互协作以实现预期的结果，因此现有供应商实施之间存在细微差异，并且由于本文件的原因，不一定会进行协调。但是，有必要记录这些事实上的标准，以确保新的实现能够成功，并且任何未来对BGP的协议增强，如果建议读取、复制、操作或比较AS_路径属性，都可以做到这一点，而不会抑制这些广泛使用的ASN迁移机制的使用。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The migration mechanisms discussed here are useful to ISPs and organizations of all sizes, but it is important to understand the business need for these mechanisms and illustrate why they are so critical for ISPs&#39; operations. During a merger, acquisition, or divestiture involving two organizations it is necessary to seamlessly migrate both internal and external BGP speakers from one ASN to a second ASN. The overall goal in doing so is to simplify operations through consistent configurations across all BGP speakers in the combined network. In addition, given that the BGP Path Selection algorithm selects routes with the shortest AS_PATH attribute, it is
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
这里讨论的迁移机制对各种规模的ISP和组织都很有用，但了解这些机制的业务需求并说明它们为什么对ISP的运营如此重要是很重要的。在涉及两个组织的合并、收购或剥离过程中，有必要将内部和外部BGP扬声器从一个ASN无缝迁移到另一个ASN。这样做的总体目标是通过组合网络中所有BGP扬声器的一致配置简化操作。此外，鉴于BGP路径选择算法选择具有最短AS_路径属性的路由，因此
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
critical that the ISP does not increase AS_PATH length during or after ASN migration, because an increased AS_PATH length would likely result in sudden, undesirable changes in traffic-patterns in the network.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在ASN迁移期间或之后，ISP不增加AS_路径长度至关重要，因为AS_路径长度的增加可能会导致网络中流量模式的突然、不希望的变化。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
By default, the BGP protocol requires an operator to configure a router to use a single remote ASN for the BGP neighbor, and the ASN must match on both ends of the peering in order to successfully negotiate and establish a BGP session. Prior to the existence of these migration mechanisms, it would have required an ISP to coordinate an ASN change with, in some cases, tens of thousands of customers. In particular, as each router is migrated to the new ASN, to avoid an outage due to ASN mismatch, the ISP would have to force all customers on that router to change their router configurations to use the new ASN immediately after the ASN change. Thus, it was critical to define a more asymmetric migration method so that the ISP could seamlessly change the ASN within its network(s) but allow the customers to gradually migrate to the ISP&#39;s new ASN when convenient. These customer migrations could occur either by coordinating individual session reconfigurations or, to allow for truly asymmetric migration, by accepting sessions using either the old or new ASN.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
默认情况下，BGP协议要求运营商配置路由器，以便为BGP邻居使用单个远程ASN，并且ASN必须在对等的两端匹配，以便成功协商和建立BGP会话。在存在这些迁移机制之前，在某些情况下，需要ISP与成千上万的客户协调ASN变更。特别是，当每个路由器迁移到新的ASN时，为了避免由于ASN不匹配而导致的中断，ISP必须强制该路由器上的所有客户在ASN更改后立即更改其路由器配置以使用新的ASN。因此，必须定义一种更不对称的迁移方法，以便ISP能够在其网络内无缝地更改ASN，但允许客户在方便时逐渐迁移到ISP的新ASN。这些客户迁移可以通过协调单个会话的重新配置来实现，也可以通过使用旧的或新的ASN接受会话来实现，以实现真正的不对称迁移。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
1.1. Requirements Language
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
1.1. 需求语言
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The key words &#34;MUST&#34;, &#34;MUST NOT&#34;, &#34;REQUIRED&#34;, &#34;SHALL&#34;, &#34;SHALL NOT&#34;, &#34;SHOULD&#34;, &#34;SHOULD NOT&#34;, &#34;RECOMMENDED&#34;, &#34;MAY&#34;, and &#34;OPTIONAL&#34; in this document are to be interpreted as described in RFC 2119 [RFC2119].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本文件中的关键词“必须”、“不得”、“要求”、“应”、“不应”、“应”、“不应”、“建议”、“可”和“可选”应按照RFC 2119[RFC2119]中所述进行解释。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
1.2. Documentation Note
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
1.2. 文件说明
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document uses Autonomous System Numbers (ASNs) from the range reserved for documentation as described in RFC 5398 [RFC5398]. In the examples used here, they are intended to represent Globally Unique ASNs, not private use ASNs as documented in Section 5 of RFC 6996 [RFC6996].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本文件使用了RFC 5398[RFC5398]中所述为文件保留范围内的自主系统编号（ASN）。在这里使用的示例中，它们旨在表示全球唯一的ASN，而不是RFC 6996[RFC6996]第5节中记录的专用ASN。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2. ASN Migration Scenario Overview
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2. ASN迁移场景概述
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The use case being discussed here is an ISP merging two or more ASNs, where eventually one ASN subsumes the other(s). In this use case, we will assume the most common case where there are two ISPs, A and B, that prior to the ASN migration use AS 64500 and 64510, respectively. AS 64500 will be the permanently retained ASN used across the consolidated set of both ISPs network equipment, and AS 64510 will be retired. Thus, at the conclusion of the ASN migration, there will be a single ISP A&#39; with all internal BGP speakers configured to use AS 64500. To all external BGP speakers, the AS_PATH length will not be increased.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
这里讨论的用例是ISP合并两个或多个ASN，其中一个ASN最终包含另一个ASN。在这个用例中，我们将假设最常见的情况是，在ASN迁移之前，有两个ISP，A和B，分别使用64500和64510。AS 64500将是永久保留的ASN，用于两个ISPs网络设备的整合集，AS 64510将退役。因此，在ASN迁移结束时，将有一个ISP a’，所有内部BGP扬声器配置为使用AS 64500。对于所有外部BGP扬声器，AS_路径长度不会增加。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In this same scenario, AS 64496 and AS 64499 represent two separate customer networks: C and D, respectively. Originally, customer C (AS 64496) is attached to ISP B, which will undergo ASN migration from AS 64510 to AS 64500. Furthermore, customer D (AS 64499) is attached to ISP A, which does not undergo ASN migration since the ASN for ISP A will remain constant, (AS 64500). Although this example refers to AS 64496 and 64499 as customer networks, either or both may be settlement-free or other types of peers. In this use case, they are referred to as &#34;customers&#34; merely for convenience.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在同一场景中，AS 64496和AS 64499分别代表两个独立的客户网络：C和D。最初，客户C（AS 64496）连接到ISP B，ISP B将经历从AS 64510到AS 64500的ASN迁移。此外，客户D（AS 64499）连接到ISP A，ISP A不进行ASN迁移，因为ISP A的ASN将保持不变（AS 64500）。尽管此示例将AS 64496和64499称为客户网络，但其中一个或两个都可以是无结算的对等方或其他类型的对等方。在这个用例中，他们被称为“客户”仅仅是为了方便。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
         ------                  ------
       / ISP  A \              / ISP  B \
      | AS 64500 |            | AS 64510 |
       \        /              \        /
        -------                 -------
           |                       |
           |                       |
     ------------             -------------
     |  Cust D  |             |  Cust C   |
     | AS 64499 |             | AS 64496  |
     ------------             -------------
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
         ------                  ------
       / ISP  A \              / ISP  B \
      | AS 64500 |            | AS 64510 |
       \        /              \        /
        -------                 -------
           |                       |
           |                       |
     ------------             -------------
     |  Cust D  |             |  Cust C   |
     | AS 64499 |             | AS 64496  |
     ------------             -------------
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-24">
Figure 1: Before Migration
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-24">
图1：迁移前
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
                ---------------
              /                \
             |     ISP A&#39;       |
             |     AS 64500     |
              \                /
                ---------------
             /                  \
           /                      \
          |                         |
     ------------             -------------
     |  Cust D  |             |  Cust C   |
     | AS 64499 |             | AS 64496  |
     ------------             -------------
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
                ---------------
              /                \
             |     ISP A&#39;       |
             |     AS 64500     |
              \                /
                ---------------
             /                  \
           /                      \
          |                         |
     ------------             -------------
     |  Cust D  |             |  Cust C   |
     | AS 64499 |             | AS 64496  |
     ------------             -------------
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-25">
Figure 2: After Migration
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-25">
图2：迁移后
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The general order of operations, typically carried out in a single maintenance window by the network undergoing ASN migration (ISP B), is as follows. First, ISP B will change the global BGP ASN used by a Provider Edge (PE) router, from ASN 64510 to 64500. At this point, the router will no longer be able to establish External BGP (eBGP) sessions toward the existing Customer Edge (CE) devices that are attached to it and still using AS 64510. Second, since ISP B needs to do this without coordinating the simultaneous change of its ASN
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
一般操作顺序（通常由正在进行ASN迁移的网络（ISP B）在单个维护窗口中执行）如下所示。首先，ISP B将提供商边缘（PE）路由器使用的全局BGP ASN从ASN 64510更改为64500。此时，路由器将不再能够建立外部BGP（eBGP）会话，该会话指向连接到路由器且仍使用AS 64510的现有客户边缘（CE）设备。其次，由于ISP B需要在不协调其ASN的同时更改的情况下执行此操作
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
with all of its eBGP peers, ISP B will configure two separate, but related ASN migration mechanisms discussed in this document on all eBGP sessions toward all CE devices. These mechanisms enable the router to establish BGP neighbors using the legacy ASN, modify the AS_PATH attribute received from a CE device when advertising it further, and modify AS_PATH when transmitted toward CE devices to achieve the desired effect of not increasing the length of the AS_PATH.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ISP B将在其所有eBGP对等机上，针对所有CE设备的所有eBGP会话，配置本文档中讨论的两种独立但相关的ASN迁移机制。这些机制使得路由器能够使用传统ASN建立BGP邻居，在进一步宣传时修改从CE设备接收的AS_路径属性，并且在向CE设备传输时修改AS_路径，以实现不增加AS_路径长度的期望效果。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
At the conclusion of the ASN migration, the CE devices at the edge of the network are not aware of the fact that their upstream router is now in a new ASN and do not observe any change in the length of the AS_PATH attribute. However, after the changes discussed in this document are put in place by ISP A&#39;, there is a change to the contents of the AS_PATH attribute to ensure the AS_PATH is not artificially lengthened while these AS migration parameters are used.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在ASN迁移结束时，网络边缘的CE设备不知道其上游路由器现在位于新ASN中，并且没有观察到AS_路径属性长度的任何变化。但是，在ISP A&#39;实施本文档中讨论的更改后，AS_路径属性的内容将发生更改，以确保在使用这些AS迁移参数时，AS_路径不会被人为延长。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In this use case, neither ISP is using BGP Confederations [RFC5065] internally.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在这个用例中，两个ISP都没有在内部使用BGP联合会[RFC5065]。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3. External BGP Autonomous System Migration Mechanisms
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3. 外部BGP自治系统迁移机制
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The following section addresses optional capabilities that are specific to modifying the AS_PATH attribute at the Autonomous System Border Routers (ASBRs) of an organization (typically a single Service Provider). This ensures that external BGP customers/peers are not forced to make any configuration changes on their CE routers before or during the exact time the Service Provider wishes to migrate to a new, permanently retained ASN. Furthermore, these mechanisms eliminate the artificial lengthening of the AS_PATH both transmitted from and received by the Service Provider that is undergoing AS Migration, which would have negative implications on path selection by external networks.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
以下部分介绍了特定于修改组织（通常是单个服务提供商）的自治系统边界路由器（ASBR）上的AS_路径属性的可选功能。这确保了外部BGP客户/对等方在服务提供商希望迁移到新的、永久保留的ASN之前或期间不会被迫对其CE路由器进行任何配置更改。此外，这些机制消除了正在进行AS迁移的服务提供商发送和接收的AS_路径的人为延长，这将对外部网络的路径选择产生负面影响。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.1. Modify Inbound BGP AS_PATH Attribute
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.1. 将入站BGP修改为_路径属性
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The first instrument used in the process described above is called &#34;Local AS&#34;. This allows the router to supersede the globally configured ASN in the &#34;My Autonomous System&#34; field of the BGP OPEN [RFC4271] with a locally defined AS value for a specific BGP neighbor or group of neighbors. This mechanism allows the PE router that was formerly in ISP B to establish an eBGP session toward the existing CE devices using the legacy AS -- AS 64510. Ultimately, the CE devices (i.e., customer C) are completely unaware that ISP B has reconfigured its router to participate as a member of a new AS. Within the context of the former ISP B PE router, the second effect this specific mechanism has on AS_PATH is that, by default, it prepends all received BGP UPDATEs with the legacy AS of ISP B -- AS 64510 --
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
上述过程中使用的第一台仪器称为“本地AS”。这允许路由器使用本地定义为特定BGP邻居或一组邻居的值来取代BGP OPEN[RFC4271]的“我的自治系统”字段中的全局配置ASN。该机制允许以前在ISP B中的PE路由器使用传统AS-AS 64510建立面向现有CE设备的eBGP会话。最终，CE设备（即客户C）完全不知道ISP B已将其路由器重新配置为作为新as的成员参与。在以前的ISP B PE路由器的上下文中，此特定机制对AS_路径的第二个影响是，默认情况下，它使用ISP B的遗留AS 64510预处理所有收到的BGP更新--
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
while advertising it (Adj-RIB-Out) to other BGP speakers (A&#39;). Within the Loc-RIB on ISP B prior to the migration, the AS_PATH of route announcements received from customer C would appear as 64496, whereas the same RIB on ISP A&#39; (ISP B routers post-migration) would contain AS_PATH 64510 64496.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在向其他BGP扬声器（A&#39;）宣传时。在迁移之前ISP B上的Loc RIB中，从客户C收到的路由通知的AS_路径将显示为64496，而ISP A上的相同RIB（ISP B路由器迁移后）将包含AS_路径64510 64496。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The second instrument, referred to as &#34;No Prepend Inbound&#34;, is enabled on PE routers migrating from ISP B. The &#34;No Prepend Inbound&#34; capability causes ISP B&#39;s routers to not prepend the legacy AS (AS 64510), when advertising UPDATES received from customer C. This restores the AS_PATH within ISP A&#39; for route announcements received from customer C so that it is just one ASN in length: 64496.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在从ISP B迁移的PE路由器上启用了称为“无预端入站”的第二个仪表。“无预端入站”功能使ISP B的路由器不预端传统as（as 64510），当从客户C接收到广告更新时，这将恢复ISP A中从客户C接收到的路由公告的AS_路径，使其长度仅为一个ASN:64496。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In the direction of CE -&gt; PE (inbound):
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在CE-&gt;PE（入站）方向：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1. &#34;Local AS&#34;: Allows the local BGP router to generate a BGP OPEN to an eBGP neighbor with the old, legacy ASN value in the &#34;My Autonomous System&#34; field. When this capability is activated, it also causes the local router to prepend the &lt;old_ASN&gt; value to the AS_PATH when installing or advertising routes received from a CE to Internal BGP (iBGP) neighbors inside the Autonomous System.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1. “本地AS”：允许本地BGP路由器使用“我的自治系统”字段中的旧的传统ASN值生成对eBGP邻居开放的BGP。当激活此功能时，它还会导致本地路由器在安装或公布从CE接收到的路由到自治系统内部的内部BGP（iBGP）邻居时，将&lt;old_ASN&gt;值预先发送到AS_路径。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2. &#34;No Prepend Inbound (of Local AS)&#34;: The local BGP router does not prepend the &lt;old_ASN&gt; value to the AS_PATH when installing or advertising routes received from the CE to iBGP neighbors inside the Autonomous System
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2. “无预编入站（本地AS）”：本地BGP路由器在安装或播发从CE接收到的路由到自治系统内iBGP邻居时，不会将&lt;old_ASN&gt;值预编到AS_路径
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
PE-B is a PE that was originally in ISP B, and has a customer eBGP session to CE-B. PE-B has had its global configuration ASN changed from AS 64510 to AS 64500 to make it part of the permanently retained ASN. This now makes PE-B a member of ISP A&#39;. PE-A is a PE that was originally in ISP A, and has a customer peer CE-A. Although its global configuration ASN remains AS 64500, throughout this exercise we also consider PE-A a member of ISP A&#39;.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
PE-B是最初位于ISP B中的PE，具有与CE-B的客户eBGP会话。PE-B的全局配置ASN已从AS 64510更改为AS 64500，以使其成为永久保留ASN的一部分。这使得PE-B成为ISPA’的成员。PE-A是最初在ISP A中的一种PE，它有一个客户同行CE-A。虽然它的全局配置ASN保持为64500，但在整个练习中，我们也认为PE-A是ISP A’的成员。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
                    ISP A&#39;                    ISP A&#39;
              CE-A &lt;--- PE-A &lt;------------------- PE-B &lt;--- CE-B
              64499     New_ASN: 64500   Old_ASN: 64510     64496
                                         New_ASN: 64500
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
                    ISP A&#39;                    ISP A&#39;
              CE-A &lt;--- PE-A &lt;------------------- PE-B &lt;--- CE-B
              64499     New_ASN: 64500   Old_ASN: 64510     64496
                                         New_ASN: 64500
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-13">
Note: Direction of BGP UPDATE as per the arrows.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-13">
注：BGP更新方向如箭头所示。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-11">
Figure 3: Local AS and No Prepend BGP UPDATE Diagram
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-11">
图3：本地AS和无前置BGP更新图
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
As a result, using both the &#34;Local AS&#34; and &#34;No Prepend Inbound&#34; capabilities on PE-B, CE-A will see an AS_PATH of 64500 64496. CE-A will not receive a BGP UPDATE containing AS 64510 in the AS_PATH. (If only the &#34;Local AS&#34; mechanism was configured without &#34;No Prepend
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
因此，使用PE-B上的“本地As”和“无前置入站”功能，CE-a将看到As_路径为64500 64496。CE-A将不会收到AS_路径中包含AS 64510的BGP更新。（如果只配置了“本地AS”机制，而没有“无前置
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Inbound&#34; on PE-B, then CE-A would have seen an AS_PATH of 64500 64510 64496, which results in an unacceptable lengthening of the AS_PATH). Note: If there are still routers in the old ASN (64510), it is possible for them to accept these manipulated routes (i.e., those with 64510 removed from the AS_PATH by this command) as if they have not already passed through their ASN, potentially causing a loop, since BGP&#39;s normal loop-prevention behavior of rejecting routes that include its ASN in the path will not catch these. Careful filtering between routers remaining in the old ASN and routers migrated to the new ASN is necessary to minimize the risk of routing loops.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
PE-B上的“入站”，则CE-A将看到64500 64510 64496的AS_路径，这将导致AS_路径的不可接受的延长）。注意：如果旧ASN（64510）中仍有路由器，则它们可以接受这些被操纵的路由（即，通过此命令将64510从AS_路径中移除的路由）因为BGP拒绝路径中包含其ASN的路由的正常环路预防行为不会捕获这些路由，因此，如果它们尚未通过其ASN，则可能会导致环路。必须在保留在旧ASN中的路由器和迁移到新ASN的路由器之间进行仔细筛选，以将路由环路的风险降至最低。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.2. Modify Outbound BGP AS_PATH Attribute
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.2. 将出站BGP修改为_路径属性
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The two aforementioned mechanisms, &#34;Local AS&#34; and &#34;No Prepend Inbound&#34;, only modify the AS_PATH attribute received by the ISP&#39;s PEs in the course of processing BGP UPDATEs from CE devices when CE devices still have an eBGP session established with the ISPs legacy AS (AS64510).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
上述两种机制“本地AS”和“无前置入站”仅在CE设备仍与ISPs遗留AS（AS64510）建立eBGP会话时，在处理来自CE设备的BGP更新的过程中修改ISP的PE接收的AS_路径属性。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In some existing implementations, &#34;Local AS&#34; and &#34;No Prepend Inbound&#34; do not concurrently modify the AS_PATH attribute for BGP UPDATEs that are transmitted by the ISP&#39;s PEs to CE devices. In these implementations, with &#34;Local AS&#34; and &#34;No Prepend Inbound&#34; used on PE-B, there is an automatic lengthening of the AS_PATH in outbound BGP UPDATEs from ISP A&#39; toward directly attached eBGP speakers (customer C in AS 64496). The externally observed result is that customer C in AS 64496 will receive the following AS_PATH: 64510 64500 64499. Therefore, if ISP A&#39; takes no further action, there will be an unacceptable increase in the AS_PATH length within the customer&#39;s networks directly attached to ISP A&#39;.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在某些现有实现中，“本地AS”和“无前置入站”不会同时修改由ISP的PEs传输到CE设备的BGP更新的AS_路径属性。在这些实现中，在PE-B上使用“本地AS”和“无前置入站”时，从ISP A&#39;到直接连接的eBGP扬声器（AS 64496中的客户C）的出站BGP更新中会自动延长AS_路径。外部观察到的结果是AS 64496中的客户C将收到以下AS_路径：64510 64500 64499。因此，如果ISP A“不采取进一步行动，则直接连接到ISP A的客户网络内的AS_路径长度将出现不可接受的增加”。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A tertiary mechanism, referred to as &#34;Replace Old AS&#34;, is used to resolve this problem. This capability allows ISP A&#39; to prevent routers from appending the globally configured ASN in outbound BGP UPDATEs toward directly attached eBGP neighbors that are using the &#34;Local AS&#34; mechanism. Instead, only the old (or previously used) AS will be prepended in the outbound BGP UPDATE toward the customer&#39;s network, restoring the AS_PATH length to what it what was before AS Migration occurred.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
三级机构（称为“替换旧as”）用于解决此问题。此功能允许ISP A’防止路由器在出站BGP更新中向使用“本地AS”机制的直接连接eBGP邻居附加全局配置的ASN。相反，只有旧的（或以前使用的）AS将在针对客户网络的出站BGP更新中预先添加，从而将AS_路径长度恢复到迁移发生时的长度。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
To reuse the above diagram, but in the opposite direction, we have:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
要重复使用上图，但方向相反，我们有：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
                         ISP A&#39;                    ISP A&#39;
              CE-A ---&gt; PE-A -------------------&gt; PE-B ---&gt; CE-B
              64499     New_ASN: 64500   Old_ASN: 64510     64496
                                         New_ASN: 64500
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
                         ISP A&#39;                    ISP A&#39;
              CE-A ---&gt; PE-A -------------------&gt; PE-B ---&gt; CE-B
              64499     New_ASN: 64500   Old_ASN: 64510     64496
                                         New_ASN: 64500
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-13">
Note: Direction of BGP UPDATE as per the arrows.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-13">
注：BGP更新方向如箭头所示。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-18">
Figure 4: Replace AS BGP UPDATE Diagram
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-18">
图4：替换为BGP更新图
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
By default, without the use of &#34;Replace Old AS&#34;, CE-B would see an AS_PATH of 64510 64500 64499. After ISP A&#39; changes PE-B to use &#34;Replace Old AS&#34;, CE-B would receive an AS_PATH of 64510 64499, which is the same AS_PATH length pre-AS migration.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
默认情况下，如果不使用“替换旧AS”，CE-B将看到AS_路径为64510 64500 64499。ISP A’将PE-B更改为使用“替换旧AS”后，CE-B将收到64510 64499的AS_路径，该路径与AS迁移前的_路径长度相同。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.3. Implementation
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.3. 实施
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The mechanisms introduced in this section MUST be configurable on a per-neighbor or per-neighbor-group basis to allow for maximum flexibility. (Here, &#34;neighbor group&#34; refers to a group of similar BGP neighbor statements that reuse some common configuration to simplify provisioning.) When the &#34;Local AS&#34; capability is used, a local ASN will be provided in the configuration that is different from the globally configured ASN of the BGP router. To implement this mechanism, a BGP speaker SHOULD send BGP OPEN [RFC4271] (see Section 4.2) messages to the configured eBGP peer(s) using the local ASN configured for this session as the value sent in &#34;My Autonomous System&#34;. The BGP router SHOULD NOT use the ASN configured globally within the BGP process as the value sent in &#34;My Autonomous System&#34; in the OPEN message. This prevents causing the eBGP neighbor to unnecessarily generate a BGP OPEN Error message &#34;Bad Peer AS&#34;. This method is typically used to re-establish eBGP sessions with peers expecting the legacy ASN after a router has been moved to a new ASN.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本节中介绍的机制必须在每个邻居或每个邻居组的基础上进行配置，以实现最大的灵活性。（此处，“邻居组”指的是一组类似的BGP邻居语句，它们重用一些常用配置以简化配置。）使用“本地AS”功能时，将在配置中提供本地ASN，该配置不同于BGP路由器的全局配置ASN。为了实现该机制，BGP扬声器应使用为该会话配置的本地ASN作为“我的自主系统”中发送的值，向配置的eBGP对等方发送BGP OPEN[RFC4271]（参见第4.2节）消息。BGP路由器不应使用BGP进程中全局配置的ASN作为打开消息中“我的自治系统”中发送的值。这可防止导致eBGP邻居不必要地生成BGP OPEN错误消息“Bad Peer AS”。此方法通常用于在路由器移动到新的ASN后，与期望旧ASN的对等方重新建立eBGP会话。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Implementations MAY support a more flexible model where the eBGP speaker attempts to open the BGP session using either the ASN configured as &#34;Local AS&#34; or the globally configured AS as discussed in BGP Alias (Section 4.2). If the session is successfully established to the globally configured ASN, then the modifications to AS_PATH described in this document SHOULD NOT be performed, as they are unnecessary. The benefit to this more flexible model is that it allows the remote neighbor to reconfigure to the new ASN without direct coordination between the ISP and the customer.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
实施可能支持更灵活的模式，其中eBGP扬声器尝试使用配置为“本地as”的ASN或BGP Alias（第4.2节）中讨论的全局配置打开BGP会话。如果会话成功建立到全局配置的ASN，则不应执行本文档中描述的AS_路径修改，因为它们是不必要的。这种更灵活的模型的好处是，它允许远程邻居重新配置为新的ASN，而无需ISP和客户之间的直接协调。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Note that this procedure will vary slightly if the locally or globally configured ASN is a 4-octet ASN. See Section 3 of [RFC6793].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
请注意，如果本地或全局配置的ASN是4-octet ASN，则此过程将略有不同。见[RFC6793]第3节。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
When the BGP router receives UPDATEs from its eBGP neighbor configured with the &#34;Local AS&#34; mechanism, it processes the UPDATE as described in RFC4271 Section 5.1.2 [RFC4271]. However, the presence of a second ASN due to &#34;Local AS&#34; adds the following behavior to processing UPDATEs received from an eBGP neighbor configured with this mechanism:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
当BGP路由器从其配置有“本地AS”机制的eBGP邻居接收更新时，它将按照RFC4271第5.1.2节[RFC4271]中的说明处理更新。但是，由于“本地AS”而出现的第二个ASN在处理从配置了此机制的eBGP邻居接收的更新时增加了以下行为：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1. Internal: The router SHOULD append the configured &#34;Local AS&#34; ASN in the AS_PATH attribute before installing the route or advertising the UPDATE to an iBGP neighbor. The decision of when to append the ASN is an implementation detail outside the scope of this document. Some considerations factoring into this decision include consistency in the AS_PATH throughout the AS, and implementation of the loop detection mechanism.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1. 内部：路由器应在AS_路径属性中附加配置的“本地AS”ASN，然后再安装路由或向iBGP邻居公布更新。何时追加ASN的决定是本文档范围之外的一个实施细节。考虑到该决策的一些因素包括整个AS中AS_路径的一致性，以及循环检测机制的实现。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2. External: The BGP router SHOULD first append the globally configured ASN to the AS_PATH immediately followed by the &#34;Local AS&#34; value before advertising the UPDATE to an eBGP neighbor.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2. 外部：在向eBGP邻居公布更新之前，BGP路由器应首先将全局配置的ASN附加到AS_路径，紧接着是“本地AS”值。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Two options exist to manipulate the behavior of the basic &#34;Local AS&#34; mechanism. They modify the behavior as described below:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
存在两个选项来操纵基本“局部AS”机制的行为。它们修改行为，如下所述：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1. &#34;No Prepend Inbound&#34;: When the BGP router receives inbound BGP UPDATEs from its eBGP neighbor configured with this option, it MUST NOT append the &#34;Local AS&#34; ASN value in the AS_PATH attribute when installing the route or advertising that UPDATE to iBGP neighbors, but it MUST still append the globally configured ASN as normal when advertising the UPDATE to other local eBGP neighbors (i.e., those natively peering with the globally configured ASN).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1. “No Prepend Inbound”：当BGP路由器从配置了此选项的eBGP邻居接收到入站BGP更新时，在安装路由或向iBGP邻居播发更新时，不得在AS_路径属性中附加“Local AS”ASN值，但是，当向其他本地eBGP邻居（即，使用全局配置的ASN进行本机对等的邻居）播发更新时，它仍然必须像正常情况一样附加全局配置的ASN。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2. &#34;Replace Old AS&#34; (outbound): When the BGP router generates outbound BGP UPDATEs toward an eBGP neighbor configured with this option, the BGP speaker MUST NOT append the globally configured ASN from the AS_PATH attribute. The BGP router MUST append only the configured &#34;Local AS&#34; ASN value to the AS_PATH attribute before sending the BGP UPDATEs outbound to the eBGP neighbor.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2. “替换旧AS”（出站）：当BGP路由器向使用此选项配置的eBGP邻居生成出站BGP更新时，BGP扬声器不得从AS_路径属性附加全局配置的ASN。在将BGP更新发送到eBGP邻居之前，BGP路由器必须仅将配置的“本地AS”ASN值附加到AS_路径属性。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
4. Internal BGP Autonomous System Migration Mechanisms
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
4. 内部BGP自治系统迁移机制
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The following section describes mechanisms that assist with a gradual and least service-impacting migration of Internal BGP sessions from a legacy ASN to the permanently retained ASN. The following mechanism is very valuable to networks undergoing AS migration, but its use does not cause changes to the AS_PATH attribute.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
下一节介绍了一些机制，这些机制有助于逐步实现对内部BGP会话从传统ASN迁移到永久保留ASN的影响最小的服务。以下机制对于正在进行AS迁移的网络非常有用，但它的使用不会导致AS_路径属性的更改。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
4.1. Internal BGP AS Migration
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
4.1. 内部BGP AS迁移
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In this case, all of the routers to be consolidated into a single, permanently retained ASN are under the administrative control of a single entity. Unfortunately, the traditional method of migrating all Internal BGP speakers, particularly within larger networks, is both time-consuming and widely service impacting.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在这种情况下，所有要合并为一个永久保留的ASN的路由器都由一个实体进行管理控制。不幸的是，迁移所有内部BGP扬声器的传统方法，特别是在较大的网络中，既耗时又影响广泛的服务。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The traditional method to migrate Internal BGP sessions was strictly limited to reconfiguration of the global configuration ASN and, concurrently, changing all iBGP neighbors&#39; remote ASN from the legacy ASN to the new, permanently retained ASN on each router within the legacy AS. These changes can be challenging to swiftly execute in networks with more than a few dozen internal BGP routers. There are also the concomitant service interruptions as these changes are made to routers within the network, resulting in a reset of iBGP sessions and subsequent route reconvergence to reestablish optimal routing paths. Operators often cannot make such sweeping changes given the associated risks of a highly visible service interruption; rather, they require a more gradual method to migrate Internal BGP sessions, from one ASN to a second, permanently retained ASN, that is not visibly service impacting to its customers.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
迁移内部BGP会话的传统方法严格限于重新配置全局配置ASN，同时将所有iBGP邻居的远程ASN从传统ASN更改为传统AS中每个路由器上新的、永久保留的ASN。要在拥有几十个内部BGP路由器的网络中快速执行这些更改，可能会遇到挑战。当网络中的路由器发生这些变化时，也会伴随着服务中断，导致iBGP会话重置和随后的路由重新聚合，以重新建立最佳路由路径。考虑到服务中断的相关风险，运营商通常无法做出此类彻底的改变；相反，它们需要一种更为渐进的方法来将内部BGP会话从一个ASN迁移到另一个永久保留的ASN，这不会明显影响其客户的服务。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
With the &#34;Internal BGP AS Migration&#34; mechanism described herein, it allows an Internal BGP speaker to form a single iBGP session using either the old, legacy ASN or the new, permanently retained ASN. The benefits of using this mechanism are several fold. First, it allows for a more gradual and less service-impacting migration away from the legacy ASN to the permanently retained ASN. Second, it (temporarily) permits the coexistence of the legacy and permanently retained ASN within a single network, allowing for uniform BGP path selection among all routers within the consolidated network.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
通过本文描述的“内部BGP AS迁移”机制，它允许内部BGP演讲者使用旧的、遗留的ASN或新的、永久保留的ASN形成单个iBGP会话。使用这种机制的好处是多方面的。首先，它允许从遗留ASN迁移到永久保留ASN的过程更加渐进，对服务的影响更小。其次，它（暂时）允许遗留和永久保留的ASN在单个网络中共存，允许在整合网络中的所有路由器之间进行统一的BGP路径选择。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The iBGP router with the &#34;Internal BGP AS Migration&#34; capability enabled allows the receipt of a BGP OPEN message with either the legacy ASN value or the new, globally configured ASN value in the &#34;My Autonomous System&#34; field of the BGP OPEN message from iBGP neighbors. It is important to recognize that enablement of the &#34;Internal BGP AS Migration&#34; mechanism preserves the semantics of a regular iBGP session (i.e., using identical ASNs). Thus, the BGP attributes transmitted by and the acceptable methods of operation on BGP attributes received from iBGP sessions configured with &#34;Internal BGP AS Migration&#34; capability are no different than those exchanged across an iBGP session without &#34;Internal BGP AS Migration&#34; configured, as defined by [RFC4271] and [RFC4456].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
启用了“内部BGP AS迁移”功能的iBGP路由器允许接收来自iBGP邻居的BGP OPEN消息的“我的自治系统”字段中具有传统ASN值或新的全局配置ASN值的BGP OPEN消息。必须认识到，“内部BGP作为迁移”机制的启用保留了常规iBGP会话的语义（即使用相同的ASN）。因此，由配置了“内部BGP作为迁移”功能的iBGP会话发送的BGP属性和从iBGP会话接收的BGP属性上可接受的操作方法与未配置“内部BGP作为迁移”的iBGP会话上交换的BGP属性没有什么不同，如[RFC4271]和[RFC4456]所定义。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Typically, in medium to large networks, BGP Route Reflectors (RRs) [RFC4456] are used to aid in reduction of configuration of iBGP sessions and scalability with respect to overall TCP (and BGP) session maintenance between adjacent iBGP routers. Furthermore, BGP Route Reflectors are typically deployed in pairs within a single Route Reflection cluster to ensure high reliability of the BGP Control Plane. As such, the following example will use Route Reflectors to aid in understanding the use of the &#34;Internal BGP AS Migration&#34; mechanism. Note that Route Reflectors are not a prerequisite to enable &#34;Internal BGP AS Migration&#34; and this mechanism can be enabled independent of the use of Route Reflectors.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
通常，在中大型网络中，BGP路由反射器（RRs）[RFC4456]用于帮助减少iBGP会话的配置，以及在相邻iBGP路由器之间的总体TCP（和BGP）会话维护方面的可伸缩性。此外，BGP路由反射器通常成对部署在单个路由反射集群内，以确保BGP控制平面的高可靠性。因此，下面的示例将使用路由反射器来帮助理解“内部BGP作为迁移”机制的使用。请注意，路由反射器不是启用“内部BGP AS迁移”的先决条件，可以独立于路由反射器的使用启用此机制。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The general order of operations is as follows:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
一般操作顺序如下：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1. Within the legacy network, (the routers comprising the set of devices that still have a globally configured legacy ASN), one member of a redundant pair of RRs has its global configuration ASN changed to the permanently retained ASN. Concurrently, the &#34;Internal BGP AS Migration&#34; capability is enabled on all iBGP sessions on that device. This will comprise Non-Client iBGP sessions to other RRs as well as Client iBGP sessions, typically to PE devices, both still utilizing the legacy ASN. Note that during this step there will be a reset and reconvergence event on all iBGP sessions on the RRs whose configuration was modified; however, this should not be service impacting due to the use of redundant RRs in each RR Cluster.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1. 在传统网络内（路由器包括仍具有全局配置的传统ASN的设备集），冗余RRs对的一个成员将其全局配置ASN更改为永久保留的ASN。同时，该设备上的所有iBGP会话都启用了“内部BGP AS迁移”功能。这将包括到其他RRs的非客户端iBGP会话以及客户端iBGP会话，通常是到PE设备的会话，两者都仍然使用传统ASN。请注意，在该步骤中，其配置被修改的RRs上的所有iBGP会话将发生重置和重新聚合事件；但是，这不应该因为在每个RR集群中使用冗余RRs而影响服务。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2. The above step is repeated for the other side of the redundant pair of RRs. The one alteration to the above procedure is that the &#34;Internal BGP AS Migration&#34; mechanism is now removed from the Non-Client iBGP sessions toward the other (previously reconfigured) RRs, since it is no longer needed. The &#34;Internal BGP AS Migration&#34; mechanism is still required on all RRs for all RR Client iBGP sessions. Also during this step, there will be a reset and reconvergence event on all iBGP sessions whose configuration was modified, but this should not be service impacting. At the conclusion of this step, all RRs will have their globally configured ASN set to the permanently retained ASN and &#34;Internal BGP AS Migration&#34; enabled and in use toward RR Clients.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2. 对冗余RRs对的另一侧重复上述步骤。对上述过程的一个改动是，“内部BGP AS迁移”机制现在从非客户端iBGP会话中向其他（以前重新配置的）RRs移除，因为不再需要它。所有RR客户端iBGP会话的所有RRs上仍然需要“内部BGP AS迁移”机制。此外，在此步骤中，配置被修改的所有iBGP会话上都会发生重置和重新聚合事件，但这不会影响服务。在该步骤结束时，所有RRs将其全局配置的ASN设置为永久保留的ASN，并启用“内部BGP AS迁移”，并用于RR客户端。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
3. At this point, the network administrators would then be able to establish iBGP sessions between all Route Reflectors in both the legacy and permanently retained networks. This would allow the network to appear to function, both internally and externally, as a single, consolidated network using the permanently retained network.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
3. 此时，网络管理员将能够在遗留网络和永久保留网络中的所有路由反射器之间建立iBGP会话。这将使网络在内部和外部都可以作为一个使用永久保留网络的单一整合网络运行。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
4. To complete the AS migration, each RR Client (PE) in the legacy network still utilizing the legacy ASN is now modified. Specifically, each legacy PE would have its globally configured ASN changed to use the permanently retained ASN. The ASN configured within the PE for the iBGP sessions toward each RR would be changed to use the permanently retained ASN. It is unnecessary to enable the &#34;Internal BGP AS Migration&#34; mechanism on these migrated iBGP sessions. During the same maintenance window, External BGP sessions would be modified to include the above &#34;Local AS&#34;, &#34;No Prepend&#34;, and &#34;Replace Old AS&#34; mechanisms described in Section 3 above, since all of the changes are service interrupting to the eBGP sessions of the PE. At this point, all PEs will have been migrated to the permanently retained ASN.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
4. 为了完成AS迁移，现在修改遗留网络中仍然使用遗留ASN的每个RR客户端（PE）。具体地说，每个遗留PE都会将其全局配置的ASN更改为使用永久保留的ASN。PE中针对每个RR的iBGP会话配置的ASN将更改为使用永久保留的ASN。在这些迁移的iBGP会话上不需要启用“内部BGP作为迁移”机制。在同一维护窗口期间，外部BGP会话将被修改，以包括上文第3节所述的上述“本地AS”、“无前置”和“替换旧AS”机制，因为所有更改都是对PE的eBGP会话的服务中断。此时，所有PEs将迁移到永久保留的ASN。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
5. The final step is to excise the &#34;Internal BGP AS Migration&#34; configuration from the Router Reflectors in an orderly fashion. After this is complete, all routers in the network will be using the new, permanently retained ASN for all iBGP sessions with no vestiges of the legacy ASN on any iBGP sessions.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
5. 最后一步是有序地从路由器反射器中删除“内部BGP AS迁移”配置。完成后，网络中的所有路由器将在所有iBGP会话中使用新的、永久保留的ASN，在任何iBGP会话中都没有遗留ASN的痕迹。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The benefit of using the aforementioned &#34;Internal BGP AS Migration&#34; capability is that it is a more gradual and less externally service impacting change to accomplish an AS migration. Previously, without &#34;Internal BGP AS Migration&#34;, such an AS migration change would carry a high risk and need to be successfully accomplished in a very short time frame (e.g., at most several hours). In addition, it would likely cause substantial routing churn and rapid fluctuations in traffic carried -- potentially causing periods of congestion and resultant packet loss -- during the period when the configuration changes are underway to complete the AS Migration. On the other hand, with &#34;Internal BGP AS Migration&#34;, the migration from the legacy ASN to the permanently retained ASN can occur over a period of days or weeks with reduced customer disruption. (The only observable service disruption should be when each PE undergoes the changes discussed in step 4 above.)
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
使用上述“内部BGP AS迁移”功能的好处是，完成AS迁移是一种更加渐进的、对外部服务影响较小的更改。以前，如果没有“内部BGP AS迁移”，例如AS迁移更改将带来高风险，并且需要在很短的时间内（例如，最多几个小时）成功完成。此外，在进行配置更改以完成AS迁移的过程中，它可能会导致大量路由搅动和所携带流量的快速波动，这可能会导致拥塞和由此产生的数据包丢失。另一方面，通过“内部BGP作为迁移”，从传统ASN到永久保留ASN的迁移可以在几天或几周内完成，从而减少客户中断。（唯一可观察到的服务中断应该是当每个PE发生上述步骤4中讨论的变化时。）
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
4.2. Implementation
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
4.2. 实施
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The mechanism introduced in this section MUST be configurable on a per-neighbor or per-neighbor-group basis to allow for maximum flexibility. When configured with this mechanism, a BGP speaker MUST accept BGP OPEN and establish an iBGP session from configured iBGP peers if the ASN value in &#34;My Autonomous System&#34; is either the globally configured ASN or a locally configured ASN provided when this capability is utilized. Additionally, a BGP router configured with this mechanism MUST send its own BGP OPEN [RFC4271] (see Section 4.2) using either the globally configured or the locally
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本节中介绍的机制必须在每个邻居或每个邻居组的基础上进行配置，以实现最大的灵活性。使用此机制配置时，如果“我的自治系统”中的ASN值是使用此功能时提供的全局配置ASN或本地配置ASN，则BGP演讲者必须接受BGP OPEN并从配置的iBGP对等方建立iBGP会话。此外，配置此机制的BGP路由器必须使用全局配置的或本地配置的方式发送其自己的BGP OPEN[RFC4271]（参见第4.2节）
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
configured ASN in &#34;My Autonomous System&#34; as follows. To avoid potential deadlocks when two BGP speakers are attempting to establish a BGP peering session and are both configured with this mechanism, the speaker SHOULD send BGP OPEN using the globally configured ASN first, and only send a BGP OPEN using the locally configured ASN as a fallback if the remote neighbor responds with the BGP error &#34;Bad Peer AS&#34;. In each case, the BGP speaker MUST treat UPDATEs sent and received to this peer as if this was a natively configured iBGP session, as defined by [RFC4271] and [RFC4456].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在“我的自治系统”中配置ASN，如下所示。为了避免在两个BGP扬声器试图建立BGP对等会话且均配置了此机制时出现潜在死锁，扬声器应首先使用全局配置的ASN发送BGP OPEN，如果远程邻居响应BGP错误，则仅使用本地配置的ASN发送BGP OPEN作为回退“坏对等体为”。在每种情况下，BGP演讲者必须将发送和接收到此对等体的更新视为[RFC4271]和[RFC4456]定义的本机配置的iBGP会话。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Note that this procedure will vary slightly if the locally or globally configured ASN is a 4-octet ASN. See Section 3 of [RFC6793].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
请注意，如果本地或全局配置的ASN是4-octet ASN，则此过程将略有不同。见[RFC6793]第3节。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5. Additional Operational Considerations
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5. 其他操作注意事项
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document describes several mechanisms to support ISPs and other organizations that need to perform ASN migrations. Other variations of these mechanisms may exist, for example, in legacy router software that has not been upgraded or reached End of Life, but continues to operate in the network. Such variations are beyond the scope of this document.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本文档介绍了支持ISP和其他需要执行ASN迁移的组织的几种机制。这些机制的其他变体可能存在，例如，在未升级或未达到使用寿命终点但仍在网络中运行的遗留路由器软件中。此类变更超出了本文件的范围。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Companies routinely go through periods of mergers, acquisitions, and divestitures, which in the case of the former cause them to accumulate several legacy ASNs over time. ISPs often do not have control over the configuration of customers&#39; devices (i.e., the ISPs are often not providing a managed CE router service, particularly to medium and large customers that require eBGP). Furthermore, ISPs are using methods to perform ASN migration that do not require coordination with customers. Ultimately, this means there is not a finite period of time after which legacy ASNs will be completely expunged from the ISP&#39;s network. In fact, it is common that legacy ASNs and the associated External BGP AS Migration mechanisms discussed in this document can and do persist for several years, if not longer. Thus, it is prudent to plan that legacy ASNs and associated External BGP AS Migration mechanisms will persist in an operational network indefinitely.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
公司通常会经历合并、收购和资产剥离的时期，在前者的情况下，这会导致公司随着时间的推移积累一些遗留的ASN。ISP通常无法控制客户设备的配置（即，ISP通常不提供托管CE路由器服务，尤其是对需要eBGP的中大型客户）。此外，ISP正在使用不需要与客户协调的方法来执行ASN迁移。最终，这意味着不会有一段有限的时间，在这段时间之后，传统的ASN将从ISP的网络中完全删除。事实上，本文档中讨论的遗留ASN和相关的外部BGP AS迁移机制可以并且确实可以持续几年（如果不是更长的话）。因此，谨慎的做法是，计划遗留ASN和相关的外部BGP AS迁移机制将无限期地持续存在于可运行网络中。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
With respect to the Internal BGP AS Migration mechanism, all of the routers to be consolidated into a single, permanently retained ASN are under the administrative control of a single entity. Thus, completing the migration from iBGP sessions using the legacy ASN to the permanently retained ASN is more straightforward and could be accomplished in a matter of days to months. Finally, good operational hygiene would dictate that it is good practice to avoid using &#34;Internal BGP AS Migration&#34; capability over a long period of time for reasons of not only operational simplicity of the network,
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
关于内部BGP AS迁移机制，所有要合并为一个永久保留ASN的路由器都由一个实体进行管理控制。因此，使用遗留ASN完成从iBGP会话到永久保留ASN的迁移更加简单，可以在几天到几个月内完成。最后，良好的操作卫生要求避免长时间使用“内部BGP作为迁移”功能，这不仅是因为网络的操作简单，
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
but also reduced reliance on that mechanism during the ongoing life cycle management of software, features, and configurations that are maintained on the network.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
而且还减少了在网络上维护的软件、功能和配置的持续生命周期管理期间对该机制的依赖。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6. Security Considerations
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6. 安全考虑
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document discusses a process by which one ASN is migrated into and subsumed by another. This involves manipulating the AS_PATH attribute with the intent of not increasing the AS_PATH length, which would typically cause the BGP route to no longer be selected by BGP&#39;s Path Selection Algorithm in others&#39; networks. This could result in sudden and unexpected shifts in traffic patterns in the network, potentially resulting in congestion.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本文档讨论一个ASN迁移到另一个ASN并被另一个ASN包含的过程。这涉及操纵AS_路径属性，目的是不增加AS_路径长度，这通常会导致BGP路由不再由其他网络中的BGP路径选择算法选择。这可能导致网络中的流量模式发生突然和意外的变化，可能导致拥塞。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Given that these mechanisms can only be enabled through configuration of routers within a single network, standard security measures should be taken to restrict access to the management interface(s) of routers that implement these mechanisms. Additionally, BGP sessions SHOULD be protected using TCP Authentication Option [RFC5925] and the Generalized TTL Security Mechanism [RFC5082]
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
由于这些机制只能通过在单个网络中配置路由器来启用，因此应采取标准的安全措施来限制对实现这些机制的路由器的管理接口的访问。此外，应使用TCP身份验证选项[RFC5925]和通用TTL安全机制[RFC5082]保护BGP会话
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
7. References
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
7. 工具书类
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
7.1. Normative References
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
7.1. 规范性引用文件
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC2119] Bradner, S., &#34;Key words for use in RFCs to Indicate Requirement Levels&#34;, BCP 14, RFC 2119, DOI 10.17487/RFC2119, March 1997, &lt;http://www.rfc-editor.org/info/rfc2119&gt;.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC2119]Bradner，S.，“RFC中用于表示需求水平的关键词”，BCP 14，RFC 2119，DOI 10.17487/RFC2119，1997年3月&lt;http://www.rfc-editor.org/info/rfc2119&gt;.
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC4271] Rekhter, Y., Ed., Li, T., Ed., and S. Hares, Ed., &#34;A Border Gateway Protocol 4 (BGP-4)&#34;, RFC 4271, DOI 10.17487/RFC4271, January 2006, &lt;http://www.rfc-editor.org/info/rfc4271&gt;.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC4271]Rekhter，Y.，Ed.，Li，T.，Ed.，和S.Hares，Ed.，“边境网关协议4（BGP-4）”，RFC 4271，DOI 10.17487/RFC4271，2006年1月&lt;http://www.rfc-editor.org/info/rfc4271&gt;.
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC4456] Bates, T., Chen, E., and R. Chandra, &#34;BGP Route Reflection: An Alternative to Full Mesh Internal BGP (IBGP)&#34;, RFC 4456, DOI 10.17487/RFC4456, April 2006, &lt;http://www.rfc-editor.org/info/rfc4456&gt;.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC4456]Bates，T.，Chen，E.和R.Chandra，“BGP路由反射：全网格内部BGP（IBGP）的替代方案”，RFC 4456，DOI 10.17487/RFC4456，2006年4月&lt;http://www.rfc-editor.org/info/rfc4456&gt;.
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
7.2. Informative References
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
7.2. 资料性引用
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[ALU] Alcatel-Lucent, &#34;BGP Local AS attribute&#34;, 2006-2012, &lt;https://infoproducts.alcatel-lucent.com/html/0_add-h-f/ 93-0074-10-01/7750_SR_OS_Routing_Protocols_Guide/ BGP-CLI.html#709567&gt;.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[ALU]阿尔卡特朗讯，“BGP本地属性”，2006-2012年&lt;https://infoproducts.alcatel-lucent.com/html/0_add-h-f/ 93-0074-10-01/7750_SR_OS_Routing_Protocols_Guide/BGP-CLI.html#709567&gt;。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[CISCO] Cisco Systems, Inc., &#34;BGP Support for Dual AS Configuration for Network AS Migrations&#34;, 2013, &lt;http://www.cisco.com/c/en/us/td/docs/ios-xml/ ios/iproute_bgp/configuration/xe-3s/asr1000/ irg-xe-3s-asr1000-book/irg-dual-as.html&gt;.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[CISCO]CISCO Systems，Inc.，“网络AS迁移的双AS配置BGP支持”，2013年&lt;http://www.cisco.com/c/en/us/td/docs/ios-xml/ ios/iproute_bgp/configuration/xe-3s/asr1000/irg-xe-3s-asr1000-book/irg dual as.html&gt;。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[JUNIPER] Juniper Networks, Inc., &#34;Understanding the BGP Local AS Attribute&#34;, December 2013, &lt;http://www.juniper.net/techpubs/en_US/junos13.3/topics/ concept/bgp-local-as-introduction.html&gt;.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[JUNIPER]JUNIPER Networks，Inc.“理解BGP本地AS属性”，2013年12月&lt;http://www.juniper.net/techpubs/en_US/junos13.3/topics/ concept/bgp local as introduction.html&gt;。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC5065] Traina, P., McPherson, D., and J. Scudder, &#34;Autonomous System Confederations for BGP&#34;, RFC 5065, DOI 10.17487/RFC5065, August 2007, &lt;http://www.rfc-editor.org/info/rfc5065&gt;.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC5065]Traina，P.，McPherson，D.，和J.Scudder，“BGP自治系统联合会”，RFC 5065，DOI 10.17487/RFC5065，2007年8月&lt;http://www.rfc-editor.org/info/rfc5065&gt;.
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC5082] Gill, V., Heasley, J., Meyer, D., Savola, P., Ed., and C. Pignataro, &#34;The Generalized TTL Security Mechanism (GTSM)&#34;, RFC 5082, DOI 10.17487/RFC5082, October 2007, &lt;http://www.rfc-editor.org/info/rfc5082&gt;.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC5082]Gill，V.，Heasley，J.，Meyer，D.，Savola，P.，Ed.，和C.Pignataro，“广义TTL安全机制（GTSM）”，RFC 5082，DOI 10.17487/RFC5082，2007年10月&lt;http://www.rfc-editor.org/info/rfc5082&gt;.
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC5398] Huston, G., &#34;Autonomous System (AS) Number Reservation for Documentation Use&#34;, RFC 5398, DOI 10.17487/RFC5398, December 2008, &lt;http://www.rfc-editor.org/info/rfc5398&gt;.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC5398]Huston，G.“文件使用的自主系统（AS）号码保留”，RFC 5398，DOI 10.17487/RFC5398，2008年12月&lt;http://www.rfc-editor.org/info/rfc5398&gt;.
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC5925] Touch, J., Mankin, A., and R. Bonica, &#34;The TCP Authentication Option&#34;, RFC 5925, DOI 10.17487/RFC5925, June 2010, &lt;http://www.rfc-editor.org/info/rfc5925&gt;.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC5925]Touch，J.，Mankin，A.，和R.Bonica，“TCP认证选项”，RFC 5925，DOI 10.17487/RFC5925，2010年6月&lt;http://www.rfc-editor.org/info/rfc5925&gt;.
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC6793] Vohra, Q. and E. Chen, &#34;BGP Support for Four-Octet Autonomous System (AS) Number Space&#34;, RFC 6793, DOI 10.17487/RFC6793, December 2012, &lt;http://www.rfc-editor.org/info/rfc6793&gt;.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC6793]Vohra，Q.和E.Chen，“BGP对四个八位组自治系统（AS）数字空间的支持”，RFC 6793，DOI 10.17487/RFC6793，2012年12月&lt;http://www.rfc-editor.org/info/rfc6793&gt;.
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC6996] Mitchell, J., &#34;Autonomous System (AS) Reservation for Private Use&#34;, BCP 6, RFC 6996, DOI 10.17487/RFC6996, July 2013, &lt;http://www.rfc-editor.org/info/rfc6996&gt;.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC6996]Mitchell，J.，“供私人使用的自主系统（AS）预订”，BCP 6，RFC 6996，DOI 10.17487/RFC6996，2013年7月&lt;http://www.rfc-editor.org/info/rfc6996&gt;.
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
Appendix A. Implementation Report
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
附录A.实施报告
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
As noted elsewhere in this document, this set of migration mechanisms has multiple existing implementations in wide use.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
如本文档其他部分所述，这组迁移机制有多个广泛使用的现有实现。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Cisco [CISCO]
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 思科[思科]
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Juniper [JUNIPER]
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 刺柏
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Alcatel-Lucent [ALU]
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 阿尔卡特朗讯[ALU]
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This is not intended to be an exhaustive list, as equivalent features do exist in other implementations; however, the authors were unable to find publicly available documentation of the vendor-specific implementation to reference.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
这并不是一个详尽的列表，因为在其他实现中确实存在等效的特性；然而，作者无法找到公开的供应商特定实施的文件以供参考。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Acknowledgements
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
致谢
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Thanks to Kotikalapudi Sriram, Stephane Litkowski, Terry Manderson, David Farmer, Jaroslaw Adam Gralak, Gunter Van de Velde, Juan Alcaide, Jon Mitchell, Thomas Morin, Alia Atlas, Alvaro Retana, and John Scudder for their comments.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
感谢Kotikalapudi Sriram、Stephane Litkowski、Terry Manderson、David Farmer、Jaroslaw Adam Gralak、Gunter Van de Velde、Juan Alcaide、Jon Mitchell、Thomas Morin、Alia Atlas、Alvaro Retana和John Scudder的评论。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Authors&#39; Addresses
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
作者地址
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Wesley George Time Warner Cable 13820 Sunrise Valley Drive Herndon, VA 20171 United States
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
韦斯利·乔治·时代华纳有线电视13820美国弗吉尼亚州赫恩登日出谷大道20171
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   Phone: +1 703-561-2540
   Email: wesley.george@twcable.com
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   Phone: +1 703-561-2540
   Email: wesley.george@twcable.com
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Shane Amante Apple, Inc. 1 Infinite Loop Cupertino, CA 95014 United States
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
美国加利福尼亚州库珀蒂诺市无限环路1号Shane Amante苹果公司，邮编95014
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   Email: amante@apple.com
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   Email: amante@apple.com
        </pre>
      </div>

    </div>
  </div>
  <div id="rfc_footer"></div>
</body>
</html>
