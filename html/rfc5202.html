<!DOCTYPE html>

<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name='description' content="RFC 5202: Using the Encapsulating Security Payload (ESP) Transport Format with the Host Identity Protocol (HIP)中文翻译 中文RFC RFC文档 RFC翻译 RFC中文版">
  <title>RFC5202 中文翻译 中文RFC RFC文档 RFC翻译 RFC中文版</title>

  <link rel="shortcut icon" type="image/x-icon"
    href="favicon.ico" />

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

  <link rel="stylesheet" href="master.css">
  <script src="index.js"></script>
  <script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?b7f7721ebaa11b23aaf77df0590e7f4a";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();
  </script>
  <script data-ad-client="ca-pub-9129771189441092" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  
</head>
<body>
  <nav class="navbar navbar-expand navbar-light bg-light">
    <a class="navbar-brand" href="index.html">RFC2CN</a>
    <div class="collapse navbar-collapse" id="navbarText">
      <div class="navbar-nav mr-auto">
        <a class="nav-item nav-link" href="about.html">关于</a>
      </div>
    </div>
  </nav>

  <span id="rfc_number" class="hidden">5202</span>
  <div style="height: 1ex;"></div>
  <div class="jump-to-original-rfc-container">
    <a href="https://datatracker.ietf.org/doc/html/rfc5202">
      <button type="button" class="btn btn-light btn-sm">
        <span class="jump-to-original-rfc">Orig</span>
      </button>
    </a>
  </div>
  <div class="container">
    <div class="row">
      <div id="rfc_header" class="col-sm-12 col-md-12">
        <div class="alert alert-info" role="alert">
          <h1 class="alert-heading">RFC 5202: Using the Encapsulating Security Payload (ESP) Transport Format with the Host Identity Protocol (HIP) 中文翻译</h1>
          <span class="URL">URL :
            <a href="https://datatracker.ietf.org/doc/html/rfc5202">
              https://datatracker.ietf.org/doc/html/rfc5202
            </a>
          </span><br>
          <span class="title_ja">
            标题 : <strong>RFC 5202</strong></span><br>
          <span class="updated_by">翻译类型 : 自动生成</span><br>
        </div>
      </div>
      <div id="rfc_alert" class="col-sm-12 col-md-12 hidden" role="alert">
        <div class="alert alert-danger">
          <span id="rfc_alert_obsoleted_by"></span>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
Network Working Group                                          P. Jokela
Request for Comments: 5202                  Ericsson Research NomadicLab
Category: Experimental                                      R. Moskowitz
                                                                ICSAlabs
                                                             P. Nikander
                                            Ericsson Research NomadicLab
                                                              April 2008
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
Network Working Group                                          P. Jokela
Request for Comments: 5202                  Ericsson Research NomadicLab
Category: Experimental                                      R. Moskowitz
                                                                ICSAlabs
                                                             P. Nikander
                                            Ericsson Research NomadicLab
                                                              April 2008
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Using the Encapsulating Security Payload (ESP) Transport Format with the Host Identity Protocol (HIP)
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
将封装安全有效负载（ESP）传输格式与主机标识协议（HIP）一起使用
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Status of This Memo
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
关于下段备忘
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This memo defines an Experimental Protocol for the Internet community. It does not specify an Internet standard of any kind. Discussion and suggestions for improvement are requested. Distribution of this memo is unlimited.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
这份备忘录为互联网社区定义了一个实验性协议。它没有规定任何类型的互联网标准。要求进行讨论并提出改进建议。本备忘录的分发不受限制。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
IESG Note
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
IESG注释
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The following issues describe IESG concerns about this document. The IESG expects that these issues will be addressed when future versions of HIP are designed.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
以下问题描述了IESG对本文件的关注。IESG期望在设计未来版本的HIP时解决这些问题。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In case of complex Security Policy Databases (SPDs) and the co-existence of HIP and security-related protocols such as IKE, implementors may encounter conditions that are unspecified in these documents. For example, when the SPD defines an IP address subnet to be protected and a HIP host is residing in that IP address area, there is a possibility that the communication is encrypted multiple times. Readers are advised to pay special attention when running HIP with complex SPD settings. Future specifications should clearly define when multiple encryption is intended, and when it should be avoided.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在复杂的安全策略数据库（SPD）以及HIP和安全相关协议（如IKE）共存的情况下，实现者可能会遇到这些文档中未指定的条件。例如，当SPD定义要保护的IP地址子网且HIP主机驻留在该IP地址区域时，通信可能被多次加密。建议读者在使用复杂SPD设置运行HIP时特别注意。未来的规范应明确规定何时打算进行多重加密，以及何时应避免多重加密。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Abstract
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
摘要
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This memo specifies an Encapsulated Security Payload (ESP) based mechanism for transmission of user data packets, to be used with the Host Identity Protocol (HIP).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
此备忘录指定了一种基于封装安全有效负载（ESP）的机制，用于传输用户数据包，与主机标识协议（HIP）一起使用。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Table of Contents
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
目录
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace toc">
   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  3
   2.  Conventions Used in This Document  . . . . . . . . . . . . . .  3
   3.  Using ESP with HIP . . . . . . . . . . . . . . . . . . . . . .  4
     3.1.  ESP Packet Format  . . . . . . . . . . . . . . . . . . . .  4
     3.2.  Conceptual ESP Packet Processing . . . . . . . . . . . . .  4
       3.2.1.  Semantics of the Security Parameter Index (SPI)  . . .  5
     3.3.  Security Association Establishment and Maintenance . . . .  6
       3.3.1.  ESP Security Associations  . . . . . . . . . . . . . .  6
       3.3.2.  Rekeying . . . . . . . . . . . . . . . . . . . . . . .  6
       3.3.3.  Security Association Management  . . . . . . . . . . .  7
       3.3.4.  Security Parameter Index (SPI) . . . . . . . . . . . .  7
       3.3.5.  Supported Transforms . . . . . . . . . . . . . . . . .  7
       3.3.6.  Sequence Number  . . . . . . . . . . . . . . . . . . .  8
       3.3.7.  Lifetimes and Timers . . . . . . . . . . . . . . . . .  8
     3.4.  IPsec and HIP ESP Implementation Considerations  . . . . .  8
   4.  The Protocol  . . . . . . . . . . . . . . . . . . . . . . . . . 9
     4.1.  ESP in HIP  . . . . . . . . . . . . . . . . . . . . . . . . 9
       4.1.1.  Setting Up an ESP Security Association  . . . . . . . . 9
       4.1.2.  Updating an Existing ESP SA  . . . . . . . . . . . . . 10
   5.  Parameter and Packet Formats . . . . . . . . . . . . . . . . . 10
     5.1.  New Parameters . . . . . . . . . . . . . . . . . . . . . . 11
       5.1.1.  ESP_INFO . . . . . . . . . . . . . . . . . . . . . . . 11
       5.1.2.  ESP_TRANSFORM  . . . . . . . . . . . . . . . . . . . . 13
       5.1.3.  NOTIFY Parameter . . . . . . . . . . . . . . . . . . . 14
     5.2.  HIP ESP Security Association Setup . . . . . . . . . . . . 14
       5.2.1.  Setup During Base Exchange . . . . . . . . . . . . . . 14
     5.3.  HIP ESP Rekeying . . . . . . . . . . . . . . . . . . . . . 16
       5.3.1.  Initializing Rekeying  . . . . . . . . . . . . . . . . 16
       5.3.2.  Responding to the Rekeying Initialization  . . . . . . 17
     5.4.  ICMP Messages  . . . . . . . . . . . . . . . . . . . . . . 17
       5.4.1.  Unknown SPI  . . . . . . . . . . . . . . . . . . . . . 17
   6.  Packet Processing  . . . . . . . . . . . . . . . . . . . . . . 18
     6.1.  Processing Outgoing Application Data . . . . . . . . . . . 18
     6.2.  Processing Incoming Application Data . . . . . . . . . . . 19
     6.3.  HMAC and SIGNATURE Calculation and Verification  . . . . . 19
     6.4.  Processing Incoming ESP SA Initialization (R1) . . . . . . 19
     6.5.  Processing Incoming Initialization Reply (I2)  . . . . . . 20
     6.6.  Processing Incoming ESP SA Setup Finalization (R2) . . . . 20
     6.7.  Dropping HIP Associations  . . . . . . . . . . . . . . . . 20
     6.8.  Initiating ESP SA Rekeying . . . . . . . . . . . . . . . . 20
     6.9.  Processing Incoming UPDATE Packets . . . . . . . . . . . . 22
       6.9.1.  Processing UPDATE Packet: No Outstanding Rekeying
               Request  . . . . . . . . . . . . . . . . . . . . . . . 22
     6.10. Finalizing Rekeying  . . . . . . . . . . . . . . . . . . . 23
     6.11. Processing NOTIFY Packets  . . . . . . . . . . . . . . . . 24
   7.  Keying Material  . . . . . . . . . . . . . . . . . . . . . . . 24
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace toc">
   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  3
   2.  Conventions Used in This Document  . . . . . . . . . . . . . .  3
   3.  Using ESP with HIP . . . . . . . . . . . . . . . . . . . . . .  4
     3.1.  ESP Packet Format  . . . . . . . . . . . . . . . . . . . .  4
     3.2.  Conceptual ESP Packet Processing . . . . . . . . . . . . .  4
       3.2.1.  Semantics of the Security Parameter Index (SPI)  . . .  5
     3.3.  Security Association Establishment and Maintenance . . . .  6
       3.3.1.  ESP Security Associations  . . . . . . . . . . . . . .  6
       3.3.2.  Rekeying . . . . . . . . . . . . . . . . . . . . . . .  6
       3.3.3.  Security Association Management  . . . . . . . . . . .  7
       3.3.4.  Security Parameter Index (SPI) . . . . . . . . . . . .  7
       3.3.5.  Supported Transforms . . . . . . . . . . . . . . . . .  7
       3.3.6.  Sequence Number  . . . . . . . . . . . . . . . . . . .  8
       3.3.7.  Lifetimes and Timers . . . . . . . . . . . . . . . . .  8
     3.4.  IPsec and HIP ESP Implementation Considerations  . . . . .  8
   4.  The Protocol  . . . . . . . . . . . . . . . . . . . . . . . . . 9
     4.1.  ESP in HIP  . . . . . . . . . . . . . . . . . . . . . . . . 9
       4.1.1.  Setting Up an ESP Security Association  . . . . . . . . 9
       4.1.2.  Updating an Existing ESP SA  . . . . . . . . . . . . . 10
   5.  Parameter and Packet Formats . . . . . . . . . . . . . . . . . 10
     5.1.  New Parameters . . . . . . . . . . . . . . . . . . . . . . 11
       5.1.1.  ESP_INFO . . . . . . . . . . . . . . . . . . . . . . . 11
       5.1.2.  ESP_TRANSFORM  . . . . . . . . . . . . . . . . . . . . 13
       5.1.3.  NOTIFY Parameter . . . . . . . . . . . . . . . . . . . 14
     5.2.  HIP ESP Security Association Setup . . . . . . . . . . . . 14
       5.2.1.  Setup During Base Exchange . . . . . . . . . . . . . . 14
     5.3.  HIP ESP Rekeying . . . . . . . . . . . . . . . . . . . . . 16
       5.3.1.  Initializing Rekeying  . . . . . . . . . . . . . . . . 16
       5.3.2.  Responding to the Rekeying Initialization  . . . . . . 17
     5.4.  ICMP Messages  . . . . . . . . . . . . . . . . . . . . . . 17
       5.4.1.  Unknown SPI  . . . . . . . . . . . . . . . . . . . . . 17
   6.  Packet Processing  . . . . . . . . . . . . . . . . . . . . . . 18
     6.1.  Processing Outgoing Application Data . . . . . . . . . . . 18
     6.2.  Processing Incoming Application Data . . . . . . . . . . . 19
     6.3.  HMAC and SIGNATURE Calculation and Verification  . . . . . 19
     6.4.  Processing Incoming ESP SA Initialization (R1) . . . . . . 19
     6.5.  Processing Incoming Initialization Reply (I2)  . . . . . . 20
     6.6.  Processing Incoming ESP SA Setup Finalization (R2) . . . . 20
     6.7.  Dropping HIP Associations  . . . . . . . . . . . . . . . . 20
     6.8.  Initiating ESP SA Rekeying . . . . . . . . . . . . . . . . 20
     6.9.  Processing Incoming UPDATE Packets . . . . . . . . . . . . 22
       6.9.1.  Processing UPDATE Packet: No Outstanding Rekeying
               Request  . . . . . . . . . . . . . . . . . . . . . . . 22
     6.10. Finalizing Rekeying  . . . . . . . . . . . . . . . . . . . 23
     6.11. Processing NOTIFY Packets  . . . . . . . . . . . . . . . . 24
   7.  Keying Material  . . . . . . . . . . . . . . . . . . . . . . . 24
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace toc">
   8.  Security Considerations  . . . . . . . . . . . . . . . . . . . 25
   9.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . . 25
   10. Acknowledgments  . . . . . . . . . . . . . . . . . . . . . . . 26
   11. References . . . . . . . . . . . . . . . . . . . . . . . . . . 26
     11.1. Normative references . . . . . . . . . . . . . . . . . . . 26
     11.2. Informative references . . . . . . . . . . . . . . . . . . 26
   Appendix A.  A Note on Implementation Options  . . . . . . . . . . 28
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace toc">
   8.  Security Considerations  . . . . . . . . . . . . . . . . . . . 25
   9.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . . 25
   10. Acknowledgments  . . . . . . . . . . . . . . . . . . . . . . . 26
   11. References . . . . . . . . . . . . . . . . . . . . . . . . . . 26
     11.1. Normative references . . . . . . . . . . . . . . . . . . . 26
     11.2. Informative references . . . . . . . . . . . . . . . . . . 26
   Appendix A.  A Note on Implementation Options  . . . . . . . . . . 28
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
1. Introduction
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
1. 介绍
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In the Host Identity Protocol Architecture [RFC4423], hosts are identified with public keys. The Host Identity Protocol [RFC5201] base exchange allows any two HIP-supporting hosts to authenticate each other and to create a HIP association between themselves. During the base exchange, the hosts generate a piece of shared keying material using an authenticated Diffie-Hellman exchange.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在主机标识协议体系结构[RFC4423]中，主机由公钥标识。主机标识协议[RFC5201]基本交换允许任何两个HIP支持主机相互验证，并在它们之间创建HIP关联。在基本交换期间，主机使用经过身份验证的Diffie-Hellman交换生成一段共享密钥材料。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The HIP base exchange specification [RFC5201] does not describe any transport formats or methods for user data to be used during the actual communication; it only defines that it is mandatory to implement the Encapsulated Security Payload (ESP) [RFC4303] based transport format and method. This document specifies how ESP is used with HIP to carry actual user data.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
HIP base exchange规范[RFC5201]未描述实际通信期间使用的用户数据的任何传输格式或方法；它仅定义必须实现基于封装安全有效负载（ESP）[RFC4303]的传输格式和方法。本文档规定了如何将ESP与HIP结合使用来携带实际用户数据。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
To be more specific, this document specifies a set of HIP protocol extensions and their handling. Using these extensions, a pair of ESP Security Associations (SAs) is created between the hosts during the base exchange. The resulting ESP Security Associations use keys drawn from the keying material (KEYMAT) generated during the base exchange. After the HIP association and required ESP SAs have been established between the hosts, the user data communication is protected using ESP. In addition, this document specifies methods to update an existing ESP Security Association.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
更具体地说，本文档指定了一组HIP协议扩展及其处理。使用这些扩展，在基本交换期间在主机之间创建一对ESP安全关联（SA）。生成的ESP安全关联使用从基本交换期间生成的键控材质（KEYMAT）中提取的键。在主机之间建立HIP关联和所需的ESP SA后，将使用ESP保护用户数据通信。此外，本文档指定了更新现有ESP安全关联的方法。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
It should be noted that representations of Host Identity are not carried explicitly in the headers of user data packets. Instead, the ESP Security Parameter Index (SPI) is used to indicate the right host context. The SPIs are selected during the HIP ESP setup exchange. For user data packets, ESP SPIs (in possible combination with IP addresses) are used indirectly to identify the host context, thereby avoiding any additional explicit protocol headers.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
应该注意的是，主机标识的表示没有显式地携带在用户数据包的报头中。相反，ESP安全参数索引（SPI）用于指示正确的主机上下文。在HIP ESP设置交换期间选择SPI。对于用户数据包，ESP SPI（可能与IP地址组合）被间接用于标识主机上下文，从而避免任何额外的显式协议头。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2. Conventions Used in This Document
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2. 本文件中使用的公约
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The key words &#34;MUST&#34;, &#34;MUST NOT&#34;, &#34;REQUIRED&#34;, &#34;SHALL&#34;, &#34;SHALL NOT&#34;, &#34;SHOULD&#34;, &#34;SHOULD NOT&#34;, &#34;RECOMMENDED&#34;, &#34;MAY&#34;, and &#34;OPTIONAL&#34; in this document are to be interpreted as described in RFC 2119 [RFC2119].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本文件中的关键词“必须”、“不得”、“要求”、“应”、“不应”、“应”、“不应”、“建议”、“可”和“可选”应按照RFC 2119[RFC2119]中所述进行解释。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3. Using ESP with HIP
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3. 在HIP中使用ESP
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The HIP base exchange is used to set up a HIP association between two hosts. The base exchange provides two-way host authentication and key material generation, but it does not provide any means for protecting data communication between the hosts. In this document, we specify the use of ESP for protecting user data traffic after the HIP base exchange. Note that this use of ESP is intended only for host-to-host traffic; security gateways are not supported.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
HIP base exchange用于在两个主机之间建立HIP关联。基本交换提供双向主机身份验证和密钥材料生成，但它不提供任何保护主机之间数据通信的方法。在本文档中，我们指定在HIP base exchange之后使用ESP来保护用户数据流量。请注意，ESP的使用仅用于主机到主机的通信；不支持安全网关。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
To support ESP use, the HIP base exchange messages require some minor additions to the parameters transported. In the R1 packet, the Responder adds the possible ESP transforms in a new ESP_TRANSFORM parameter before sending it to the Initiator. The Initiator gets the proposed transforms, selects one of those proposed transforms, and adds it to the I2 packet in an ESP_TRANSFORM parameter. In this I2 packet, the Initiator also sends the SPI value that it wants to be used for ESP traffic flowing from the Responder to the Initiator. This information is carried using the new ESP_INFO parameter. When finalizing the ESP SA setup, the Responder sends its SPI value to the Initiator in the R2 packet, again using ESP_INFO.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
为了支持ESP的使用，HIP base exchange消息需要对传输的参数进行一些小的添加。在R1数据包中，响应程序在将可能的ESP转换发送到启动器之前，将其添加到新的ESP_转换参数中。发起方获取建议的转换，选择其中一个建议的转换，并将其添加到ESP_转换参数中的I2数据包中。在这个I2数据包中，发起方还发送它希望用于从响应方流向发起方的ESP流量的SPI值。使用新的ESP_INFO参数携带此信息。当完成ESP SA设置时，响应程序再次使用ESP_信息将其SPI值发送到R2数据包中的启动器。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.1. ESP Packet Format
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.1. ESP数据包格式
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The ESP specification [RFC4303] defines the ESP packet format for IPsec. The HIP ESP packet looks exactly the same as the IPsec ESP transport format packet. The semantics, however, are a bit different and are described in more detail in the next subsection.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ESP规范[RFC4303]定义了IPsec的ESP数据包格式。HIP ESP数据包看起来与IPsec ESP传输格式数据包完全相同。但是，语义有点不同，将在下一小节中进行更详细的描述。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.2. Conceptual ESP Packet Processing
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.2. 概念ESP数据包处理
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ESP packet processing can be implemented in different ways in HIP. It is possible to implement it in a way that a standards compliant, unmodified IPsec implementation [RFC4303] can be used.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ESP数据包处理可以在HIP中以不同的方式实现。可以采用符合标准、未经修改的IPsec实现[RFC4303]的方式来实现它。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
When a standards compliant IPsec implementation that uses IP addresses in the SPD and Security Association Database (SAD) is used, the packet processing may take the following steps. For outgoing packets, assuming that the upper-layer pseudoheader has been built using IP addresses, the implementation recalculates upper-layer checksums using Host Identity Tags (HITs) and, after that, changes the packet source and destination addresses back to corresponding IP addresses. The packet is sent to the IPsec ESP for transport mode handling and from there the encrypted packet is sent to the network. When an ESP packet is received, the packet is first put to the IPsec ESP transport mode handling, and after decryption, the source and
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
当使用在SPD和安全关联数据库（SAD）中使用IP地址的符合标准的IPsec实现时，数据包处理可采取以下步骤。对于传出数据包，假设上层伪报头已使用IP地址构建，则实现使用主机标识标记（HITs）重新计算上层校验和，然后将数据包源地址和目标地址更改回相应的IP地址。数据包被发送到IPsec ESP进行传输模式处理，并从那里将加密数据包发送到网络。当收到ESP数据包时，该数据包首先被置于IPsec ESP传输模式处理，解密后，源和
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
destination IP addresses are replaced with HITs and finally, upper-layer checksums are verified before passing the packet to the upper layer.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
目标IP地址被替换为HITs，最后，在将数据包传递到上层之前，验证上层校验和。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
An alternative way to implement packet processing is the BEET (Bound End-to-End Tunnel) [ESP-BEET] mode. In BEET mode, the ESP packet is formatted as a transport mode packet, but the semantics of the connection are the same as for tunnel mode. The &#34;outer&#34; addresses of the packet are the IP addresses and the &#34;inner&#34; addresses are the HITs. For outgoing traffic, after the packet has been encrypted, the packet&#39;s IP header is changed to a new one that contains IP addresses instead of HITs, and the packet is sent to the network. When the ESP packet is received, the SPI value, together with the integrity protection, allow the packet to be securely associated with the right HIT pair. The packet header is replaced with a new header containing HITs, and the packet is decrypted.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
实现数据包处理的另一种方法是BEET（绑定端到端隧道）[ESP-BEET]模式。在BEET模式下，ESP数据包被格式化为传输模式数据包，但连接的语义与隧道模式相同。数据包的“外部”地址是IP地址，“内部”地址是命中数。对于传出流量，在对数据包进行加密后，数据包的IP报头将更改为包含IP地址而不是HITs的新报头，并将数据包发送到网络。当收到ESP数据包时，SPI值以及完整性保护允许数据包与右击对安全关联。数据包报头被一个包含点击的新报头替换，数据包被解密。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.2.1. Semantics of the Security Parameter Index (SPI)
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.2.1. 安全参数索引（SPI）的语义
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
SPIs are used in ESP to find the right Security Association for received packets. The ESP SPIs have added significance when used with HIP; they are a compressed representation of a pair of HITs. Thus, SPIs MAY be used by intermediary systems in providing services like address mapping. Note that since the SPI has significance at the receiver, only the &lt; DST, SPI &gt;, where DST is a destination IP address, uniquely identifies the receiver HIT at any given point of time. The same SPI value may be used by several hosts. A single &lt; DST, SPI &gt; value may denote different hosts and contexts at different points of time, depending on the host that is currently reachable at the DST.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
SPI在ESP中用于为接收到的数据包找到正确的安全关联。ESP SPI与HIP一起使用时具有更大的意义；它们是一对点击的压缩表示。因此，SPI可由中介系统用于提供诸如地址映射之类的服务。注意，由于SPI在接收器处具有重要意义，因此只有&lt;DST，SPI&gt;（其中DST是目的地IP地址）在任何给定时间点唯一地标识接收器命中。多台主机可能使用相同的SPI值。单个&lt;DST，SPI&gt;值可能表示不同时间点的不同主机和上下文，具体取决于当前可在DST访问的主机。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Each host selects for itself the SPI it wants to see in packets received from its peer. This allows it to select different SPIs for different peers. The SPI selection SHOULD be random; the rules of Section 2.1 of the ESP specification [RFC4303] must be followed. A different SPI SHOULD be used for each HIP exchange with a particular host; this is to avoid a replay attack. Additionally, when a host rekeys, the SPI MUST be changed. Furthermore, if a host changes over to use a different IP address, it MAY change the SPI.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
每个主机为自己选择它希望在从其对等机接收的数据包中看到的SPI。这允许它为不同的对等点选择不同的SPI。SPI选择应是随机的；必须遵守ESP规范[RFC4303]第2.1节的规定。与特定主机的每次髋关节置换应使用不同的SPI；这是为了避免重播攻击。此外，当主机重新设置密钥时，必须更改SPI。此外，如果主机切换为使用不同的IP地址，则可能会更改SPI。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
One method for SPI creation that meets the above criteria would be to concatenate the HIT with a 32-bit random or sequential number, hash this (using SHA1), and then use the high-order 32 bits as the SPI.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
符合上述标准的SPI创建方法之一是将命中与32位随机数或序列号连接起来，对此进行散列（使用SHA1），然后使用高阶32位作为SPI。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The selected SPI is communicated to the peer in the third (I2) and fourth (R2) packets of the base HIP exchange. Changes in SPI are signaled with ESP_INFO parameters.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
所选择的SPI在基本HIP交换的第三（I2）和第四（R2）分组中被传送给对等方。SPI的变化通过ESP_信息参数发出信号。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.3. Security Association Establishment and Maintenance
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.3. 安全协会的建立和维持
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.3.1. ESP Security Associations
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.3.1. ESP安全协会
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In HIP, ESP Security Associations are setup between the HIP nodes during the base exchange [RFC5201]. Existing ESP SAs can be updated later using UPDATE messages. The reason for updating the ESP SA later can be, for example, a need for rekeying the SA because of sequence number rollover.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在HIP中，在基本交换期间，在HIP节点之间建立ESP安全关联[RFC5201]。以后可以使用更新消息更新现有ESP SAs。稍后更新ESP SA的原因可能是，例如，由于序列号滚动，需要重新设置SA的密钥。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Upon setting up a HIP association, each association is linked to two ESP SAs, one for incoming packets and one for outgoing packets. The Initiator&#39;s incoming SA corresponds with the Responder&#39;s outgoing one, and vice versa. The Initiator defines the SPI for its incoming association, as defined in Section 3.2.1. This SA is herein called SA-RI, and the corresponding SPI is called SPI-RI. Respectively, the Responder&#39;s incoming SA corresponds with the Initiator&#39;s outgoing SA and is called SA-IR, with the SPI being called SPI-IR.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
建立HIP关联后，每个关联都链接到两个ESP SA，一个用于传入数据包，一个用于传出数据包。发起方的传入SA与响应方的传出SA相对应，反之亦然。启动器为其传入关联定义SPI，如第3.2.1节所定义。该SA在本文中被称为SA-RI，并且相应的SPI被称为SPI-RI。响应者的传入SA分别对应于启动器的传出SA，称为SA-IR，SPI称为SPI-IR。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Initiator creates SA-RI as a part of R1 processing, before sending out the I2, as explained in Section 6.4. The keys are derived from KEYMAT, as defined in Section 7. The Responder creates SA-RI as a part of I2 processing; see Section 6.5.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
发起者在发送I2之前创建SA-RI作为R1处理的一部分，如第6.4节所述。根据第7节中的定义，钥匙来自KEYMAT。响应者创建SA-RI作为I2处理的一部分；见第6.5节。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Responder creates SA-IR as a part of I2 processing, before sending out R2; see Section 6.5. The Initiator creates SA-IR when processing R2; see Section 6.6.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
响应者在发送R2之前创建SA-IR作为I2处理的一部分；见第6.5节。发起方在处理R2时创建SA-IR；见第6.6节。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The initial session keys are drawn from the generated keying material, KEYMAT, after the HIP keys have been drawn as specified in [RFC5201].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
按照[RFC5201]中的规定绘制臀部关键点后，从生成的关键点材质KEYMAT中绘制初始会话关键点。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
When the HIP association is removed, the related ESP SAs MUST also be removed.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
移除髋部关联后，还必须移除相关的ESP SA。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.3.2. Rekeying
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.3.2. 重新键入
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
After the initial HIP base exchange and SA establishment, both hosts are in the ESTABLISHED state. There are no longer Initiator and Responder roles and the association is symmetric. In this subsection, the party that initiates the rekey procedure is denoted with I&#39; and the peer with R&#39;.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在初始髋部碱基交换和SA建立后，两个主机都处于已建立状态。不再有发起方和响应方角色，并且关联是对称的。在本小节中，启动密钥更新程序的一方用I&#39;表示，对等方用R&#39;表示。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
An existing HIP-created ESP SA may need updating during the lifetime of the HIP association. This document specifies the rekeying of an existing HIP-created ESP SA, using the UPDATE message. The ESP_INFO parameter introduced above is used for this purpose.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在HIP关联的生命周期内，ESP SA创建的现有HIP可能需要更新。本文档指定使用更新消息对ESP SA创建的现有HIP重新设置密钥。上面介绍的ESP_INFO参数用于此目的。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
I&#39; initiates the ESP SA updating process when needed (see Section 6.8). It creates an UPDATE packet with required information and sends it to the peer node. The old SAs are still in use, local policy permitting.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
I’在需要时启动ESP SA更新过程（参见第6.8节）。它创建一个包含所需信息的更新包，并将其发送到对等节点。在当地政策允许的情况下，旧SAs仍在使用。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
R&#39;, after receiving and processing the UPDATE (see Section 6.9), generates new SAs: SA-I&#39;R&#39; and SA-R&#39;I&#39;. It does not take the new outgoing SA into use, but still uses the old one, so there temporarily exists two SA pairs towards the same peer host. The SPI for the new outgoing SA, SPI-R&#39;I&#39;, is specified in the received ESP_INFO parameter in the UPDATE packet. For the new incoming SA, R&#39; generates the new SPI value, SPI-I&#39;R&#39;, and includes it in the response UPDATE packet.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
接收并处理更新后（见第6.9节），生成新的SA:SA-I&#39;R&#39;和SA-R&#39;I&#39;。它不使用新的传出SA，但仍使用旧的SA，因此暂时存在两个指向同一对等主机的SA对。新传出SA的SPI-R&#39;I&#39;在更新数据包中接收到的ESP_信息参数中指定。对于新的传入SA，R&#39;生成新的SPI值SPI-I&#39;R&#39;，并将其包括在响应更新包中。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
When I&#39; receives a response UPDATE from R&#39;, it generates new SAs, as described in Section 6.9: SA-I&#39;R&#39; and SA-R&#39;I&#39;. It starts using the new outgoing SA immediately.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
如第6.9节：SA-I&#39;R&#39;和SA-R&#39;I&#39;所述，当I&#39;从R&#39;接收到响应更新&#39;时，它将生成新的SA。它立即开始使用新的传出SA。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
R&#39; starts using the new outgoing SA when it receives traffic on the new incoming SA or when it receives the UPDATE ACK confirming completion of rekeying. After this, R&#39; can remove the old SAs. Similarly, when the I&#39; receives traffic from the new incoming SA, it can safely remove the old SAs.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
R&#39;在接收到新传入SA上的通信量或接收到确认重新键入完成的更新确认时，开始使用新传出SA。在此之后，R&#39;可以删除旧的SAs。类似地，当I’从新的传入SA接收流量时，它可以安全地删除旧SA。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.3.3. Security Association Management
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.3.3. 安全协会管理
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
An SA pair is indexed by the 2 SPIs and 2 HITs (both local and remote HITs since a system can have more than one HIT). An inactivity timer is RECOMMENDED for all SAs. If the state dictates the deletion of an SA, a timer is set to allow for any late arriving packets.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
SA对由2个SPI和2个命中（本地和远程命中，因为系统可以有多个命中）索引。建议所有SA使用非活动计时器。如果该状态指示删除SA，则会设置计时器以允许任何延迟到达的数据包。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.3.4. Security Parameter Index (SPI)
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.3.4. 安全参数索引（SPI）
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The SPIs in ESP provide a simple compression of the HIP data from all packets after the HIP exchange. This does require a per HIT-pair Security Association (and SPI), and a decrease of policy granularity over other Key Management Protocols like IKE.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ESP中的SPI提供了HIP交换后所有数据包中HIP数据的简单压缩。这确实需要每命中对安全关联（和SPI），并且与其他密钥管理协议（如IKE）相比，需要减少策略粒度。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
When a host updates the ESP SA, it provides a new inbound SPI to and gets a new outbound SPI from its partner.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
当主机更新ESP SA时，它会向其合作伙伴提供新的入站SPI，并从其合作伙伴处获取新的出站SPI。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.3.5. Supported Transforms
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.3.5. 支持的转换
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
All HIP implementations MUST support AES-CBC [RFC3602] and HMAC-SHA-1-96 [RFC2404]. If the Initiator does not support any of the transforms offered by the Responder, it should abandon the negotiation and inform the peer with a NOTIFY message about a non-supported transform.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
所有HIP实施必须支持AES-CBC[RFC3602]和HMAC-SHA-1-96[RFC2404]。如果发起方不支持响应方提供的任何转换，它应该放弃协商，并用一条关于不支持的转换的通知消息通知对等方。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In addition to AES-CBC, all implementations MUST implement the ESP NULL encryption algorithm. When the ESP NULL encryption is used, it MUST be used together with SHA1 or MD5 authentication as specified in Section 5.1.2
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
除AES-CBC外，所有实现都必须实现ESP空加密算法。使用ESP NULL加密时，必须与第5.1.2节规定的SHA1或MD5身份验证一起使用
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.3.6. Sequence Number
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.3.6. 序列号
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Sequence Number field is MANDATORY when ESP is used with HIP. Anti-replay protection MUST be used in an ESP SA established with HIP. When ESP is used with HIP, a 64-bit sequence number MUST be used. This means that each host MUST rekey before its sequence number reaches 2^64.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
当ESP与HIP一起使用时，序列号字段是必需的。在使用HIP建立的ESP SA中必须使用防重放保护。当ESP与HIP一起使用时，必须使用64位序列号。这意味着每个主机必须在其序列号达到2^64之前重新设置密钥。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
When using a 64-bit sequence number, the higher 32 bits are NOT included in the ESP header, but are simply kept local to both peers. See [RFC4301].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
当使用64位序列号时，较高的32位不包括在ESP报头中，但仅对两个对等方保持本地。参见[RFC4301]。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.3.7. Lifetimes and Timers
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.3.7. 生命周期和计时器
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
HIP does not negotiate any lifetimes. All ESP lifetimes are local policy. The only lifetimes a HIP implementation MUST support are sequence number rollover (for replay protection), and SHOULD support timing out inactive ESP SAs. An SA times out if no packets are received using that SA. The default timeout value is 15 minutes. Implementations MAY support lifetimes for the various ESP transforms. Each implementation SHOULD implement per-HIT configuration of the inactivity timeout, allowing statically configured HIP associations to stay alive for days, even when inactive.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
HIP不会在任何生命周期内进行协商。所有ESP寿命均为本地政策。HIP实现必须支持的唯一生命周期是序列号翻转（用于重播保护），并且应该支持超时非活动ESP SA。如果没有使用SA接收到数据包，SA将超时。默认超时值为15分钟。实现可能支持各种ESP转换的生存期。每个实现都应该实现不活动超时的每次命中配置，允许静态配置的HIP关联保持活动数天，即使在不活动时也是如此。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.4. IPsec and HIP ESP Implementation Considerations
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.4. IPsec和HIP-ESP实现注意事项
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
When HIP is run on a node where a standards compliant IPsec is used, some issues have to be considered.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
当HIP在使用符合标准的IPsec的节点上运行时，必须考虑一些问题。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The HIP implementation must be able to co-exist with other IPsec keying protocols. When the HIP implementation selects the SPI value, it may lead to a collision if not implemented properly. To avoid the possibility for a collision, the HIP implementation MUST ensure that the SPI values used for HIP SAs are not used for IPsec or other SAs, and vice versa.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
HIP实现必须能够与其他IPsec密钥协议共存。当HIP实现选择SPI值时，如果未正确实现，可能会导致碰撞。为了避免冲突的可能性，HIP实现必须确保用于HIP SA的SPI值不用于IPsec或其他SA，反之亦然。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
For outbound traffic, the SPD or (coordinated) SPDs if there are two (one for HIP and one for IPsec) MUST ensure that packets intended for HIP processing are given a HIP-enabled SA and that packets intended for IPsec processing are given an IPsec-enabled SA. The SP then MUST be bound to the matching SA and non-HIP packets will not be processed by this SA. Data originating from a socket that is not using HIP MUST NOT have checksum recalculated (as described in Section 3.2,
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
对于出站流量，SPD或（协调的）SPD（如果有两个（一个用于HIP，一个用于IPsec）必须确保为HIP处理的数据包提供支持HIP的SA，并且为IPsec处理的数据包提供支持IPsec的SA。然后SP必须绑定到匹配的SA，此SA不会处理非HIP数据包。来自未使用HIP的套接字的数据不得重新计算校验和（如第3.2节所述，
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
paragraph 2) and data MUST NOT be passed to the SP or SA created by the HIP.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
第2）段）和数据不得传递给HIP创建的SP或SA。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Incoming data packets using an SA that is not negotiated by HIP MUST NOT be processed as described in Section 3.2, paragraph 2. The SPI will identify the correct SA for packet decryption and MUST be used to identify that the packet has an upper-layer checksum that is calculated as specified in [RFC5201].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
不得按照第3.2节第2段中的说明处理使用SA的未经HIP协商的传入数据包。SPI将识别用于数据包解密的正确SA，并且必须用于识别数据包是否具有按照[RFC5201]中规定计算的上层校验和。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
4. The Protocol
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
4. 协议
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In this section, the protocol for setting up an ESP association to be used with HIP association is described.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在本节中，描述了设置ESP关联以与HIP关联一起使用的协议。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
4.1. ESP in HIP
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
4.1. 尤指臀部
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
4.1.1. Setting Up an ESP Security Association
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
4.1.1. 建立ESP安全协会
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Setting up an ESP Security Association between hosts using HIP consists of three messages passed between the hosts. The parameters are included in R1, I2, and R2 messages during base exchange.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
使用HIP在主机之间设置ESP安全关联由主机之间传递的三条消息组成。这些参数在基本交换期间包含在R1、I2和R2消息中。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-17">
Initiator Responder
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-17">
发起者响应者
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
                                   I1
                   ----------------------------------&gt;
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
                                   I1
                   ----------------------------------&gt;
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
                             R1: ESP_TRANSFORM
                   &lt;----------------------------------
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
                             R1: ESP_TRANSFORM
                   &lt;----------------------------------
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
                       I2: ESP_TRANSFORM, ESP_INFO
                   ----------------------------------&gt;
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
                       I2: ESP_TRANSFORM, ESP_INFO
                   ----------------------------------&gt;
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
                               R2: ESP_INFO
                   &lt;----------------------------------
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
                               R2: ESP_INFO
                   &lt;----------------------------------
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Setting up an ESP Security Association between HIP hosts requires three messages to exchange the information that is required during an ESP communication.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在HIP主机之间设置ESP安全关联需要三条消息来交换ESP通信期间所需的信息。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The R1 message contains the ESP_TRANSFORM parameter, in which the sending host defines the possible ESP transforms it is willing to use for the ESP SA.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
R1消息包含ESP_TRANSFORM参数，在该参数中，发送主机定义其愿意用于ESP SA的可能ESP转换。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The I2 message contains the response to an ESP_TRANSFORM received in the R1 message. The sender must select one of the proposed ESP transforms from the ESP_TRANSFORM parameter in the R1 message and include the selected one in the ESP_TRANSFORM parameter in the I2
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
I2消息包含对R1消息中接收到的ESP_转换的响应。发送方必须从R1消息中的ESP_转换参数中选择一个建议的ESP转换，并将所选转换包含在I2消息中的ESP_转换参数中
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
packet. In addition to the transform, the host includes the ESP_INFO parameter containing the SPI value to be used by the peer host.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
小包裹除了转换之外，主机还包括包含对等主机使用的SPI值的ESP_INFO参数。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In the R2 message, the ESP SA setup is finalized. The packet contains the SPI information required by the Initiator for the ESP SA.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在R2消息中，ESP SA设置完成。该数据包包含ESP SA启动器所需的SPI信息。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
4.1.2. Updating an Existing ESP SA
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
4.1.2. 更新现有ESP SA
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The update process is accomplished using two messages. The HIP UPDATE message is used to update the parameters of an existing ESP SA. The UPDATE mechanism and message is defined in [RFC5201], and the additional parameters for updating an existing ESP SA are described here.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
更新过程使用两条消息完成。HIP更新消息用于更新现有ESP SA的参数。[RFC5201]中定义了更新机制和消息，此处描述了更新现有ESP SA的附加参数。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The following picture shows a typical exchange when an existing ESP SA is updated. Messages include SEQ and ACK parameters required by the UPDATE mechanism.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
下图显示了更新现有ESP SA时的典型交换。消息包括更新机制所需的SEQ和ACK参数。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
       H1                                                          H2
            UPDATE: SEQ, ESP_INFO [, DIFFIE_HELLMAN]
          -----------------------------------------------------&gt;
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
       H1                                                          H2
            UPDATE: SEQ, ESP_INFO [, DIFFIE_HELLMAN]
          -----------------------------------------------------&gt;
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
            UPDATE: SEQ, ACK, ESP_INFO [, DIFFIE_HELLMAN]
          &lt;-----------------------------------------------------
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
            UPDATE: SEQ, ACK, ESP_INFO [, DIFFIE_HELLMAN]
          &lt;-----------------------------------------------------
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
            UPDATE: ACK
          -----------------------------------------------------&gt;
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
            UPDATE: ACK
          -----------------------------------------------------&gt;
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The host willing to update the ESP SA creates and sends an UPDATE message. The message contains the ESP_INFO parameter containing the old SPI value that was used, the new SPI value to be used, and the index value for the keying material, giving the point from where the next keys will be drawn. If new keying material must be generated, the UPDATE message will also contain the DIFFIE_HELLMAN parameter defined in [RFC5201].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
愿意更新ESP SA的主机创建并发送更新消息。该消息包含ESP_INFO参数，该参数包含已使用的旧SPI值、要使用的新SPI值以及关键帧材质的索引值，给出下一个关键帧的绘制点。如果必须生成新的键控材料，更新消息还将包含[RFC5201]中定义的DIFFIE_HELLMAN参数。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The host receiving the UPDATE message requesting update of an existing ESP SA MUST reply with an UPDATE message. In the reply message, the host sends the ESP_INFO parameter containing the corresponding values: old SPI, new SPI, and the keying material index. If the incoming UPDATE contained a DIFFIE_HELLMAN parameter, the reply packet MUST also contain a DIFFIE_HELLMAN parameter.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
接收请求更新现有ESP SA的更新消息的主机必须回复更新消息。在回复消息中，主机发送包含相应值的ESP_INFO参数：旧SPI、新SPI和键控材质索引。如果传入更新包含DIFFIE_HELLMAN参数，则应答数据包还必须包含DIFFIE_HELLMAN参数。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5. Parameter and Packet Formats
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5. 参数和数据包格式
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In this section, new and modified HIP parameters are presented, as well as modified HIP packets.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本节介绍了新的和修改后的HIP参数，以及修改后的HIP数据包。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.1. New Parameters
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.1. 新参数
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Two new HIP parameters are defined for setting up ESP transport format associations in HIP communication and for rekeying existing ones. Also, the NOTIFY parameter, described in [RFC5201], has two new error parameters.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
定义了两个新的HIP参数，用于在HIP通信中建立ESP传输格式关联和重新键入现有关联。此外，[RFC5201]中描述的NOTIFY参数有两个新的错误参数。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
Parameter Type Length Data
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
参数类型长度数据
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
ESP_INFO 65 12 Remote&#39;s old SPI, new SPI, and other info ESP_TRANSFORM 4095 variable ESP Encryption and Authentication Transform(s)
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
ESP_INFO 65 12远程的旧SPI、新SPI和其他信息ESP_TRANSFORM 4095变量ESP加密和身份验证转换
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.1.1. ESP_INFO
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.1.1. ESP_信息
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
During the establishment and update of an ESP SA, the SPI value of both hosts must be transmitted between the hosts. During the establishment and update of an ESP SA, the SPI value of both hosts must be transmitted between the hosts. In addition, hosts need the index value to the KEYMAT when they are drawing keys from the generated keying material. The ESP_INFO parameter is used to transmit the SPI values and the KEYMAT index information between the hosts.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在建立和更新ESP SA期间，两台主机的SPI值必须在主机之间传输。在建立和更新ESP SA期间，两台主机的SPI值必须在主机之间传输。此外，主机在从生成的关键帧材质绘制关键帧时，需要将索引值添加到关键帧。ESP_INFO参数用于在主机之间传输SPI值和键盘索引信息。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
During the initial ESP SA setup, the hosts send the SPI value that they want the peer to use when sending ESP data to them. The value is set in the NEW SPI field of the ESP_INFO parameter. In the initial setup, an old value for the SPI does not exist, thus the OLD SPI value field is set to zero. The OLD SPI field value may also be zero when additional SAs are set up between HIP hosts, e.g., in case of multihomed HIP hosts [RFC5206]. However, such use is beyond the scope of this specification.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在初始ESP SA设置期间，主机发送希望对等机在向其发送ESP数据时使用的SPI值。该值在ESP_INFO参数的新SPI字段中设置。在初始设置中，SPI的旧值不存在，因此旧SPI值字段设置为零。当在HIP主机之间设置其他SA时，旧SPI字段值也可能为零，例如，在多宿HIP主机的情况下[RFC5206]。但是，此类使用超出了本规范的范围。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
RFC 4301 [RFC4301] describes how to establish multiple SAs to properly support QoS. If different classes of traffic (distinguished by Differentiated Services Code Point (DSCP) bits [RFC3474], [RFC3260]) are sent on the same SA, and if the receiver is employing the optional anti-replay feature available in ESP, this could result in inappropriate discarding of lower priority packets due to the windowing mechanism used by this feature. Therefore, a sender SHOULD put traffic of different classes but with the same selector values on different SAs to support Quality of Service (QoS) appropriately. To permit this, the implementation MUST permit establishment and maintenance of multiple SAs between a given sender and receiver with the same selectors. Distribution of traffic among these parallel SAs to support QoS is locally determined by the sender and is not negotiated by HIP. The receiver MUST process the packets from the
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
RFC 4301[RFC4301]描述了如何建立多个SA以正确支持QoS。如果在同一SA上发送不同类别的流量（通过区分服务码点（DSCP）位[RFC3474]、[RFC3260]进行区分），并且如果接收器采用ESP中可用的可选防重放功能，由于此功能使用的窗口机制，这可能导致不适当地丢弃低优先级数据包。因此，发送方应该将不同类别但具有相同选择器值的流量放在不同SA上，以适当地支持服务质量（QoS）。为了实现这一点，实现必须允许使用相同的选择器在给定发送方和接收方之间建立和维护多个SA。这些并行SA之间支持QoS的流量分布由发送方在本地确定，而不是由HIP协商。接收方必须处理来自服务器的数据包
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
different SAs without prejudice. It is possible that the DSCP value changes en route, but this should not cause problems with respect to IPsec processing since the value is not employed for SA selection and MUST NOT be checked as part of SA/packet validation.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
不同的SAs没有偏见。DSCP值可能在路由过程中发生更改，但这不应导致IPsec处理方面的问题，因为该值不用于SA选择，并且不得作为SA/数据包验证的一部分进行检查。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The KEYMAT index value points to the place in the KEYMAT from where the keying material for the ESP SAs is drawn. The KEYMAT index value is zero only when the ESP_INFO is sent during a rekeying process and new keying material is generated.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
KEYMAT索引值指向KEYMAT中用于绘制ESP SAs的键控材质的位置。只有在重新键入过程中发送ESP_信息并生成新的键入材料时，KEYMAT索引值才为零。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
During the life of an SA established by HIP, one of the hosts may need to reset the Sequence Number to one and rekey. The reason for rekeying might be an approaching sequence number wrap in ESP, or a local policy on use of a key. Rekeying ends the current SAs and starts new ones on both peers.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在HIP建立的SA的生命周期内，其中一个主机可能需要将序列号重置为1并重新设置密钥。重新设置密钥的原因可能是ESP中接近的序列号换行，或者是使用密钥的本地策略。重新键入结束当前SA并在两个对等机上启动新SA。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
During the rekeying process, the ESP_INFO parameter is used to transmit the changed SPI values and the keying material index.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在重新键入过程中，ESP_INFO参数用于传输更改的SPI值和键入材料索引。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |             Type              |             Length            |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |           Reserved            |         KEYMAT Index          |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                            OLD SPI                            |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                            NEW SPI                            |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |             Type              |             Length            |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |           Reserved            |         KEYMAT Index          |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                            OLD SPI                            |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                            NEW SPI                            |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-5">
Type 65 Length 12 KEYMAT Index Index, in bytes, where to continue to draw ESP keys from KEYMAT. If the packet includes a new Diffie-Hellman key and the ESP_INFO is sent in an UPDATE packet, the field MUST be zero. If the ESP_INFO is included in base exchange messages, the KEYMAT Index must have the index value of the point from where the ESP SA keys are drawn. Note that the length of this field limits the amount of keying material that can be drawn from KEYMAT. If that amount is exceeded, the packet MUST contain a new Diffie-Hellman key. OLD SPI old SPI for data sent to address(es) associated with this SA. If this is an initial SA setup, the OLD SPI value is zero.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-5">
键入65长度12 KEYMAT索引，以字节为单位，从中继续从KEYMAT绘制ESP键。如果数据包包含新的Diffie-Hellman密钥，且ESP_信息在更新数据包中发送，则该字段必须为零。如果基本交换消息中包含ESP_信息，则KEYMAT索引必须具有从中绘制ESP SA键的点的索引值。请注意，此字段的长度限制了可以从KEYMAT中提取的关键帧材质的数量。如果超过该数量，则数据包必须包含新的Diffie-Hellman密钥。OLD SPI发送到与此SA关联的地址的数据的OLD SPI。如果这是初始SA设置，则旧SPI值为零。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-5">
NEW SPI new SPI for data sent to address(es) associated with this SA.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-5">
新SPI发送到与此SA关联的地址的数据的新SPI。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.1.2. ESP_TRANSFORM
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.1.2. ESP_变换
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The ESP_TRANSFORM parameter is used during ESP SA establishment. The first party sends a selection of transform families in the ESP_TRANSFORM parameter, and the peer must select one of the proposed values and include it in the response ESP_TRANSFORM parameter.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ESP_TRANSFORM参数在ESP SA建立过程中使用。第一方在ESP_变换参数中发送变换族选择，对等方必须选择其中一个建议值并将其包含在响应ESP_变换参数中。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |             Type              |             Length            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |          Reserved             |           Suite ID #1         |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |          Suite ID #2          |           Suite ID #3         |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |          Suite ID #n          |             Padding           |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |             Type              |             Length            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |          Reserved             |           Suite ID #1         |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |          Suite ID #2          |           Suite ID #3         |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |          Suite ID #n          |             Padding           |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-9">
Type 4095 Length length in octets, excluding Type, Length, and padding Reserved zero when sent, ignored when received Suite ID defines the ESP Suite to be used
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-9">
类型4095长度以八位字节为单位，不包括类型、长度和填充，发送时保留零，接收时忽略套件ID定义要使用的ESP套件
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The following Suite IDs are defined in RFC 5201 [RFC5201]:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
RFC 5201[RFC5201]中定义了以下套件ID：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
Suite ID Value
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
套件ID值
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
RESERVED 0 AES-CBC with HMAC-SHA1 1 3DES-CBC with HMAC-SHA1 2 3DES-CBC with HMAC-MD5 3 BLOWFISH-CBC with HMAC-SHA1 4 NULL with HMAC-SHA1 5 NULL with HMAC-MD5 6
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
保留0 AES-CBC和HMAC-SHA1 3DES-CBC和HMAC-SHA1 2 3DES-CBC和HMAC-MD5 3河豚-CBC和HMAC-SHA1 4 NULL和HMAC-SHA1 5 NULL和HMAC-MD5 6
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The sender of an ESP transform parameter MUST make sure that there are no more than six (6) Suite IDs in one ESP transform parameter. Conversely, a recipient MUST be prepared to handle received transport parameters that contain more than six Suite IDs. The limited number of Suite IDs sets the maximum size of the ESP_TRANSFORM parameter. As the default configuration, the ESP_TRANSFORM parameter MUST
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ESP转换参数的发送方必须确保一个ESP转换参数中的套件ID不超过六（6）个。相反，收件人必须准备好处理接收到的包含六个以上套件ID的传输参数。有限数量的套件ID设置ESP_转换参数的最大大小。作为默认配置，ESP_TRANSFORM参数必须
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
contain at least one of the mandatory Suite IDs. There MAY be a configuration option that allows the administrator to override this default.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
至少包含一个必需的套件ID。可能存在允许管理员覆盖此默认值的配置选项。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Mandatory implementations: AES-CBC with HMAC-SHA1 and NULL with HMAC-SHA1.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
强制实现：带HMAC-SHA1的AES-CBC和带HMAC-SHA1的NULL。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Under some conditions, it is possible to use Traffic Flow Confidentiality (TFC) [RFC4303] with ESP in BEET mode. However, the definition of such operation is future work and must be done in a separate specification.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在某些情况下，可以在BEET模式下使用ESP的交通流机密性（TFC）[RFC4303]。然而，此类操作的定义是未来的工作，必须在单独的规范中完成。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.1.3. NOTIFY Parameter
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.1.3. 通知参数
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The HIP base specification defines a set of NOTIFY error types. The following error types are required for describing errors in ESP Transform crypto suites during negotiation.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
HIP base规范定义了一组NOTIFY错误类型。以下错误类型是描述协商期间ESP Transform crypto Suite中的错误所必需的。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
         NOTIFY PARAMETER - ERROR TYPES           Value
         ------------------------------           -----
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
         NOTIFY PARAMETER - ERROR TYPES           Value
         ------------------------------           -----
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-9">
NO_ESP_PROPOSAL_CHOSEN 18
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-9">
没有选择ESP建议18
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
None of the proposed ESP Transform crypto suites was acceptable.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
建议的ESP转换加密套件均不可接受。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-9">
INVALID_ESP_TRANSFORM_CHOSEN 19
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-9">
无效的\u ESP\u转换\u选择19
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
The ESP Transform crypto suite does not correspond to one offered by the Responder.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
ESP转换加密套件与响应者提供的套件不对应。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.2. HIP ESP Security Association Setup
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.2. HIP ESP安全协会设置
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The ESP Security Association is set up during the base exchange. The following subsections define the ESP SA setup procedure using both base exchange messages (R1, I2, R2) and UPDATE messages.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ESP安全关联是在基本交换期间建立的。以下小节使用基本交换消息（R1、I2、R2）和更新消息定义ESP SA设置过程。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.2.1. Setup During Base Exchange
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.2.1. 基本交换期间的设置
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.2.1.1. Modifications in R1
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.2.1.1. R1中的修改
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The ESP_TRANSFORM contains the ESP modes supported by the sender, in the order of preference. All implementations MUST support AES-CBC [RFC3602] with HMAC-SHA-1-96 [RFC2404].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ESP_转换按优先顺序包含发送方支持的ESP模式。所有实施必须支持AES-CBC[RFC3602]和HMAC-SHA-1-96[RFC2404]。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The following figure shows the resulting R1 packet layout.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
下图显示了生成的R1数据包布局。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
The HIP parameters for the R1 packet:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
R1数据包的HIP参数：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
IP ( HIP ( [ R1_COUNTER, ] PUZZLE, DIFFIE_HELLMAN, HIP_TRANSFORM, ESP_TRANSFORM, HOST_ID, [ ECHO_REQUEST, ] HIP_SIGNATURE_2 ) [, ECHO_REQUEST ])
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
IP（HIP（[R1_计数器，]PUZZLE，DIFFIE_HELLMAN，HIP_变换，ESP_变换，主机ID，[ECHO_请求，]HIP_签名2）[，ECHO_请求]）
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.2.1.2. Modifications in I2
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.2.1.2. I2中的修改
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The ESP_INFO contains the sender&#39;s SPI for this association as well as the KEYMAT index from where the ESP SA keys will be drawn. The old SPI value is set to zero.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ESP_信息包含此关联的发送方SPI以及从中提取ESP SA密钥的KEYMAT索引。旧SPI值设置为零。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The ESP_TRANSFORM contains the ESP mode selected by the sender of R1. All implementations MUST support AES-CBC [RFC3602] with HMAC-SHA-1-96 [RFC2404].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ESP_转换包含R1发送方选择的ESP模式。所有实施必须支持AES-CBC[RFC3602]和HMAC-SHA-1-96[RFC2404]。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The following figure shows the resulting I2 packet layout.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
下图显示了生成的I2数据包布局。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
The HIP parameters for the I2 packet:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
I2数据包的HIP参数：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
      IP ( HIP ( ESP_INFO,
                 [R1_COUNTER,]
                 SOLUTION,
                 DIFFIE_HELLMAN,
                 HIP_TRANSFORM,
                 ESP_TRANSFORM,
                 ENCRYPTED { HOST_ID },
                 [ ECHO_RESPONSE ,]
                 HMAC,
                 HIP_SIGNATURE
                 [, ECHO_RESPONSE] ) )
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
      IP ( HIP ( ESP_INFO,
                 [R1_COUNTER,]
                 SOLUTION,
                 DIFFIE_HELLMAN,
                 HIP_TRANSFORM,
                 ESP_TRANSFORM,
                 ENCRYPTED { HOST_ID },
                 [ ECHO_RESPONSE ,]
                 HMAC,
                 HIP_SIGNATURE
                 [, ECHO_RESPONSE] ) )
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.2.1.3. Modifications in R2
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.2.1.3. R2中的修改
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The R2 contains an ESP_INFO parameter, which has the SPI value of the sender of the R2 for this association. The ESP_INFO also has the KEYMAT index value specifying where the ESP SA keys are drawn.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
R2包含一个ESP_INFO参数，该参数具有此关联R2的发送方的SPI值。ESP_信息还具有KEYMAT索引值，用于指定ESP SA键的绘制位置。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The following figure shows the resulting R2 packet layout.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
下图显示了生成的R2数据包布局。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
The HIP parameters for the R2 packet:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
R2数据包的HIP参数：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
IP ( HIP ( ESP_INFO, HMAC_2, HIP_SIGNATURE ) )
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
IP（HIP（ESP_信息、HMAC_2、HIP_签名））
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.3. HIP ESP Rekeying
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.3. 重键
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In this section, the procedure for rekeying an existing ESP SA is presented.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本节介绍了为现有ESP SA重新设置密钥的过程。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Conceptually, the process can be represented by the following message sequence using the host names I&#39; and R&#39; defined in Section 3.3.2. For simplicity, HMAC and HIP_SIGNATURE are not depicted, and DIFFIE_HELLMAN keys are optional. The UPDATE with ACK_I need not be piggybacked with the UPDATE with SEQ_R; it may be ACKed separately (in which case the sequence would include four packets).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
从概念上讲，该过程可以使用第3.3.2节中定义的主机名I&#39;和R&#39;通过以下消息序列表示。为简单起见，未描述HMAC和HIP_签名，DIFFIE_HELLMAN键是可选的。带有ACK_I的更新不需要与带有SEQ_R的更新一起进行；它可以单独确认（在这种情况下，序列将包括四个数据包）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-11">
I&#39; R&#39;
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-11">
我是
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
                 UPDATE(ESP_INFO, SEQ_I, [DIFFIE_HELLMAN])
            -----------------------------------&gt;
                 UPDATE(ESP_INFO, SEQ_R, ACK_I, [DIFFIE_HELLMAN])
            &lt;-----------------------------------
                 UPDATE(ACK_R)
            -----------------------------------&gt;
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
                 UPDATE(ESP_INFO, SEQ_I, [DIFFIE_HELLMAN])
            -----------------------------------&gt;
                 UPDATE(ESP_INFO, SEQ_R, ACK_I, [DIFFIE_HELLMAN])
            &lt;-----------------------------------
                 UPDATE(ACK_R)
            -----------------------------------&gt;
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Below, the first two packets in this figure are explained.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
下面，解释该图中的前两个分组。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.3.1. Initializing Rekeying
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.3.1. 初始化密钥更新
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
When HIP is used with ESP, the UPDATE packet is used to initiate rekeying. The UPDATE packet MUST carry an ESP_INFO and MAY carry a DIFFIE_HELLMAN parameter.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
当HIP与ESP一起使用时，更新数据包用于启动密钥更新。更新数据包必须携带ESP_信息，并且可能携带DIFFIE_HELLMAN参数。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Intermediate systems that use the SPI will have to inspect HIP packets for those that carry rekeying information. The packet is signed for the benefit of the intermediate systems. Since intermediate systems may need the new SPI values, the contents cannot be encrypted.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
使用SPI的中间系统必须检查HIP数据包中是否有携带密钥更新信息的数据包。为了中间系统的利益，对数据包进行签名。由于中间系统可能需要新的SPI值，因此无法对内容进行加密。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The following figure shows the contents of a rekeying initialization UPDATE packet.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
下图显示了重新键入初始化更新数据包的内容。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
The HIP parameters for the UPDATE packet initiating rekeying:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
更新包启动密钥更新的HIP参数：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
IP ( HIP ( ESP_INFO, SEQ, [DIFFIE_HELLMAN, ] HMAC, HIP_SIGNATURE ) )
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
IP（HIP（ESP_信息，序号，[DIFFIE_HELLMAN，]HMAC，HIP_签名））
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.3.2. Responding to the Rekeying Initialization
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.3.2. 响应密钥更新初始化
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The UPDATE ACK is used to acknowledge the received UPDATE rekeying initialization. The acknowledgment UPDATE packet MUST carry an ESP_INFO and MAY carry a DIFFIE_HELLMAN parameter.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
更新确认用于确认接收到的更新密钥更新初始化。确认更新数据包必须携带ESP_信息，并可能携带DIFFIE_HELLMAN参数。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Intermediate systems that use the SPI will have to inspect HIP packets for packets carrying rekeying information. The packet is signed for the benefit of the intermediate systems. Since intermediate systems may need the new SPI values, the contents cannot be encrypted.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
使用SPI的中间系统必须检查HIP数据包中是否有携带密钥更新信息的数据包。为了中间系统的利益，对数据包进行签名。由于中间系统可能需要新的SPI值，因此无法对内容进行加密。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The following figure shows the contents of a rekeying acknowledgment UPDATE packet.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
下图显示了重新键入确认更新数据包的内容。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
The HIP parameters for the UPDATE packet:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
更新数据包的HIP参数：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
IP ( HIP ( ESP_INFO, SEQ, ACK, [ DIFFIE_HELLMAN, ] HMAC, HIP_SIGNATURE ) )
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
IP（HIP（ESP_信息，序列，确认，[DIFFIE_HELLMAN，]HMAC，HIP_签名））
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.4. ICMP Messages
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.4. ICMP消息
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ICMP message handling is mainly described in the HIP base specification [RFC5201]. In this section, we describe the actions related to ESP security associations.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ICMP消息处理主要在HIP基本规范[RFC5201]中描述。在本节中，我们将描述与ESP安全关联相关的操作。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.4.1. Unknown SPI
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.4.1. 未知SPI
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
If a HIP implementation receives an ESP packet that has an unrecognized SPI number, it MAY respond (subject to rate limiting the responses) with an ICMP packet with type &#34;Parameter Problem&#34;, with the pointer pointing to the beginning of SPI field in the ESP header.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
如果HIP实现接收到具有无法识别的SPI号的ESP数据包，它可能会使用类型为“Parameter Problem”的ICMP数据包进行响应（受响应速率限制），指针指向ESP报头中SPI字段的开头。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6. Packet Processing
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6. 数据包处理
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Packet processing is mainly defined in the HIP base specification [RFC5201]. This section describes the changes and new requirements for packet handling when the ESP transport format is used. Note that all HIP packets (currently protocol 253) MUST bypass ESP processing.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
数据包处理主要在HIP base规范[RFC5201]中定义。本节描述了使用ESP传输格式时对数据包处理的更改和新要求。请注意，所有HIP数据包（当前为协议253）必须绕过ESP处理。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6.1. Processing Outgoing Application Data
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6.1. 处理传出的应用程序数据
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Outgoing application data handling is specified in the HIP base specification [RFC5201]. When the ESP transport format is used, and there is an active HIP session for the given &lt; source, destination &gt; HIT pair, the outgoing datagram is protected using the ESP security association. In a typical implementation, this will result in a BEET-mode ESP packet being sent. BEET-mode [ESP-BEET] was introduced above in Section 3.2. The following additional steps define the conceptual processing rules for outgoing ESP protected datagrams.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
HIP基本规范[RFC5201]中规定了传出应用程序数据处理。当使用ESP传输格式，并且给定的&lt;source，destination&gt;命中对存在活动HIP会话时，传出数据报将使用ESP安全关联进行保护。在典型的实现中，这将导致发送甜菜模式ESP数据包。上文第3.2节介绍了甜菜模式[ESP-BEET]。以下附加步骤定义了传出ESP保护数据报的概念处理规则。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1. Detect the proper ESP SA using the HITs in the packet header or other information associated with the packet
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1. 使用数据包头中的点击或与数据包相关的其他信息检测正确的ESP SA
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2. Process the packet normally, as if the SA was a transport mode SA.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2. 正常处理数据包，就像SA是传输模式SA一样。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
3. Ensure that the outgoing ESP protected packet has proper IP header format depending on the used IP address family, and proper IP addresses in its IP header, e.g., by replacing HITs left by the ESP processing. Note that this placement of proper IP addresses MAY also be performed at some other point in the stack, e.g., before ESP processing.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
3. 确保受ESP保护的传出数据包具有正确的IP头格式，具体取决于所使用的IP地址系列，以及其IP头中的正确IP地址，例如，通过替换ESP处理留下的命中数。请注意，适当IP地址的放置也可以在堆栈中的某个其他点执行，例如，在ESP处理之前。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6.2. Processing Incoming Application Data
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6.2. 处理传入的应用程序数据
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Incoming HIP user data packets arrive as ESP protected packets. In the usual case, the receiving host has a corresponding ESP security association, identified by the SPI and destination IP address in the packet. However, if the host has crashed or otherwise lost its HIP state, it may not have such an SA.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
传入的HIP用户数据包作为受ESP保护的数据包到达。在通常情况下，接收主机具有相应的ESP安全关联，由数据包中的SPI和目标IP地址标识。但是，如果主机已崩溃或以其他方式失去HIP状态，则它可能没有这样的SA。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The basic incoming data handling is specified in the HIP base specification. Additional steps are required when ESP is used for protecting the data traffic. The following steps define the conceptual processing rules for incoming ESP protected datagrams targeted to an ESP security association created with HIP.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
HIP base规范中规定了基本的传入数据处理。当ESP用于保护数据流量时，需要执行其他步骤。以下步骤定义了针对使用HIP创建的ESP安全关联的传入ESP保护数据报的概念处理规则。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1. Detect the proper ESP SA using the SPI. If the resulting SA is a non-HIP ESP SA, process the packet according to standard IPsec rules. If there are no SAs identified with the SPI, the host MAY
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1. 使用SPI检测正确的ESP SA。如果生成的SA是非HIP ESP SA，请根据标准IPsec规则处理数据包。如果没有使用SPI标识的SAs，则主机可能会
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-7">
send an ICMP packet as defined in Section 5.4. How to handle lost state is an implementation issue.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-7">
发送第5.4节中定义的ICMP数据包。如何处理丢失状态是一个实现问题。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2. If the SPI matches with an active HIP-based ESP SA, the IP addresses in the datagram are replaced with the HITs associated with the SPI. Note that this IP-address-to-HIT conversion step MAY also be performed at some other point in the stack, e.g., after ESP processing. Note also that if the incoming packet has IPv4 addresses, the packet must be converted to IPv6 format before replacing the addresses with HITs (such that the transport checksum will pass if there are no errors).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2. 如果SPI与活动的基于HIP的ESP SA匹配，则数据报中的IP地址将替换为与SPI关联的命中。请注意，此IP地址到命中转换步骤也可在堆栈中的某个其他点执行，例如，在ESP处理之后。还请注意，如果传入数据包具有IPv4地址，则必须先将数据包转换为IPv6格式，然后再使用HITs替换地址（这样，如果没有错误，传输校验和将通过）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
3. The transformed packet is next processed normally by ESP, as if the packet were a transport mode packet. The packet may be dropped by ESP, as usual. In a typical implementation, the result of successful ESP decryption and verification is a datagram with the associated HITs as source and destination.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
3. 转换后的数据包接下来由ESP正常处理，就像数据包是传输模式数据包一样。与往常一样，ESP可能会丢弃数据包。在一个典型的实现中，成功的ESP解密和验证的结果是一个数据报，其中关联的命中作为源和目标。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
4. The datagram is delivered to the upper layer. Demultiplexing the datagram to the right upper layer socket is performed as usual, except that the HITs are used in place of IP addresses during the demultiplexing.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
4. 数据报被传送到上层。将数据报解复用到右上层套接字的操作与往常一样，除了在解复用过程中使用HITs代替IP地址之外。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6.3. HMAC and SIGNATURE Calculation and Verification
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6.3. HMAC与签名计算与验证
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The new HIP parameters described in this document, ESP_INFO and ESP_TRANSFORM, must be protected using HMAC and signature calculations. In a typical implementation, they are included in R1, I2, R2, and UPDATE packet HMAC and SIGNATURE calculations as described in [RFC5201].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本文档中描述的新HIP参数ESP_INFO和ESP_TRANSFORM必须使用HMAC和签名计算进行保护。在典型实现中，它们包括在R1、I2、R2和更新数据包HMAC和签名计算中，如[RFC5201]所述。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6.4. Processing Incoming ESP SA Initialization (R1)
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6.4. 正在处理传入的ESP SA初始化（R1）
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The ESP SA setup is initialized in the R1 message. The receiving host (Initiator) selects one of the ESP transforms from the presented values. If no suitable value is found, the negotiation is terminated. The selected values are subsequently used when generating and using encryption keys, and when sending the reply packet. If the proposed alternatives are not acceptable to the system, it may abandon the ESP SA establishment negotiation, or it may resend the I1 message within the retry bounds.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ESP SA设置在R1消息中初始化。接收主机（启动器）从显示的值中选择一个ESP转换。如果没有找到合适的值，协商将终止。随后在生成和使用加密密钥以及发送应答包时使用所选值。如果系统不接受建议的备选方案，则可能放弃ESP SA建立协商，或者可能在重试范围内重新发送I1消息。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
After selecting the ESP transform and performing other R1 processing, the system prepares and creates an incoming ESP security association. It may also prepare a security association for outgoing traffic, but since it does not have the correct SPI value yet, it cannot activate it.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
选择ESP转换并执行其他R1处理后，系统准备并创建传入的ESP安全关联。它还可以为传出流量准备安全关联，但由于它还没有正确的SPI值，因此无法激活它。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6.5. Processing Incoming Initialization Reply (I2)
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6.5. 处理传入的初始化应答（I2）
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The following steps are required to process the incoming ESP SA initialization replies in I2. The steps below assume that the I2 has been accepted for processing (e.g., has not been dropped due to HIT comparisons as described in [RFC5201]).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
处理I2中传入的ESP SA初始化回复需要以下步骤。以下步骤假设I2已被接受处理（例如，未因[RFC5201]中所述的命中比较而丢弃）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o The ESP_TRANSFORM parameter is verified and it MUST contain a single value in the parameter, and it MUST match one of the values offered in the initialization packet.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o ESP_TRANSFORM参数经过验证，参数中必须包含一个值，并且必须与初始化数据包中提供的一个值匹配。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o The ESP_INFO NEW SPI field is parsed to obtain the SPI that will be used for the Security Association outbound from the Responder and inbound to the Initiator. For this initial ESP SA establishment, the old SPI value MUST be zero. The KEYMAT Index field MUST contain the index value to the KEYMAT from where the ESP SA keys are drawn.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 对ESP_INFO NEW SPI字段进行分析，以获取将用于安全关联的SPI，该SPI将从响应程序出站并入站到启动器。对于此初始ESP SA建立，旧SPI值必须为零。KEYMAT索引字段必须包含从中绘制ESP SA键的KEYMAT的索引值。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o The system prepares and creates both incoming and outgoing ESP security associations.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 系统准备并创建传入和传出ESP安全关联。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Upon successful processing of the initialization reply message, the possible old Security Associations (as left over from an earlier incarnation of the HIP association) are dropped and the new ones are installed, and a finalizing packet, R2, is sent. Possible ongoing rekeying attempts are dropped.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 成功处理初始化回复消息后，可能的旧安全关联（从HIP关联的早期版本遗留下来）被丢弃，新的安全关联被安装，并发送一个最终数据包R2。可能正在进行的密钥更新尝试被放弃。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6.6. Processing Incoming ESP SA Setup Finalization (R2)
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6.6. 正在处理传入的ESP SA设置终结（R2）
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Before the ESP SA can be finalized, the ESP_INFO NEW SPI field is parsed to obtain the SPI that will be used for the ESP Security Association inbound to the sender of the finalization message R2. The system uses this SPI to create or activate the outgoing ESP security association used for sending packets to the peer.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在完成ESP SA之前，将对ESP_INFO NEW SPI字段进行解析，以获取将用于ESP安全关联的SPI，该关联将入站到完成消息R2的发送方。系统使用此SPI创建或激活用于向对等方发送数据包的传出ESP安全关联。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6.7. Dropping HIP Associations
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6.7. 放弃髋关节协会
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
When the system drops a HIP association, as described in the HIP base specification, the associated ESP SAs MUST also be dropped.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
如HIP基本规范中所述，当系统删除HIP关联时，也必须删除关联的ESP SA。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6.8. Initiating ESP SA Rekeying
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6.8. 启动ESP SA密钥更新
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
During ESP SA rekeying, the hosts draw new keys from the existing keying material, or new keying material is generated from where the new keys are drawn.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在ESP SA重新设置关键帧期间，主机从现有关键帧材质绘制新关键帧，或者从绘制新关键帧的位置生成新关键帧材质。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A system may initiate the SA rekeying procedure at any time. It MUST initiate a rekey if its incoming ESP sequence counter is about to
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
系统可随时启动SA密钥更新程序。如果传入的ESP序列计数器即将
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
overflow. The system MUST NOT replace its keying material until the rekeying packet exchange successfully completes.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
溢流在重新设置密钥的数据包交换成功完成之前，系统不得更换其密钥材料。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Optionally, a system may include a new Diffie-Hellman key for use in new KEYMAT generation. New KEYMAT generation occurs prior to drawing the new keys.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
可选地，系统可包括用于新一代键盘的新Diffie-Hellman钥匙。在绘制新关键帧之前生成新的KEYMAT。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The rekeying procedure uses the UPDATE mechanism defined in [RFC5201]. Because each peer must update its half of the security association pair (including new SPI creation), the rekeying process requires that each side both send and receive an UPDATE. A system will then rekey the ESP SA when it has sent parameters to the peer and has received both an ACK of the relevant UPDATE message and corresponding peer&#39;s parameters. It may be that the ACK and the required HIP parameters arrive in different UPDATE messages. This is always true if a system does not initiate ESP SA update but responds to an update request from the peer, and may also occur if two systems initiate update nearly simultaneously. In such a case, if the system has an outstanding update request, it saves the one parameter and waits for the other before completing rekeying.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
密钥更新过程使用[RFC5201]中定义的更新机制。因为每个对等方都必须更新其安全关联对的一半（包括新的SPI创建），所以密钥更新过程要求每一方都发送和接收更新。当系统向对等方发送参数并接收到相关更新消息的ACK和相应对等方的参数时，系统将重新设置ESP SA的密钥。可能是ACK和所需的HIP参数在不同的更新消息中到达。如果一个系统不启动ESP SA更新，但响应来自对等方的更新请求，则这始终是正确的，如果两个系统几乎同时启动更新，也可能发生这种情况。在这种情况下，如果系统有一个未完成的更新请求，它将保存一个参数，并在完成重新键入之前等待另一个参数。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The following steps define the processing rules for initiating an ESP SA update:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
以下步骤定义了启动ESP SA更新的处理规则：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1. The system decides whether to continue to use the existing KEYMAT or to generate a new KEYMAT. In the latter case, the system MUST generate a new Diffie-Hellman public key.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1. 系统决定是继续使用现有键盘垫还是生成新键盘垫。在后一种情况下，系统必须生成新的Diffie-Hellman公钥。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2. The system creates an UPDATE packet, which contains the ESP_INFO parameter. In addition, the host may include the optional DIFFIE_HELLMAN parameter. If the UPDATE contains the DIFFIE_HELLMAN parameter, the KEYMAT Index in the ESP_INFO parameter MUST be zero, and the Diffie-Hellman group ID must be unchanged from that used in the initial handshake. If the UPDATE does not contain DIFFIE_HELLMAN, the ESP_INFO KEYMAT Index MUST be greater than or equal to the index of the next byte to be drawn from the current KEYMAT.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2. 系统将创建一个更新数据包，其中包含ESP_INFO参数。此外，主机可能包括可选的DIFFIE_HELLMAN参数。如果更新包含DIFFIE_HELLMAN参数，则ESP_INFO参数中的KEYMAT索引必须为零，并且DIFFIE HELLMAN组ID必须与初始握手中使用的ID保持不变。如果更新不包含DIFFIE_HELLMAN，则ESP_INFO键盘索引必须大于或等于从当前键盘提取的下一个字节的索引。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
3. The system sends the UPDATE packet. For reliability, the underlying UPDATE retransmission mechanism MUST be used.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
3. 系统发送更新包。为了保证可靠性，必须使用底层的更新重传机制。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
4. The system MUST NOT delete its existing SAs, but continue using them if its policy still allows. The rekeying procedure SHOULD be initiated early enough to make sure that the SA replay counters do not overflow.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
4. 系统不得删除其现有SA，但如果其策略仍然允许，则必须继续使用它们。应尽早启动密钥更新过程，以确保SA replay计数器不会溢出。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
5. In case a protocol error occurs and the peer system acknowledges the UPDATE but does not itself send an ESP_INFO, the system may
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
5. 如果发生协议错误，对等系统确认更新，但自身未发送ESP_信息，则系统可能会
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-7">
not finalize the outstanding ESP SA update request. To guard against this, a system MAY re-initiate the ESP SA update procedure after some time waiting for the peer to respond, or it MAY decide to abort the ESP SA after waiting for an implementation-dependent time. The system MUST NOT keep an outstanding ESP SA update request for an indefinite time.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-7">
未完成未完成的ESP SA更新请求。为了防止这种情况，系统可能会在等待对等方响应一段时间后重新启动ESP SA更新过程，或者在等待与实现相关的时间后决定中止ESP SA。系统不得无限期保留未完成的ESP SA更新请求。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
To simplify the state machine, a host MUST NOT generate new UPDATEs while it has an outstanding ESP SA update request, unless it is restarting the update process.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
为了简化状态机，主机在有未完成的ESP SA更新请求时不得生成新更新，除非它正在重新启动更新过程。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6.9. Processing Incoming UPDATE Packets
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6.9. 处理传入的更新数据包
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
When a system receives an UPDATE packet, it must be processed if the following conditions hold (in addition to the generic conditions specified for UPDATE processing in Section 6.12 of [RFC5201]):
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
当系统接收到更新数据包时，如果满足以下条件，则必须对其进行处理（除了[RFC5201]第6.12节中规定的更新处理通用条件外）：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1. A corresponding HIP association must exist. This is usually ensured by the underlying UPDATE mechanism.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1. 必须存在相应的髋关节联合。这通常由底层的更新机制来保证。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2. The state of the HIP association is ESTABLISHED or R2-SENT.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2. 髋关节协会的状态已建立或已发送。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
If the above conditions hold, the following steps define the conceptual processing rules for handling the received UPDATE packet:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
如果上述条件成立，则以下步骤定义用于处理接收到的更新数据包的概念处理规则：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1. If the received UPDATE contains a DIFFIE_HELLMAN parameter, the received KEYMAT Index MUST be zero and the Group ID must match the Group ID in use on the association. If this test fails, the packet SHOULD be dropped and the system SHOULD log an error message.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1. 如果收到的更新包含DIFFIE_HELLMAN参数，则收到的KEYMAT索引必须为零，并且组ID必须与关联上使用的组ID匹配。如果此测试失败，则应丢弃数据包，系统应记录错误消息。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2. If there is no outstanding rekeying request, the packet processing continues as specified in Section 6.9.1.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2. 如果没有未完成的密钥更新请求，则按照第6.9.1节的规定继续进行数据包处理。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
3. If there is an outstanding rekeying request, the UPDATE MUST be acknowledged, the received ESP_INFO (and possibly DIFFIE_HELLMAN) parameters must be saved, and the packet processing continues as specified in Section 6.10.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
3. 如果存在未完成的密钥更新请求，则必须确认更新，必须保存收到的ESP_信息（以及可能的DIFFIE_HELLMAN）参数，并按照第6.10节的规定继续数据包处理。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6.9.1. Processing UPDATE Packet: No Outstanding Rekeying Request
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6.9.1. 正在处理更新数据包：没有未完成的密钥更新请求
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The following steps define the conceptual processing rules for handling a received UPDATE packet with the ESP_INFO parameter:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
以下步骤定义了使用ESP_INFO参数处理接收到的更新数据包的概念处理规则：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1. The system consults its policy to see if it needs to generate a new Diffie-Hellman key, and generates a new key (with same Group ID) if needed. The system records any newly generated or
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1. 系统参考其策略，查看是否需要生成新的Diffie-Hellman密钥，并在需要时生成新密钥（具有相同的组ID）。系统会记录任何新生成的或
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-7">
received Diffie-Hellman keys for use in KEYMAT generation upon finalizing the ESP SA update.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-7">
在完成ESP SA更新后，收到Diffie Hellman密钥，用于生成密钥垫。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2. If the system generated a new Diffie-Hellman key in the previous step, or if it received a DIFFIE_HELLMAN parameter, it sets the ESP_INFO KEYMAT Index to zero. Otherwise, the ESP_INFO KEYMAT Index MUST be greater than or equal to the index of the next byte to be drawn from the current KEYMAT. In this case, it is RECOMMENDED that the host use the KEYMAT Index requested by the peer in the received ESP_INFO.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2. 如果系统在上一步中生成了新的Diffie Hellman密钥，或者收到Diffie_Hellman参数，则会将ESP_INFO KEYMAT索引设置为零。否则，ESP_信息键盘索引必须大于或等于从当前键盘提取的下一个字节的索引。在这种情况下，建议主机在收到的ESP_信息中使用对等方请求的键盘索引。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
3. The system creates an UPDATE packet, which contains an ESP_INFO parameter and the optional DIFFIE_HELLMAN parameter. This UPDATE would also typically acknowledge the peer&#39;s UPDATE with an ACK parameter, although a separate UPDATE ACK may be sent.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
3. 系统创建一个更新包，其中包含一个ESP_INFO参数和可选的DIFFIE_HELLMAN参数。此更新通常也会使用ACK参数确认对等方的更新，尽管可能会发送单独的更新ACK。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
4. The system sends the UPDATE packet and stores any received ESP_INFO and DIFFIE_HELLMAN parameters. At this point, it only needs to receive an acknowledgment for the newly sent UPDATE to finish ESP SA update. In the usual case, the acknowledgment is handled by the underlying UPDATE mechanism.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
4. 系统发送更新数据包并存储任何接收到的ESP_信息和DIFFIE_HELLMAN参数。此时，它只需要接收对新发送的更新的确认即可完成ESP SA更新。在通常情况下，确认由底层更新机制处理。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6.10. Finalizing Rekeying
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6.10. 完成密钥更新
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A system finalizes rekeying when it has both received the corresponding UPDATE acknowledgment packet from the peer and it has successfully received the peer&#39;s UPDATE. The following steps are taken:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
当系统从对等方接收到相应的更新确认数据包并且成功接收到对等方的更新时，系统将完成密钥更新。采取以下步骤：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1. If the received UPDATE messages contain a new Diffie-Hellman key, the system has a new Diffie-Hellman key due to initiating ESP SA update, or both, the system generates a new KEYMAT. If there is only one new Diffie-Hellman key, the old existing key is used as the other key.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1. 如果收到的更新消息包含一个新的Diffie-Hellman密钥，则由于启动ESP SA更新，系统具有一个新的Diffie-Hellman密钥，或者两者都有，系统将生成一个新的KEYMAT。如果只有一个新的Diffie-Hellman密钥，则使用现有的旧密钥作为另一个密钥。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2. If the system generated a new KEYMAT in the previous step, it sets the KEYMAT Index to zero, independent of whether the received UPDATE included a Diffie-Hellman key or not. If the system did not generate a new KEYMAT, it uses the greater KEYMAT Index of the two (sent and received) ESP_INFO parameters.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2. 如果系统在上一步中生成了一个新的KEYMAT，它会将KEYMAT索引设置为零，这与接收到的更新是否包含Diffie-Hellman密钥无关。如果系统未生成新的键盘，则使用两个（已发送和已接收）ESP_信息参数中较大的键盘索引。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
3. The system draws keys for new incoming and outgoing ESP SAs, starting from the KEYMAT Index, and prepares new incoming and outgoing ESP SAs. The SPI for the outgoing SA is the new SPI value received in an ESP_INFO parameter. The SPI for the incoming SA was generated when the ESP_INFO was sent to the peer. The order of the keys retrieved from the KEYMAT during the rekeying process is similar to that described in Section 7.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
3. 系统从KEYMAT索引开始为新的传入和传出ESP SA绘制键，并准备新的传入和传出ESP SA。传出SA的SPI是在ESP_INFO参数中接收到的新SPI值。传入SA的SPI是在向对等方发送ESP_信息时生成的。在重新设置钥匙的过程中，从键盘检索到的钥匙的顺序与第7节中描述的相似。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-7">
Note, that only IPsec ESP keys are retrieved during the rekeying process, not the HIP keys.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-7">
请注意，在重新设置密钥的过程中，仅检索IPsec ESP密钥，而不是HIP密钥。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
4. The system starts to send to the new outgoing SA and prepares to start receiving data on the new incoming SA. Once the system receives data on the new incoming SA, it may safely delete the old SAs.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
4. 系统开始向新的传出SA发送数据，并准备开始接收新传入SA上的数据。一旦系统接收到新传入SA上的数据，它就可以安全地删除旧SA。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6.11. Processing NOTIFY Packets
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6.11. 处理通知数据包
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The processing of NOTIFY packets is described in the HIP base specification.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
HIP基本规范中描述了通知数据包的处理。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
7. Keying Material
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
7. 键控材料
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The keying material is generated as described in the HIP base specification. During the base exchange, the initial keys are drawn from the generated material. After the HIP association keys have been drawn, the ESP keys are drawn in the following order:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
键控材料按照HIP基座规范中的描述生成。在基本交换过程中，初始关键帧将从生成的材质中绘制。绘制髋部关联关键点后，将按以下顺序绘制ESP关键点：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
SA-gl ESP encryption key for HOST_g&#39;s outgoing traffic
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
主机的传出流量的SA gl ESP加密密钥
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
SA-gl ESP authentication key for HOST_g&#39;s outgoing traffic
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
主机的传出流量的SA gl ESP身份验证密钥
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
SA-lg ESP encryption key for HOST_l&#39;s outgoing traffic
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
主机传出流量的SA lg ESP加密密钥
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
SA-lg ESP authentication key for HOST_l&#39;s outgoing traffic
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
主机传出流量的SA lg ESP身份验证密钥
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
HOST_g denotes the host with the greater HIT value, and HOST_l denotes the host with the lower HIT value. When HIT values are compared, they are interpreted as positive (unsigned) 128-bit integers in network byte order.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
HOST_g表示命中值较大的主机，HOST_l表示命中值较低的主机。比较命中值时，它们将按网络字节顺序解释为正（无符号）128位整数。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The four HIP keys are only drawn from KEYMAT during a HIP I1-&gt;R2 exchange. Subsequent rekeys using UPDATE will only draw the four ESP keys from KEYMAT. Section 6.9 describes the rules for reusing or regenerating KEYMAT based on the rekeying.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
四个髋关节键仅在髋关节I1-&gt;R2交换期间从KEYMAT中绘制。随后使用UPDATE重新设置密钥将仅从KEYMAT中绘制四个ESP密钥。第6.9节描述了基于重新键入的键盘的重用或再生规则。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The number of bits drawn for a given algorithm is the &#34;natural&#34; size of the keys. For the mandatory algorithms, the following sizes apply:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
为给定算法绘制的位数是密钥的“自然”大小。对于强制算法，以下尺寸适用：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
AES 128 bits
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
AES 128位
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
SHA-1 160 bits
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
SHA-1 160位
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
NULL 0 bits
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
零0位
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
8. Security Considerations
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
8. 安全考虑
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In this document, the usage of ESP [RFC4303] between HIP hosts to protect data traffic is introduced. The Security Considerations for ESP are discussed in the ESP specification.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在本文档中，介绍了在HIP主机之间使用ESP[RFC4303]来保护数据流量。ESP规范中讨论了ESP的安全注意事项。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
There are different ways to establish an ESP Security Association between two nodes. This can be done, e.g., using IKE [RFC4306]. This document specifies how the Host Identity Protocol is used to establish ESP Security Associations.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
有不同的方法在两个节点之间建立ESP安全关联。这可以通过使用IKE[RFC4306]来实现。本文档指定如何使用主机标识协议建立ESP安全关联。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The following issues are new or have changed from the standard ESP usage:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
以下问题是新问题，或与标准ESP用法不同：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Initial keying material generation
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 初始键控材质生成
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Updating the keying material
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 更新键控材质
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The initial keying material is generated using the Host Identity Protocol [RFC5201] using the Diffie-Hellman procedure. This document extends the usage of the UPDATE packet, defined in the base specification, to modify existing ESP SAs. The hosts may rekey, i.e., force the generation of new keying material using the Diffie-Hellman procedure. The initial setup of ESP SA between the hosts is done during the base exchange, and the message exchange is protected using methods provided by base exchange. Changes in connection parameters means basically that the old ESP SA is removed and a new one is generated once the UPDATE message exchange has been completed. The message exchange is protected using the HIP association keys. Both HMAC and signing of packets is used.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
使用主机标识协议[RFC5201]和Diffie-Hellman程序生成初始密钥材料。本文档扩展了基本规范中定义的更新数据包的用法，以修改现有的ESP SA。主机可以重新键控，即使用Diffie-Hellman过程强制生成新的键控材料。主机之间ESP SA的初始设置在基本交换期间完成，消息交换使用基本交换提供的方法进行保护。连接参数的更改基本上意味着旧的ESP SA将被删除，更新消息交换完成后将生成一个新的ESP SA。消息交换使用HIP关联键进行保护。使用HMAC和数据包签名。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
9. IANA Considerations
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
9. IANA考虑
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document defines additional parameters and NOTIFY error types for the Host Identity Protocol [RFC5201].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本文档定义了主机标识协议[RFC5201]的其他参数和通知错误类型。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The new parameters and their type numbers are defined in Section 5.1.1 and Section 5.1.2, and they have been added to the Parameter Type namespace specified in [RFC5201].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
第5.1.1节和第5.1.2节定义了新参数及其类型号，并将其添加到[RFC5201]中指定的参数类型名称空间中。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The new NOTIFY error types and their values are defined in Section 5.1.3, and they have been added to the Notify Message Type namespace specified in [RFC5201].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
第5.1.3节定义了新的通知错误类型及其值，并将其添加到[RFC5201]中指定的通知消息类型命名空间中。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
10. Acknowledgments
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
10. 致谢
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document was separated from the base &#34;Host Identity Protocol&#34; specification in the beginning of 2005. Since then, a number of people have contributed to the text by providing comments and modification proposals. The list of people include Tom Henderson, Jeff Ahrenholz, Jan Melen, Jukka Ylitalo, and Miika Komu. The authors also want to thank Charlie Kaufman for reviewing the document with his eye on the usage of crypto algorithms.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本文档于2005年初从基本的“主机标识协议”规范中分离出来。自那时以来，许多人通过提供评论和修改建议对案文作出了贡献。名单上的人包括汤姆·亨德森、杰夫·阿伦霍尔茨、扬·梅伦、朱卡·叶利塔洛和米卡·科姆。作者还想感谢查理·考夫曼（Charlie Kaufman）对该文件的审查，他着眼于加密算法的使用。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Due to the history of this document, most of the ideas are inherited from the base &#34;Host Identity Protocol&#34; specification. Thus, the list of people in the Acknowledgments section of that specification is also valid for this document. Many people have given valuable feedback, and our apologies to anyone whose name is missing.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
由于本文档的历史，大部分思想都继承自基本的“主机标识协议”规范。因此，该规范的确认部分中的人员列表也适用于本文档。许多人都给出了宝贵的反馈，我们向所有姓名不见的人道歉。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
11. References
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
11. 工具书类
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
11.1. Normative references
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
11.1. 规范性引用文件
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC2119] Bradner, S., &#34;Key words for use in RFCs to Indicate Requirement Levels&#34;, BCP 14, RFC 2119, March 1997.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC2119]Bradner，S.，“RFC中用于表示需求水平的关键词”，BCP 14，RFC 2119，1997年3月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC2404] Madson, C. and R. Glenn, &#34;The Use of HMAC-SHA-1-96 within ESP and AH&#34;, RFC 2404, November 1998.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC2404]Madson，C.和R.Glenn，“在ESP和AH中使用HMAC-SHA-1-96”，RFC 2404，1998年11月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC3602] Frankel, S., Glenn, R., and S. Kelly, &#34;The AES-CBC Cipher Algorithm and Its Use with IPsec&#34;, RFC 3602, September 2003.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC3602]Frankel，S.，Glenn，R.，和S.Kelly，“AES-CBC密码算法及其在IPsec中的使用”，RFC 3602，2003年9月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC4303] Kent, S., &#34;IP Encapsulating Security Payload (ESP)&#34;, RFC 4303, December 2005.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC4303]Kent，S.，“IP封装安全有效载荷（ESP）”，RFC 4303，2005年12月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC5201] Moskowitz, R., Nikander, P., Jokela, P., Ed., and T. Henderson, &#34;Host Identity Protocol&#34;, RFC 5201, April 2008.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC5201]Moskowitz，R.，Nikander，P.，Jokela，P.，Ed.，和T.Henderson，“主机身份协议”，RFC 52012008年4月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
11.2. Informative references
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
11.2. 参考资料
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[ESP-BEET] Nikander, P. and J. Melen, &#34;A Bound End-to-End Tunnel (BEET) mode for ESP&#34;, Work in Progress, November 2007.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[ESP-BEET]Nikander，P.和J.Melen，“ESP的绑定端到端隧道（BEET）模式”，正在进行的工作，2007年11月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC3260] Grossman, D., &#34;New Terminology and Clarifications for Diffserv&#34;, RFC 3260, April 2002.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC3260]Grossman，D.“区分服务的新术语和澄清”，RFC 3260，2002年4月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC3474] Lin, Z. and D. Pendarakis, &#34;Documentation of IANA assignments for Generalized MultiProtocol Label Switching (GMPLS) Resource Reservation Protocol - Traffic Engineering (RSVP-TE) Usage and Extensions for Automatically Switched Optical Network (ASON)&#34;, RFC 3474, March 2003.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC3474]Lin，Z.和D.Pendarakis，“通用多协议标签交换（GMPLS）资源预留协议的IANA分配文件-自动交换光网络（ASON）的流量工程（RSVP-TE）使用和扩展”，RFC 3474，2003年3月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC4301] Kent, S. and K. Seo, &#34;Security Architecture for the Internet Protocol&#34;, RFC 4301, December 2005.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC4301]Kent，S.和K.Seo，“互联网协议的安全架构”，RFC 43012005年12月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC4306] Kaufman, C., &#34;Internet Key Exchange (IKEv2) Protocol&#34;, RFC 4306, December 2005.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC4306]Kaufman，C.，“互联网密钥交换（IKEv2）协议”，RFC43062005年12月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC4423] Moskowitz, R. and P. Nikander, &#34;Host Identity Protocol (HIP) Architecture&#34;, RFC 4423, May 2006.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC4423]Moskowitz，R.和P.Nikander，“主机身份协议（HIP）体系结构”，RFC 4423，2006年5月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC5206] Henderson, T., Ed., &#34;End-Host Mobility and Multihoming with the Host Identity Protocol&#34;, RFC 5206, April 2008.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC5206]Henderson，T.，Ed.“终端主机移动性和主机身份协议的多宿”，RFC 5206，2008年4月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
Appendix A. A Note on Implementation Options
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
附录A.关于实施方案的说明
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
It is possible to implement this specification in multiple different ways. As noted above, one possible way of implementing this is to rewrite IP headers below IPsec. In such an implementation, IPsec is used as if it was processing IPv6 transport mode packets, with the IPv6 header containing HITs instead of IP addresses in the source and destination address fields. In outgoing packets, after IPsec processing, the HITs are replaced with actual IP addresses, based on the HITs and the SPI. In incoming packets, before IPsec processing, the IP addresses are replaced with HITs, based on the SPI in the incoming packet. In such an implementation, all IPsec policies are based on HITs and the upper layers only see packets with HITs in the place of IP addresses. Consequently, support of HIP does not conflict with other uses of IPsec as long as the SPI spaces are kept separate.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
可以通过多种不同的方式实现此规范。如上所述，实现这一点的一种可能方法是在IPsec下重写IP头。在这样的实现中，IPsec的使用就像它在处理IPv6传输模式数据包一样，IPv6报头在源地址和目标地址字段中包含命中而不是IP地址。在传出数据包中，经过IPsec处理后，根据HITs和SPI将HITs替换为实际IP地址。在传入数据包中，在IPsec处理之前，IP地址将根据传入数据包中的SPI替换为HITs。在这样的实现中，所有IPsec策略都基于命中，上层只看到在IP地址位置有命中的数据包。因此，只要SPI空间保持分离，HIP的支持就不会与IPsec的其他用途发生冲突。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Another way to implement this specification is to use the proposed BEET mode (A Bound End-to-End mode for ESP, [ESP-BEET]). The BEET mode provides some features from both IPsec tunnel and transport modes. The HIP uses HITs as the &#34;inner&#34; addresses and IP addresses as &#34;outer&#34; addresses, like IP addresses are used in the tunnel mode. Instead of tunneling packets between hosts, a conversion between inner and outer addresses is made at end-hosts and the inner address is never sent on the wire after the initial HIP negotiation. BEET provides IPsec transport mode syntax (no inner headers) with limited tunnel mode semantics (fixed logical inner addresses - the HITs - and changeable outer IP addresses).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
实现本规范的另一种方法是使用建议的BEET模式（ESP的绑定端到端模式，[ESP-BEET]）。BEET模式提供了IPsec隧道和传输模式的一些功能。HIP使用HITs作为“内部”地址，IP地址作为“外部”地址，就像在隧道模式中使用IP地址一样。在终端主机上进行内部地址和外部地址之间的转换，而不是在主机之间通过隧道传输数据包，并且在初始HIP协商之后，内部地址永远不会在线路上发送。BEET提供IPsec传输模式语法（无内部头）和有限的隧道模式语义（固定的逻辑内部地址-点击-和可变的外部IP地址）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Compared to the option of implementing the required address rewrites outside of IPsec, BEET has one implementation level benefit. The BEET-way of implementing the address rewriting keeps all the configuration information in one place, at the SAD. On the other hand, when address rewriting is implemented separately, the implementation must make sure that the information in the SAD and the separate address rewriting DB are kept in synchrony. As a result, the BEET-mode-based way of implementing this specification is RECOMMENDED over the separate implementation.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
与在IPsec之外实现所需地址重写的选项相比，BEET有一个实现级别的优势。实现地址重写的BEET方法将所有配置信息保持在一个位置，即SAD。另一方面，当单独实现地址重写时，实现必须确保SAD和单独的地址重写DB中的信息保持同步。因此，建议采用基于BEET模式的方法来实施本规范，而不是单独实施。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Authors&#39; Addresses
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
作者地址
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Petri Jokela Ericsson Research NomadicLab JORVAS FIN-02420 FINLAND
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Petri Jokela Ericsson研究实验室JORVAS FIN-02420芬兰
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   Phone: +358 9 299 1
   EMail: petri.jokela@nomadiclab.com
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   Phone: +358 9 299 1
   EMail: petri.jokela@nomadiclab.com
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Robert Moskowitz ICSAlabs, An Independent Division of Verizon Business Systems 1000 Bent Creek Blvd, Suite 200 Mechanicsburg, PA USA
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Robert Moskowitz ICSAlabs，Verizon Business Systems的一个独立部门，地址：美国宾夕法尼亚州Mechanicsburg Bent Creek Blvd 1000号200室
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   EMail: rgm@icsalabs.com
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   EMail: rgm@icsalabs.com
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Pekka Nikander Ericsson Research NomadicLab JORVAS FIN-02420 FINLAND
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
佩卡·尼坎德·爱立信研究实验室JORVAS FIN-02420芬兰
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   Phone: +358 9 299 1
   EMail: pekka.nikander@nomadiclab.com
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   Phone: +358 9 299 1
   EMail: pekka.nikander@nomadiclab.com
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Full Copyright Statement
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
完整版权声明
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Copyright (C) The IETF Trust (2008).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
版权所有（C）IETF信托基金（2008年）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document is subject to the rights, licenses and restrictions contained in BCP 78, and except as set forth therein, the authors retain all their rights.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本文件受BCP 78中包含的权利、许可和限制的约束，除其中规定外，作者保留其所有权利。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document and the information contained herein are provided on an &#34;AS IS&#34; basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本文件及其包含的信息以“原样”为基础提供，贡献者、他/她所代表或赞助的组织（如有）、互联网协会、IETF信托基金和互联网工程任务组不承担任何明示或暗示的担保，包括但不限于任何保证，即使用本文中的信息不会侵犯任何权利，或对适销性或特定用途适用性的任何默示保证。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Intellectual Property
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
知识产权
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The IETF takes no position regarding the validity or scope of any Intellectual Property Rights or other rights that might be claimed to pertain to the implementation or use of the technology described in this document or the extent to which any license under such rights might or might not be available; nor does it represent that it has made any independent effort to identify any such rights. Information on the procedures with respect to rights in RFC documents can be found in BCP 78 and BCP 79.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IETF对可能声称与本文件所述技术的实施或使用有关的任何知识产权或其他权利的有效性或范围，或此类权利下的任何许可可能或可能不可用的程度，不采取任何立场；它也不表示它已作出任何独立努力来确定任何此类权利。有关RFC文件中权利的程序信息，请参见BCP 78和BCP 79。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Copies of IPR disclosures made to the IETF Secretariat and any assurances of licenses to be made available, or the result of an attempt made to obtain a general license or permission for the use of such proprietary rights by implementers or users of this specification can be obtained from the IETF on-line IPR repository at http://www.ietf.org/ipr.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
向IETF秘书处披露的知识产权副本和任何许可证保证，或本规范实施者或用户试图获得使用此类专有权利的一般许可证或许可的结果，可从IETF在线知识产权存储库获取，网址为http://www.ietf.org/ipr.
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The IETF invites any interested party to bring to its attention any copyrights, patents or patent applications, or other proprietary rights that may cover technology that may be required to implement this standard. Please address the information to the IETF at ietf-ipr@ietf.org.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IETF邀请任何相关方提请其注意任何版权、专利或专利申请，或其他可能涵盖实施本标准所需技术的专有权利。请将信息发送至IETF的IETF-ipr@ietf.org.
        </p>
      </div>
    </div>
  </div>
  <div id="rfc_footer"></div>
</body>
</html>
