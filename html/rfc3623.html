<!DOCTYPE html>

<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>RFC 3623:  Graceful OSPF Restart  中文翻译</title>

  <link rel="shortcut icon" type="image/x-icon"
    href="favicon.ico" />

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

  <link rel="stylesheet" href="master.css">
  <script src="index.js"></script>
  <script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?b7f7721ebaa11b23aaf77df0590e7f4a";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();
  </script>
  <script data-ad-client="ca-pub-9129771189441092" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  
</head>
<body>
  <nav class="navbar navbar-expand navbar-light bg-light">
    <a class="navbar-brand" href="index.html">RFC Trans</a>
    <div class="collapse navbar-collapse" id="navbarText">
      <div class="navbar-nav mr-auto">
        <a class="nav-item nav-link" href="privacy-policy.html">Privacy Policy</a>
        <a class="nav-item nav-link" href="contact.html">Contact</a>
        <a class="nav-item nav-link" href="../figs/html/index.html">Figs</a>
      </div>
    </div>
  </nav>

  <span id="rfc_number" class="hidden">3623</span>
  <div style="height: 1ex;"></div>
  <div class="jump-to-original-rfc-container">
    <a href="https://datatracker.ietf.org/doc/html/rfc3623">
      <button type="button" class="btn btn-light btn-sm">
        <span class="jump-to-original-rfc">Orig</span>
      </button>
    </a>
  </div>
  <div class="container">
    <div class="row">
      <div id="rfc_header" class="col-sm-12 col-md-12">
        <div class="alert alert-info" role="alert">
          <h1 class="alert-heading">RFC 3623:  Graceful OSPF Restart  中文翻译</h1>
          <span class="URL">URL :
            <a href="https://datatracker.ietf.org/doc/html/rfc3623">
              https://datatracker.ietf.org/doc/html/rfc3623
            </a>
          </span><br>
          <span class="title_ja">
            标题 : <strong>RFC 3623</strong></span><br>
          <span class="updated_by">翻译编辑 : 自动生成</span><br>
        </div>
      </div>
      <div id="rfc_alert" class="col-sm-12 col-md-12 hidden" role="alert">
        <div class="alert alert-danger">
          <span id="rfc_alert_obsoleted_by"></span>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
Network Working Group                                             J. Moy
Request for Comments: 3623                             Sycamore Networks
Category: Standards Track                              P. Pillay-Esnault
                                                        Juniper Networks
                                                               A. Lindem
                                                        Redback Networks
                                                           November 2003
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
Network Working Group                                             J. Moy
Request for Comments: 3623                             Sycamore Networks
Category: Standards Track                              P. Pillay-Esnault
                                                        Juniper Networks
                                                               A. Lindem
                                                        Redback Networks
                                                           November 2003
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-25">
Graceful OSPF Restart
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-25">
优雅的OSPF重启
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Status of this Memo
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
本备忘录的状况
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document specifies an Internet standards track protocol for the Internet community, and requests discussion and suggestions for improvements. Please refer to the current edition of the &#34;Internet Official Protocol Standards&#34; (STD 1) for the standardization state and status of this protocol. Distribution of this memo is unlimited.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本文件规定了互联网社区的互联网标准跟踪协议，并要求进行讨论和提出改进建议。有关本协议的标准化状态和状态，请参考当前版本的“互联网官方协议标准”（STD 1）。本备忘录的分发不受限制。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Copyright Notice
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
版权公告
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Copyright (C) The Internet Society (2003). All Rights Reserved.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
版权所有（C）互联网协会（2003年）。版权所有。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Abstract
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
摘要
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This memo documents an enhancement to the OSPF routing protocol, whereby an OSPF router can stay on the forwarding path even as its OSPF software is restarted. This is called &#34;graceful restart&#34; or &#34;non-stop forwarding&#34;. A restarting router may not be capable of adjusting its forwarding in a timely manner when the network topology changes. In order to avoid the possible resulting routing loops, the procedure in this memo automatically reverts to a normal OSPF restart when such a topology change is detected, or when one or more of the restarting router&#39;s neighbors do not support the enhancements in this memo. Proper network operation during a graceful restart makes assumptions upon the operating environment of the restarting router; these assumptions are also documented.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
此备忘录记录了对OSPF路由协议的增强，OSPF路由器可以在其OSPF软件重新启动时保持在转发路径上。这称为“优雅重启”或“不间断转发”。当网络拓扑发生变化时，重新启动的路由器可能无法及时调整其转发。为了避免可能产生的路由循环，当检测到这种拓扑变化时，或者当一个或多个重启路由器的邻居不支持此备忘录中的增强功能时，此备忘录中的过程自动恢复为正常OSPF重启。在优雅重启期间，正确的网络操作会对重启路由器的操作环境做出假设；这些假设也被记录在案。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Table of Contents
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
目录
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace toc">
   1.  Overview . . . . . . . . . . . . . . . . . . . . . . . . . . .  2
   2.  Operation of Restarting Router . . . . . . . . . . . . . . . .  3
       2.1.  Entering Graceful Restart. . . . . . . . . . . . . . . .  4
       2.2.  When to Exit Graceful Restart. . . . . . . . . . . . . .  5
       2.3.  Actions on Exiting Graceful Restart. . . . . . . . . . .  6
   3.  Operation of Helper Neighbor . . . . . . . . . . . . . . . . .  7
       3.1.  Entering Helper Mode . . . . . . . . . . . . . . . . . .  7
       3.2.  Exiting Helper Mode. . . . . . . . . . . . . . . . . . .  8
   4.  Backward Compatibility . . . . . . . . . . . . . . . . . . . .  9
   5.  Unplanned Outages. . . . . . . . . . . . . . . . . . . . . . . 10
   6.  Interaction with Traffic Engineering . . . . . . . . . . . . . 11
   7.  Possible Future Work . . . . . . . . . . . . . . . . . . . . . 11
   8.  Intellectual Property Rights Notice. . . . . . . . . . . . . . 11
   9.  References . . . . . . . . . . . . . . . . . . . . . . . . . . 11
       9.1.  Normative References . . . . . . . . . . . . . . . . . . 11
       9.2.  Informative References . . . . . . . . . . . . . . . . . 11
   A.  Grace-LSA Format . . . . . . . . . . . . . . . . . . . . . . . 13
   B.  Configurable Parameters. . . . . . . . . . . . . . . . . . . . 15
   Security Considerations. . . . . . . . . . . . . . . . . . . . . . 16
   Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . . . 16
   Authors&#39; Addresses . . . . . . . . . . . . . . . . . . . . . . . . 17
   Full Copyright Statement . . . . . . . . . . . . . . . . . . . . . 18
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace toc">
   1.  Overview . . . . . . . . . . . . . . . . . . . . . . . . . . .  2
   2.  Operation of Restarting Router . . . . . . . . . . . . . . . .  3
       2.1.  Entering Graceful Restart. . . . . . . . . . . . . . . .  4
       2.2.  When to Exit Graceful Restart. . . . . . . . . . . . . .  5
       2.3.  Actions on Exiting Graceful Restart. . . . . . . . . . .  6
   3.  Operation of Helper Neighbor . . . . . . . . . . . . . . . . .  7
       3.1.  Entering Helper Mode . . . . . . . . . . . . . . . . . .  7
       3.2.  Exiting Helper Mode. . . . . . . . . . . . . . . . . . .  8
   4.  Backward Compatibility . . . . . . . . . . . . . . . . . . . .  9
   5.  Unplanned Outages. . . . . . . . . . . . . . . . . . . . . . . 10
   6.  Interaction with Traffic Engineering . . . . . . . . . . . . . 11
   7.  Possible Future Work . . . . . . . . . . . . . . . . . . . . . 11
   8.  Intellectual Property Rights Notice. . . . . . . . . . . . . . 11
   9.  References . . . . . . . . . . . . . . . . . . . . . . . . . . 11
       9.1.  Normative References . . . . . . . . . . . . . . . . . . 11
       9.2.  Informative References . . . . . . . . . . . . . . . . . 11
   A.  Grace-LSA Format . . . . . . . . . . . . . . . . . . . . . . . 13
   B.  Configurable Parameters. . . . . . . . . . . . . . . . . . . . 15
   Security Considerations. . . . . . . . . . . . . . . . . . . . . . 16
   Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . . . 16
   Authors&#39; Addresses . . . . . . . . . . . . . . . . . . . . . . . . 17
   Full Copyright Statement . . . . . . . . . . . . . . . . . . . . . 18
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
1. Overview
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
1. 概述
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Today many Internet routers implement a separation of control and forwarding functions. Certain processors are dedicated to control and management tasks such as OSPF routing, while other processors perform the data forwarding tasks. This separation creates the possibility of maintaining a router&#39;s data forwarding capability while the router&#39;s control software is restarted/reloaded. We call such a possibility &#34;graceful restart&#34; or &#34;non-stop forwarding&#34;.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
今天，许多互联网路由器实现了控制和转发功能的分离。某些处理器专用于控制和管理任务，如OSPF路由，而其他处理器则执行数据转发任务。这种分离创造了在路由器控制软件重新启动/重新加载时保持路由器数据转发能力的可能性。我们称这种可能性为“优雅重启”或“不间断转发”。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The OSPF protocol presents a problem to graceful restart whereby, under normal operation, OSPF intentionally routes around a restarting router while it rebuilds its link-state database. OSPF avoids the restarting router to minimize the possibility of routing loops and/or black holes caused by lack of database synchronization. Avoidance is accomplished by having the router&#39;s neighbors reissue their LSAs, omitting links to the restarting router.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
OSPF协议给优雅重启带来了一个问题，在正常操作下，OSPF在重建其链路状态数据库的同时，故意在重启路由器周围路由。OSPF避免重新启动路由器，以最小化因缺少数据库同步而导致路由环路和/或黑洞的可能性。通过让路由器的邻居重新发出他们的LSA，省略到重新启动的路由器的链接，可以实现规避。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
However, if (a) the network topology remains stable and (b) the restarting router is able to keep its forwarding table(s) across the restart, it would be safe to keep the restarting router on the forwarding path. This memo documents an enhancement to OSPF that makes such graceful restart possible, and automatically reverts back
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
但是，如果（a）网络拓扑保持稳定，并且（b）重启路由器能够在重启期间保持其转发表，则将重启路由器保持在转发路径上是安全的。此备忘录记录了对OSPF的一项增强，使这种优雅的重启成为可能，并自动恢复
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
to a standard OSPF restart for safety when network topology changes are detected.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
当检测到网络拓扑发生变化时，为安全起见，重新启动标准OSPF。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In a nutshell, the OSPF enhancements for graceful restart are as follows:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
简而言之，OSPF对优雅重启的增强如下：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
- The router attempting a graceful restart originates link-local Opaque-LSAs, herein called Grace-LSAs, announcing its intention to perform a graceful restart within a specified amount of time or &#34;grace period&#34;.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
- 尝试优雅重启的路由器发起链路本地不透明LSA，在此称为优雅LSA，宣布其打算在指定的时间量或“宽限期”内执行优雅重启。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
- During the grace period, its neighbors continue to announce the restarting router in their LSAs as if it were fully adjacent (i.e., OSPF neighbor state Full), but only if the network topology remains static (i.e., the contents of the LSAs in the link-state database having LS types 1-5,7 remain unchanged and periodic refreshes are allowed).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
- 在宽限期内，其邻居继续在其LSA中宣布重新启动路由器，就好像它是完全相邻的（即OSPF邻居状态已满），但前提是网络拓扑保持静态（即，链路状态数据库中LS类型为1-5,7的LSA的内容保持不变，并且允许定期刷新）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
There are two roles being played by OSPF routers during graceful restart. First there is the router that is being restarted. The operation of this router during graceful restart, including how the router enters and exits graceful restart, is the subject of Section 2. Then there are the router&#39;s neighbors, which must cooperate in order for the restart to be graceful. During graceful restart, we say that the neighbors are running in &#34;helper mode&#34;. Section 3 covers the responsibilities of a router running in helper mode, including entering and exiting helper mode.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
OSPF路由器在正常重启期间扮演两个角色。首先是正在重新启动的路由器。本路由器在优雅重启期间的操作，包括路由器如何进入和退出优雅重启，是第2节的主题。然后是路由器的邻居，它们必须合作才能顺利重启。在优雅的重启过程中，我们说邻居在“助手模式”下运行。第3节介绍了在助手模式下运行的路由器的职责，包括进入和退出助手模式。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2. Operation of Restarting Router
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2. 重启路由器的操作
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
After the router restarts/reloads, it must change its OSPF processing somewhat until it re-establishes full adjacencies with all its former fully-adjacent neighbors. This time period, between the restart/reload and the reestablishment of adjacencies, is called &#34;graceful restart&#34;. During graceful restart:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
在路由器重新启动/重新加载后，它必须稍微更改其OSPF处理，直到它与所有以前完全相邻的邻居重新建立完全邻接。重新启动/重新加载和重新建立邻接之间的这段时间称为“优雅重新启动”。重新启动期间：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
1) The restarting router does not originate LSAs with LS types 1- 5,7. Instead, the restarting router wants the other routers in the OSPF domain to calculate routes using the LSAs that it originated prior to its restart. During this time, the restarting router does not modify or flush received self-originated LSAs, (see Section 13.4 of [1]). Instead they are accepted as valid. In particular, the grace-LSAs that the restarting router originated before the restart are left in place. Received self-originated LSAs will be dealt with when the router exits graceful restart (see Section 2.3).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
1) 重新启动的路由器不会以LS类型1-5,7发起LSA。相反，重新启动的路由器希望OSPF域中的其他路由器使用它在重新启动之前发起的LSA来计算路由。在此期间，重新启动的路由器不会修改或刷新收到的自创LSA（见[1]第13.4节）。相反，它们被认为是有效的。特别是，重新启动路由器在重新启动之前发起的宽限LSA保留在原位。当路由器退出正常重启时，将处理接收到的自源LSA（参见第2.3节）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
2) The restarting router runs its OSPF routing calculations, as specified in Section 16 of [1]. This is necessary to return any OSPF virtual links to operation. However, the restarting router does *not* install OSPF routes into the system&#39;s forwarding table(s) and relies on the forwarding entries that it installed prior to the restart.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
2) 重新启动路由器运行其OSPF路由计算，如[1]第16节所述。这是使任何OSPF虚拟链路恢复运行所必需的。但是，重新启动的路由器*不*将OSPF路由安装到系统的转发表中，并且依赖于重新启动之前安装的转发条目。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
3) If the restarting router determines that it was the Designated Router on a given segment prior to the restart, it elects itself as the Designated Router again. The restarting router knows that it was the Designated Router if, while the associated interface is in Waiting state, a Hello packet is received from a neighbor listing the router as the Designated Router.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
3) 如果重新启动的路由器在重新启动之前确定它是给定网段上的指定路由器，它将再次选择自己作为指定路由器。重新启动的路由器知道它是指定的路由器，如果在相关接口处于等待状态时，从邻居接收到一个Hello数据包，将该路由器列为指定的路由器。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Otherwise, the restarting router operates the same as any other OSPF router. It discovers neighbors using OSPF&#39;s Hello protocol, elects Designated and Backup Designated Routers, performs the Database Exchange procedure to initially synchronize link-state databases with its neighbors, and maintains this synchronization through flooding.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
否则，重新启动路由器的操作与任何其他OSPF路由器相同。它使用OSPF的Hello协议发现邻居，选择指定的和备份指定的路由器，执行数据库交换过程以最初将链路状态数据库与其邻居同步，并通过泛洪保持这种同步。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The processes of entering graceful restart, and of exiting graceful restart (either successfully or not) are covered in the following sections.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
以下部分介绍了进入优雅重启和退出优雅重启（成功或失败）的过程。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.1. Entering Graceful Restart
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.1. 进入优雅重启
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The router (call it Router X) is informed of the desire for its graceful restart when an appropriate command is issued by the network operator. The network operator may also specify the length of the grace period, or the necessary grace period may be calculated by the router&#39;s OSPF software. In order to avoid the restarting router&#39;s LSAs from aging out, the grace period should not exceed LSRefreshTime (1800 second) [1].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
当网络运营商发出适当的命令时，路由器（称之为路由器X）会被告知需要优雅地重新启动。网络运营商还可以指定宽限期的长度，或者必要的宽限期可以由路由器的OSPF软件计算。为了避免重新启动路由器的LSA老化，宽限期不应超过LSRefreshTime（1800秒）[1]。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In preparation for the graceful restart, Router X must perform the following actions before its software is restarted/reloaded:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
为准备正常重启，路由器X必须在其软件重启/重新加载之前执行以下操作：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
(Note that common OSPF shutdown procedures are *not* performed, since we want the other OSPF routers to act as if Router X remains in continuous service. For example, Router X does not flush its locally originated LSAs, since we want them to remain in other routers&#39; link-state databases throughout the restart period.)
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
（请注意，由于我们希望其他OSPF路由器的行为如同路由器X保持连续服务一样，因此不执行普通OSPF关闭程序。例如，路由器X不刷新其本地起源的LSA，因为我们希望它们在重启期间保持在其他路由器的链路状态数据库中。）
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
1) Router X must ensure that its forwarding table(s) is/are up-to-date and will remain in place across the restart.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
1) 路由器X必须确保其转发表是最新的，并在重启期间保持在原位。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
2) The router may need to preserve the cryptographic sequence numbers being used on each interface in non-volatile storage. An alternative is to use the router&#39;s clock for cryptographic sequence number generation and ensure that the clock is preserved across restarts (either on the same or redundant route processors). If neither of these can be guaranteed, it can take up to RouterDeadInterval seconds after the restart before adjacencies can be reestablished and this would force the grace period to be lengthened greatly.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
2) 路由器可能需要在非易失性存储器中保存每个接口上使用的加密序列号。另一种方法是使用路由器的时钟生成加密序列号，并确保在重启期间（在相同或冗余路由处理器上）保持该时钟。如果这两种情况都不能得到保证，则在重新启动后，可能需要长达RouterReadInterval秒的时间才能重新建立相邻关系，这将迫使宽限期大大延长。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Router X then originates the grace-LSAs. These are link-local Opaque-LSAs (see Appendix A). Their LS Age field is set to 0, and the requested grace period (in seconds) is inserted into the body of the grace-LSA. The precise contents of the grace-LSA are described in Appendix A.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
然后，路由器X发起grace lsa。这些是链路本地不透明LSA（见附录A）。他们的LS Age字段设置为0，请求的宽限期（以秒为单位）插入宽限LSA的正文中。grace LSA的准确内容见附录A。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A grace-LSA is originated for each of the router&#39;s OSPF interfaces. If Router X wants to ensure that its neighbors receive the grace-LSAs, it should retransmit the grace-LSAs until they are acknowledged (i.e., perform standard OSPF reliable flooding of the grace-LSAs). If one or more fully adjacent neighbors do not receive grace-LSAs, they will more than likely cause premature termination of the graceful restart procedure (see Section 4).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
每个路由器的OSPF接口都会产生一个宽限LSA。如果路由器X想要确保其邻居接收到宽限LSA，它应该重新传输宽限LSA，直到它们被确认为止（即，对宽限LSA执行标准OSPF可靠泛洪）。如果一个或多个完全相邻的邻居没有接收到宽限LSA，它们很可能会导致正常重启过程提前终止（参见第4节）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
After the grace-LSAs have been sent, the router should store the fact that it is performing graceful restart along with the length of the requested grace period in non-volatile storage. (Note to implementors: It may be easiest to simply store the absolute time of the end of the grace period). The OSPF software should then be restarted/reloaded. When the reloaded software starts executing the graceful restart, the protocol modifications in Section 2 are followed. (Note that prior to the restart, the router does not know whether its neighbors are going to cooperate as &#34;helpers&#34;; the mere reception of grace-LSAs does not imply acceptance of helper responsibilities. This memo assumes that the router would want to restart anyway, even if the restart is not going to be graceful).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
发送宽限LSA后，路由器应将其正在执行正常重启的事实以及请求的宽限期长度存储在非易失性存储器中。（实施者注意：最简单的方法可能是存储宽限期结束的绝对时间）。然后应重新启动/重新加载OSPF软件。当重新加载的软件开始执行优雅重启时，遵循第2节中的协议修改。（请注意，在重新启动之前，路由器不知道其邻居是否将作为“助手”进行合作；仅接收grace LSA并不意味着接受助手的责任。此备忘录假设路由器无论如何都会希望重新启动，即使重新启动不太顺利）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.2. When to Exit Graceful Restart
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.2. 何时退出并重新启动
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A Router X exits graceful restart when any of the following occurs:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
发生以下任一情况时，路由器X退出正常重启：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
1) Router X has reestablished all its adjacencies. Router X can determine this by examining the router-LSAs that it last originated before the restart (called the &#34;pre-restart router-LSA&#34;), and, on those segments where the router is the Designated Router, the pre-restart network-LSAs. These LSAs will have been received from the helping neighbors, and need not have been stored in non-volatile storage across the
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
1) 路由器X已经重新建立了它的所有邻接。路由器X可以通过检查其在重启前最后一次发起的路由器LSA（称为“预重启路由器LSA”）以及在路由器为指定路由器的那些段上的预重启网络LSA来确定这一点。这些LSA将从帮助邻居处接收，不需要存储在整个网络的非易失性存储器中
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-9">
restart. All previous adjacencies will be listed as type-1 and type-2 links in the router-LSA, and as neighbors in the body of the network-LSA.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-9">
重新启动。所有之前的邻接将在路由器LSA中列为1型和2型链路，并在网络LSA主体中列为邻居。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
2) Router X receives an LSA that is inconsistent with its pre-restart router-LSA. For example, X receives a router-LSA originated by router Y that does not contain a link to X, even though X&#39;s pre-start router-LSA did contain a link to Y. This indicates that either a) Y does not support graceful restart, b) Y never received the grace-LSA or c) Y has terminated its helper mode for some reason (Section 3.2). A special case of LSA inconsistency is when Router X establishes an adjacency with router Y and doesn&#39;t receive an instance of its own pre-restart router LSA.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
2) 路由器X接收到与其重新启动前路由器LSA不一致的LSA。例如，X接收到由路由器Y发起的路由器LSA，该路由器LSA不包含到X的链接，即使X的预启动路由器LSA确实包含到Y的链接。这表明a）Y不支持优雅重启，b）Y从未收到宽限LSA，或者c）Y出于某种原因终止了其助手模式（第3.2节）。LSA不一致的一种特殊情况是，当路由器X与路由器Y建立邻接关系，并且没有收到其自己的预重启路由器LSA的实例时。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
3) The grace period expires.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
3) 宽限期届满。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.3. Actions on Exiting Graceful Restart
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.3. 退出或重新启动时的操作
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Upon exiting &#34;graceful restart&#34;, the restarting router reverts back to completely normal OSPF operation, reoriginating LSAs based on the router&#39;s current state and updating its forwarding table(s) based on the current contents of the link-state database. In particular, the following actions should be performed when exiting, either successfully or unsuccessfully, graceful restart:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
退出“优雅重启”后，重启路由器将恢复到完全正常的OSPF操作，根据路由器的当前状态对LSA进行重新排序，并根据链路状态数据库的当前内容更新其转发表。特别是，退出（成功或失败）时，应执行以下操作：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
1) The router should reoriginate its router-LSAs for all attached areas in order to make sure they have the correct contents.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
1) 路由器应为所有连接区域重新定位其路由器LSA，以确保其内容正确。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
2) The router should reoriginate network-LSAs on all segments where it is the Designated Router.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
2) 路由器应在其为指定路由器的所有网段上重新确定网络LSA的顺序。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
3) The router reruns its OSPF routing calculations (Section 16 of [1]), this time installing the results into the system forwarding table, and originating summary-LSAs, Type-7 LSAs and AS-external-LSAs as necessary.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
3) 路由器重新运行其OSPF路由计算（见[1]第16节），这一次将结果安装到系统转发表中，并根据需要发起汇总LSA、类型7 LSA和外部LSA。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
4) Any remnant entries in the system forwarding table that were installed before the restart, but that are no longer valid, should be removed.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
4) 应删除系统转发表中在重新启动前安装但不再有效的任何剩余条目。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
5) Any received self-originated LSAs that are no longer valid should be flushed.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
5) 应刷新任何接收到的不再有效的自创LSA。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
6) Any grace-LSAs that the router originated should be flushed.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
6) 路由器发起的任何宽限LSA都应刷新。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3. Operation of Helper Neighbor
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3. 辅助邻居的操作
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The helper relationship is per network segment. As a &#34;helper neighbor&#34; on a segment S for a restarting router X, router Y has several duties. It monitors the network for topology changes, and as long as there are none, continues to advertise its LSAs as if X had remained in continuous OSPF operation. This means that Y&#39;s LSAs continue to list an adjacency to X over network segment S, regardless of the adjacency&#39;s current synchronization state. This logic affects the contents of both router-LSAs and network-LSAs, and also depends on the type of network segment S (see Sections 12.4.1.1 through 12.4.1.5 and Section 12.4.2 of [1]). When helping over a virtual link, the helper must also continue to set bit V in its router-LSA for the virtual link&#39;s transit area (Section 12.4.1 of [1]).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
助手关系是每个网段的关系。作为重新启动路由器X的S段上的“辅助邻居”，路由器Y有几个职责。它监视网络的拓扑变化，只要没有拓扑变化，就会继续公布其LSA，就好像X一直处于OSPF连续运行状态一样。这意味着Y的LSA继续通过网段s列出X的邻接，而不管邻接的当前同步状态如何。该逻辑影响路由器LSA和网络LSA的内容，还取决于网段的类型（见[1]第12.4.1.1节至第12.4.1.5节和第12.4.2节）。当通过虚拟链路进行帮助时，帮助者还必须继续在其路由器LSA中为虚拟链路的传输区域设置位V（见[1]第12.4.1节）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Also, if X was the Designated Router on network segment S when the helping relationship began, Y maintains X as the Designated Router until the helping relationship is terminated.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
此外，如果在帮助关系开始时X是网段S上的指定路由器，则Y将X保持为指定路由器，直到帮助关系终止。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.1. Entering Helper Mode
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.1. 进入助手模式
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
When a router Y receives a grace-LSA from router X, it enters helper mode for X on the associated network segment, as long as all the following checks pass:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
当路由器Y从路由器X接收到宽限LSA时，只要通过以下所有检查，它就会在相关网段上为X进入辅助模式：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
1) Y currently has a full adjacency with X (neighbor state Full) over the associated network segment. On broadcast, NBMA and Point-to-MultiPoint segments, the neighbor relationship with X is identified by the IP interface address in the body of the grace-LSA (see Appendix A). On all other segment types, X is identified by the grace-LSA&#39;s Advertising Router field.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
1) Y当前在相关网段上与X（邻居状态已满）完全相邻。在广播、NBMA和点对多点段上，与X的邻居关系由grace LSA主体中的IP接口地址标识（见附录A）。在所有其他段类型上，X由grace LSA的广告路由器字段标识。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
2) There have been no changes in content to the link-state database (LS types 1-5,7) since router X restarted. This is determined as follows:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
2) 自路由器X重新启动以来，链路状态数据库（LS类型1-5,7）的内容没有任何更改。其确定如下：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-9">
- Router Y examines the link-state retransmission list for X over the associated network segment.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-9">
- 路由器Y通过相关网段检查X的链路状态重传列表。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
- If there are any LSAs with LS types 1-5,7 on the list, then they all must be periodic refreshes.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
- 如果列表中有任何LS类型为1-5,7的LSA，则它们都必须定期刷新。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
- If there are instead LSAs on the list whose contents have changed (see Section 3.3 of [7]), Y must refuse to enter helper mode.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
- 如果列表中存在内容已更改的LSA（参见[7]第3.3节），Y必须拒绝进入帮助器模式。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
Router Y may optionally disallow graceful restart with Router X on other network segments. Determining whether
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
路由器Y可以选择性地禁止在其他网段上使用路由器X进行正常重启。确定是否
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
changed LSAs have been successfully flooded to router Y on other network segments is feasible but beyond the scope of this document.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
已成功将更改的LSA淹没到其他网段上的路由器Y是可行的，但超出了本文档的范围。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
3) The grace period has not yet expired. This means that the LS age of the grace-LSA is less than the grace period specified in the body of the grace-LSA (Appendix A).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
3) 宽限期尚未到期。这意味着宽限期LSA的LS年龄小于宽限期LSA正文（附录A）中规定的宽限期。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
4) Local policy allows Y to act as the helper for X. Examples of configured policies might be a) never act as helper, b) never allow the grace period to exceed a Time T, c) only help on software reloads/upgrades, or d) never act as a helper for specific routers (specified by OSPF Router ID).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
4) 本地策略允许Y充当X的助手。配置策略的示例可能是a）从不充当助手，b）从不允许宽限期超过时间T，c）仅在软件重新加载/升级时提供帮助，或d）从不充当特定路由器的助手（由OSPF路由器ID指定）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
5) Router Y is not in the process of graceful restart.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
5) 路由器Y未处于正常重启过程中。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
There is one exception to the above requirements. If Y was already helping X on the associated network segment, the new grace-LSA should be accepted and the grace period should be updated accordingly.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
上述要求有一个例外。如果Y已经在相关网段上帮助X，则应接受新的宽限LSA，并相应更新宽限期。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Note that Router Y may be helping X on some network segments, and not on others. However, that circumstance will probably lead to the premature termination of X&#39;s graceful restart, as Y will not continue to advertise adjacencies on the segments where it is not helping (see Section 2.2).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
请注意，路由器Y可能在某些网段上帮助X，而不是在其他网段上。然而，这种情况可能会导致X的正常重新启动提前终止，因为Y不会继续在没有帮助的段上公布邻接（见第2.2节）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Alternately, Router Y may choose to enter helper mode when a grace-LSA is received and the above checks pass for all adjacencies with Router X. This implementation alternative of aggregating the adjacencies with respect to helper mode is compatible with implementations considering each adjacency independently.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
或者，当接收到宽限LSA且上述检查通过路由器X的所有邻接时，路由器Y可以选择进入辅助模式。该相对于辅助模式聚合邻接的实现方案与独立考虑每个邻接的实现方案兼容。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A single router is allowed to simultaneously serve as a helper for multiple restarting neighbors.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
允许单个路由器同时作为多个重启邻居的助手。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.2. Exiting Helper Mode
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.2. 退出辅助模式
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Router Y ceases to perform the helper function for its neighbor Router X on a given segment when one of the following events occurs:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
当下列事件之一发生时，路由器Y停止在给定段上为其相邻路由器X执行辅助功能：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
1) The grace-LSA originated by X on the segment is flushed. This indicates the successful termination of graceful restart.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
1) 刷新段上由X发起的grace LSA。这表示正常重启的成功终止。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
2) The grace-LSA&#39;s grace period expires.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
2) 宽限LSA的宽限期到期。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
3) A change in link-state database contents indicates a network topology change, which forces termination of a graceful restart. Specifically, if router Y installs a new LSA in its
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
3) 链路状态数据库内容的更改表示网络拓扑更改，这将强制终止正常重启。具体来说，如果路由器Y在其
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-9">
database with LS types 1-5,7 and having the following two properties, it should cease helping X. The two properties of the LSA are:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-9">
LS类型为1-5,7且具有以下两个属性的数据库应停止帮助X。LSA的两个属性为：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-9">
a) the contents of the LSA have changed; this includes LSAs with no previous link-state database instance and the flushing of LSAs from the database, but excludes periodic LSA refreshes (see Section 3.3 of [7]), and
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-9">
a) LSA的内容发生了变化；这包括没有先前链路状态数据库实例的LSA和从数据库中刷新LSA，但不包括定期LSA刷新（见[7]第3.3节），以及
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-9">
b) the LSA would have been flooded to X, had Y and X been fully adjacent. As an example of the second property, if Y installs a changed AS-external-LSA, it should not terminate a helping relationship with a neighbor belonging to a stub area, as that neighbor would not see the AS-external-LSA in any case. An implementation MAY provide a configuration option to disable link-state database options from terminating graceful restart. Such an option will, however, increase the risk of transient routing loops and black holes.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-9">
b) 如果Y和X完全相邻，LSA将被淹没到X。作为第二个属性的示例，如果Y安装了一个已更改的外部LSA，则它不应终止与属于存根区域的邻居的帮助关系，因为该邻居在任何情况下都不会将其视为外部LSA。一个实现可以提供一个配置选项，以禁止链路状态数据库选项终止正常重启。然而，这样的选择将增加暂时路由环路和黑洞的风险。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
When Router Y exits helper mode for X on a given network segment, it reoriginates its LSAs based on the current state of its adjacency to Router X over the segment. In detail, Y takes the following actions:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
当路由器Y退出给定网段上X的辅助模式时，它将根据其在网段上与路由器X相邻的当前状态重新确定其LSA的优先级。具体而言，Y将执行以下操作：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
a) Y recalculates the Designated Router for the segment,
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
a) Y重新计算段的指定路由器，
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
b) Y reoriginates its router-LSA for the segment&#39;s OSPF area,
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
b) Y为网段的OSPF区域重新定位其路由器LSA，
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
c) if Y is Designated Router for the segment, it reoriginates the network-LSA for the segment and
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
c) 如果Y被指定为该段的路由器，它将重新确定该段的网络LSA的优先级，并
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
d) if the segment was a virtual link, Y reoriginates its router-LSA for the virtual link&#39;s transit area.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
d) 如果该段是一个虚拟链路，Y将为该虚拟链路的传输区域重新定位其路由器LSA。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
If Router Y aggregated adjacencies with Router X when entering helper mode (as described in section 3.1), it must also exit helper mode for all adjacencies with Router X when any one of the exit events occurs for an adjacency with Router X.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
如果路由器Y在进入辅助模式（如第3.1节所述）时聚集了与路由器X的邻接，则当与路由器X的邻接发生任何一个退出事件时，它还必须退出与路由器X的所有邻接的辅助模式。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
4. Backward Compatibility
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
4. 向后兼容性
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Backward-compatibility with unmodified OSPF routers is an automatic consequence of the functionality documented above. If one or more neighbors of a router requesting graceful restart are unmodified, or if they do not receive the grace-LSA, the graceful restart reverts to a normal OSPF restart.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
与未经修改的OSPF路由器的向后兼容性是上述功能的自动结果。如果请求优雅重启的路由器的一个或多个邻居未被修改，或者如果他们没有收到grace LSA，优雅重启将恢复为正常OSPF重启。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The unmodified routers will start routing around the restarted router X as it performs initial database synchronization by reissuing their LSAs with links to X omitted. These LSAs will be interpreted by helper neighbors as a topology change, and by X as an LSA inconsistency, in either case, reverting to normal OSPF operation.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
未修改的路由器将围绕重新启动的路由器X开始路由，因为它通过重新发出其LSA（省略到X的链接）来执行初始数据库同步。这些LSA将被助手邻居解释为拓扑变化，被X解释为LSA不一致，在任何一种情况下，恢复到正常OSPF操作。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5. Unplanned Outages
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5. 计划外停机
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The graceful restart mechanisms in this memo can be used for unplanned outages. (Examples of unplanned outages include the crash of a router&#39;s control software, an unexpected switchover to a redundant control processor, etc). However, implementors and network operators should note that attempting graceful restart from an unplanned outage may not be a good idea, owing to the router&#39;s inability to properly prepare for the restart (see Section 2.1). In particular, it seems unlikely that a router could guarantee the sanity of its forwarding table(s) across an unplanned restart. In any event, implementors providing the option to recover gracefully from unplanned outages must allow a network operator to turn the option off.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
此备忘录中的优雅重启机制可用于计划外停机。（计划外停机的例子包括路由器控制软件崩溃、意外切换到冗余控制处理器等）。但是，实施者和网络运营商应注意，由于路由器无法正确准备重启，尝试从计划外停机中正常重启可能不是一个好主意（参见第2.1节）。特别是，路由器似乎不太可能在计划外重启期间保证其转发表的健全性。在任何情况下，提供从计划外停机中正常恢复选项的实施者必须允许网络运营商关闭该选项。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In contrast to the procedure for planned restart/reloads that was described in Section 2.1, a router attempting graceful restart after an unplanned outage must originate grace-LSAs *after* its control software resumes operation. The following points must be observed during this grace-LSA origination.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
与第2.1节中描述的计划重启/重新加载程序不同，在计划外停机后尝试正常重启的路由器必须在其控制软件恢复运行后启动grace LSA*。在此宽限期LSA发起期间，必须遵守以下几点。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o The grace-LSAs must be originated and be sent *before* the restarted router sends any OSPF Hello Packets. On broadcast networks, this LSA must be flooded to the AllSPFRouters multicast address (224.0.0.5) since the restarting router is not aware of its previous DR state.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 在重启路由器发送任何OSPF Hello数据包之前，必须发起并发送grace LSA。在广播网络上，由于重新启动的路由器不知道其先前的DR状态，因此必须将此LSA淹没到AllSPFRouters多播地址（224.0.0.5）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o The grace-LSAs are encapsulated in Link State Update Packets and sent out to all interfaces, even though the restarted router has no adjacencies and no knowledge of previous adjacencies.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o grace LSA封装在链路状态更新包中，并发送到所有接口，即使重新启动的路由器没有邻接，也不知道以前的邻接。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o To improve the probability that grace-LSAs will be delivered, an implementation may send them multiple times (see for example the Robustness Variable in [8]).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 为了提高grace LSA的交付概率，一个实现可以多次发送它们（例如参见[8]中的稳健性变量）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o The restart reason in the grace-LSAs must be set to 0 (unknown) or 3 (switch to redundant control processor). This enables the neighbors to decide whether they want to help the router through an unplanned restart.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o grace LSA中的重新启动原因必须设置为0（未知）或3（切换到冗余控制处理器）。这使邻居能够决定是否要帮助路由器完成计划外重启。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6. Interaction with Traffic Engineering
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6. 与交通工程的互动
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The operation of the Traffic Engineering Extensions to OSPF [4] during OSPF Graceful Restart is specified in [6].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[6]中规定了OSPF[4]在OSPF优雅重启期间的流量工程扩展操作。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
7. Possible Future Work
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
7. 今后可能的工作
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Devise a less conservative algorithm for graceful restart helper termination that provides a comparable level of black hole and routing loop avoidance.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
设计一种不太保守的算法，以实现优雅的重启辅助终止，从而提供相当程度的黑洞和路由环路避免。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
8. Intellectual Property Rights Notice
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
8. 知识产权公告
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The IETF takes no position regarding the validity or scope of any intellectual property or other rights that might be claimed to pertain to the implementation or use of the technology described in this document or the extent to which any license under such rights might or might not be available; neither does it represent that it has made any effort to identify any such rights. Information on the IETF&#39;s procedures with respect to rights in standards-track and standards-related documentation can be found in BCP-11. Copies of claims of rights made available for publication and any assurances of licenses to be made available, or the result of an attempt made to obtain a general license or permission for the use of such proprietary rights by implementors or users of this specification can be obtained from the IETF Secretariat.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IETF对可能声称与本文件所述技术的实施或使用有关的任何知识产权或其他权利的有效性或范围，或此类权利下的任何许可可能或可能不可用的程度，不采取任何立场；它也不表示它已作出任何努力来确定任何此类权利。有关IETF在标准跟踪和标准相关文件中权利的程序信息，请参见BCP-11。可从IETF秘书处获得可供发布的权利声明副本和任何许可证保证，或本规范实施者或用户试图获得使用此类专有权利的一般许可证或许可的结果。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The IETF invites any interested party to bring to its attention any copyrights, patents or patent applications, or other proprietary rights which may cover technology that may be required to practice this standard. Please address the information to the IETF Executive Director.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IETF邀请任何相关方提请其注意任何版权、专利或专利申请，或其他可能涉及实施本标准所需技术的专有权利。请将信息发送给IETF执行董事。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
9. References
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
9. 工具书类
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
9.1. Normative References
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
9.1. 规范性引用文件
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[1] Moy, J., &#34;OSPF Version 2&#34;, STD 54, RFC 2328, April 1998.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[1] Moy，J.，“OSPF版本2”，STD 54，RFC 23281998年4月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[2] Coltun, R., &#34;The OSPF Opaque LSA Option&#34;, RFC 2370, July 1998.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[2] Coltun，R.，“OSPF不透明LSA选项”，RFC 23701998年7月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
9.2. Informative References
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
9.2. 资料性引用
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[3] Murphy, S., Badger, M. and B. Wellington, &#34;OSPF with Digital Signatures&#34;, RFC 2154, June 1997.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[3] Murphy，S.，Badger，M.和B.Wellington，“具有数字签名的OSPF”，RFC 2154，1997年6月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[4] Katz, D., Kompella, K. and D. Yeung, &#34;Traffic Engineering (TE) Extensions to OSPF Version 2&#34;, RFC 3630, September 2003.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[4] Katz，D.，Kompella，K.和D.Yaung，“OSPF版本2的交通工程（TE）扩展”，RFC 3630，2003年9月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[5] Murphy, P., &#34;The OSPF Not-So-Stubby Area (NSSA) Option&#34;, RFC 3101, January 2003.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[5] Murphy，P.，“OSPF不那么短的区域（NSSA）选项”，RFC 3101，2003年1月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[6] Kompella, K., et al., &#34;Routing Extensions in Support of Generalized MPLS&#34;, Work in Progress.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[6] Kompella，K.等人，“支持通用MPLS的路由扩展”，正在进行中。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[7] Moy, J., &#34;Extending OSPF to Support Demand Circuits&#34;, RFC 1793, April 1995.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[7] Moy，J.，“扩展OSPF以支持需求电路”，RFC 1793，1995年4月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[8] Cain, B., Deering, S., Kouvelas, I., Fenner, B. and A. Thyagarajan, &#34;Internet Group Management Protocol, Version 3&#34;, RFC 3376, October 2002.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[8] Cain，B.，Deering，S.，Kouvelas，I.，Fenner，B.和A.Thyagarajan，“互联网组管理协议，第3版”，RFC 3376，2002年10月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
A. Grace-LSA Format
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
A.格雷斯LSA格式
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The grace-LSA is a link-local scoped Opaque-LSA [2], having an Opaque Type of 3 and an Opaque ID equal to 0. Grace-LSAs are originated by a router that wishes to execute a graceful restart of its OSPF software. A grace-LSA requests that the router&#39;s neighbors aid in its graceful restart by continuing to advertise the router as fully adjacent during a specified grace period.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
grace LSA是链接本地作用域不透明LSA[2]，不透明类型为3，不透明ID为0。Grace LSA由一个路由器发起，该路由器希望执行其OSPF软件的优雅重启。宽限LSA请求路由器的邻居通过在指定的宽限期内继续将路由器公告为完全相邻来帮助其正常重启。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Each grace-LSA has an LS age field set to 0 when the LSA is first originated; the current value of the LS age then indicates how long ago the restarting router made its request. The body of the LSA is TLV-encoded. The TLV-encoded information includes the length of the grace period, the reason for the graceful restart and, when the grace-LSA is associated with a broadcast, NBMA or Point-to-MultiPoint network segment, the IP interface address of the restarting router.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
每个宽限LSA都有一个LS age字段，该字段在LSA首次启动时设置为0；LS age的当前值表示重新启动路由器发出请求的时间。LSA的主体是TLV编码的。TLV编码信息包括宽限期的长度、正常重启的原因，以及当宽限LSA与广播、NBMA或点对多点网段相关联时，重启路由器的IP接口地址。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |            LS age             |     Options   |       9       |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |       3       |                    0                          |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                     Advertising Router                        |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                     LS sequence number                        |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |         LS checksum           |             length            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                                                               |
      +-                            TLVs                             -+
      |                             ...                               |
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |            LS age             |     Options   |       9       |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |       3       |                    0                          |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                     Advertising Router                        |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                     LS sequence number                        |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |         LS checksum           |             length            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                                                               |
      +-                            TLVs                             -+
      |                             ...                               |
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The format of the TLVs within the body of a grace-LSA is the same as the format used by the Traffic Engineering Extensions to OSPF [4]. The LSA payload consists of one or more nested Type/Length/Value (TLV) triplets. The format of each TLV is:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
grace LSA主体内TLV的格式与OSPF的流量工程扩展使用的格式相同[4]。LSA有效负载由一个或多个嵌套类型/长度/值（TLV）三元组组成。每个TLV的格式为：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |              Type             |             Length            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                            Value...                           |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |              Type             |             Length            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                            Value...                           |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Length field defines the length of the value portion in octets (thus a TLV with no value portion would have a length of zero). The TLV is padded to four-octet alignment; padding is not included in the length field (so a three octet value would have a length of three, but the total size of the TLV would be eight octets). Nested TLVs are also 32-bit aligned. For example, a one byte value would have the length field set to 1, and three bytes of padding would be added to the end of the value portion of the TLV. Unrecognized types are ignored.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
长度字段以八位字节定义值部分的长度（因此，没有值部分的TLV的长度为零）。TLV填充为四个八位组对齐；长度字段中不包括填充（因此三个八位字节的值的长度为三，但TLV的总大小为八个八位字节）。嵌套TLV也是32位对齐的。例如，一个一字节的值将把length字段设置为1，三个字节的填充将添加到TLV值部分的末尾。将忽略无法识别的类型。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The following is the list of TLVs that can appear in the body of a grace-LSA:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
以下是可出现在grace LSA正文中的TLV列表：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Grace Period (Type=1, length=4). The number of seconds that the router&#39;s neighbors should continue to advertise the router as fully adjacent, regardless of the state of database synchronization between the router and its neighbors. Since this time period began when grace-LSA&#39;s LS age was equal to 0, the grace period terminates when either:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 宽限期（类型=1，长度=4）。无论路由器与其邻居之间的数据库同步状态如何，路由器的邻居应继续将路由器公告为完全相邻的秒数。由于此时间段始于宽限LSA的LS age等于0时，因此宽限期在以下任一情况下终止：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
a) the LS age of the grace-LSA exceeds the value of a Grace Period or
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
a) 宽限LSA的LS年龄超过宽限期或
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
b) the grace-LSA is flushed. See Section 3.2 for other conditions that terminate graceful restart.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
b) 格雷斯·丽莎脸红了。有关终止正常重启的其他条件，请参见第3.2节。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
This TLV must always appear in a grace-LSA.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
此TLV必须始终显示在宽限LSA中。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Graceful restart reason (Type=2, length=1). Encodes the reason for the router restart as one of the following: 0 (unknown), 1 (software restart), 2 (software reload/upgrade) or 3 (switch to redundant control processor). This TLV must always appear in a grace-LSA.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 重新启动原因（类型=2，长度=1）。将路由器重新启动的原因编码为以下原因之一：0（未知）、1（软件重新启动）、2（软件重新加载/升级）或3（切换到冗余控制处理器）。此TLV必须始终显示在宽限LSA中。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o IP interface address (Type=3, length=4). The router&#39;s IP interface address on the subnet associated with the grace-LSA. Required on broadcast, NBMA and Point-to-MultiPoint segments, where the helper uses the IP interface address to identify the restarting router (see Section 3.1).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o IP接口地址（类型=3，长度=4）。路由器在与grace LSA关联的子网上的IP接口地址。在广播、NBMA和点对多点段上需要，助手使用IP接口地址来识别重新启动的路由器（参见第3.1节）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
DoNotAge is never set in a grace-LSA, even if the grace-LSA is flooded over a demand circuit [7]. This is because the grace-LSA&#39;s LS age field is used to calculate the duration of the grace period.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
即使宽限LSA淹没在需求电路上，也不会在宽限LSA中设置DoNotAge[7]。这是因为宽限期LSA的LS age字段用于计算宽限期的持续时间。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Grace-LSAs have link-local scope because they only need to be seen by the router&#39;s direct neighbors.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Grace LSA具有链路本地作用域，因为它们只需要被路由器的直接邻居看到。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Additional Grace-LSA TLVs must be described in an Internet Draft and will be subject to the expert review of the OSPF Working Group.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
额外的Grace LSA TLV必须在互联网草案中描述，并将接受OSPF工作组的专家审查。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
B. Configurable Parameters
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
B.可配置参数
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
OSPF graceful restart parameters are suggested below. Section B.1 contains a minimum subset of parameters that should be supported. B.2 includes some additional configuration parameters that an implementation may choose to support.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
OSPF优雅重启参数建议如下。第B.1节包含应支持的最小参数子集。B.2包括一些实现可能选择支持的附加配置参数。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
B.1. Global Parameters (Minimum subset)
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
B.1. 全局参数（最小子集）
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
RestartSupport
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
餐厅支持
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
The router&#39;s level of support for OSPF graceful restart. Allowable values are none, planned restart only, and planned/unplanned.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
路由器对OSPF优雅重启的支持级别。允许值为无、仅计划重新启动和计划内/计划外。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
RestartInterval
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
餐厅间
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
The graceful restart interval in seconds. The range is from 1 to 1800 seconds, with a suggested default of 120 seconds.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
以秒为单位的重新启动间隔。范围为1到1800秒，建议默认值为120秒。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
B.2. Global Parameters (Optional)
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
B.2. 全局参数（可选）
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
RestartHelperSupport
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
RestartHelperSupport
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
The router&#39;s support for acting as an OSPF restart helper. Allowable values are none, planned restart only, and planned/unplanned.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
路由器支持充当OSPF重启助手。允许值为无、仅计划重新启动和计划内/计划外。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
RestartHelperStrictLSAChecking
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
餐厅自助式检查
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
Indicates whether or not an OSPF restart helper should terminate graceful restart when there is a change to an LSA that would be flooded to the restarting router or when there is a changed LSA on the restarting router&#39;s retransmission list when graceful restart is initiated. The suggested default is enabled.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
指示当LSA发生更改时，OSPF重启助手是否应终止优雅重启，该更改将被淹没到重新启动的路由器，或者当优雅重启启动时，重新启动路由器的重传列表上的LSA发生更改时，OSPF重启助手是否应终止优雅重启。建议的默认值已启用。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Security Considerations
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
安全考虑
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
One of the ways to attack a link-state protocol such as OSPF is to inject false LSAs into, or corrupt existing LSAs in, the link-state database. Injecting a false grace-LSA would allow an attacker to spoof a router that, in reality, has been withdrawn from service. The standard way to prevent such corruption of the link-state database is to secure OSPF protocol exchanges using the cryptographic authentication specified in [1]. An even stronger way of securing link-state database contents has been proposed in [3].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
攻击链路状态协议（如OSPF）的方法之一是向链路状态数据库中注入虚假LSA或损坏现有LSA。注入虚假的grace LSA将允许攻击者欺骗实际上已退出服务的路由器。防止链路状态数据库损坏的标准方法是使用[1]中指定的加密身份验证来保护OSPF协议交换。[3]中提出了一种更强大的保护链接状态数据库内容的方法。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
When cryptographic authentication [1] is used on the restarting router the preservation of received sequence numbers in non-volatile storage is not mandatory. There is a risk that a replayed Hello packet could cause neighbor state for a deceased neighbor to be created. However, the risk is no greater than during normal operation.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
当在重新启动的路由器上使用加密身份验证[1]时，在非易失性存储器中保存收到的序列号不是强制性的。重播的Hello数据包可能会导致创建已故邻居的邻居状态。但是，风险不大于正常运行期间的风险。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Acknowledgments
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
致谢
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The authors wish to thank John Drake, Vishwas Manral, Kent Wong, and Don Goodspeed for their helpful comments. We also wish to thank Alex Zinin and Bill Fenner for their thorough review.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
作者希望感谢John Drake、Vishwas Manral、Kent Wong和Don Goodspeed的有益评论。我们还要感谢亚历克斯·齐宁和比尔·芬纳的全面审查。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Authors&#39; Addresses
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
作者地址
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
J. Moy Sycamore Networks, Inc. 150 Apollo Drive Chelmsford, MA 01824
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
J.Moy Sycamore Networks，Inc.马萨诸塞州切姆斯福德阿波罗大道150号，邮编01824
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Phone: (978) 367-2505 Fax: (978) 256-4203 EMail: jmoy@sycamorenet.com
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
电话：（978）367-2505传真：（978）256-4203电子邮件：jmoy@sycamorenet.com
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Padma Pillay-Esnault Juniper Networks 1194 N, Mathilda Avenue Sunnyvale, CA 94089-1206
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
帕德玛·皮莱·埃斯纳尔特·朱尼珀网络公司，地址：加利福尼亚州桑尼维尔市马蒂尔达大道北1194号，邮编：94089-1206
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   EMail: padma@juniper.net
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   EMail: padma@juniper.net
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Acee Lindem Redback Networks 102 Carric Bend Court Cary, NC 27519
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Acee Lindem Redback Networks 102北卡罗来纳州卡里克本德法院，邮编27519
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   EMail: acee@redback.com
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
   EMail: acee@redback.com
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Full Copyright Statement
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
完整版权声明
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Copyright (C) The Internet Society (2003). All Rights Reserved.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
版权所有（C）互联网协会（2003年）。版权所有。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document and translations of it may be copied and furnished to others, and derivative works that comment on or otherwise explain it or assist in its implementation may be prepared, copied, published and distributed, in whole or in part, without restriction of any kind, provided that the above copyright notice and this paragraph are included on all such copies and derivative works. However, this document itself may not be modified in any way, such as by removing the copyright notice or references to the Internet Society or other Internet organizations, except as needed for the purpose of developing Internet standards in which case the procedures for copyrights defined in the Internet Standards process must be followed, or as required to translate it into languages other than English.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本文件及其译本可复制并提供给他人，对其进行评论或解释或协助其实施的衍生作品可全部或部分编制、复制、出版和分发，不受任何限制，前提是上述版权声明和本段包含在所有此类副本和衍生作品中。但是，不得以任何方式修改本文件本身，例如删除版权通知或对互联网协会或其他互联网组织的引用，除非出于制定互联网标准的需要，在这种情况下，必须遵循互联网标准过程中定义的版权程序，或根据需要将其翻译成英语以外的其他语言。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The limited permissions granted above are perpetual and will not be revoked by the Internet Society or its successors or assignees.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
上述授予的有限许可是永久性的，互联网协会或其继承人或受让人不会撤销。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document and the information contained herein is provided on an &#34;AS IS&#34; basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
本文件和其中包含的信息是按“原样”提供的，互联网协会和互联网工程任务组否认所有明示或暗示的保证，包括但不限于任何保证，即使用本文中的信息不会侵犯任何权利，或对适销性或特定用途适用性的任何默示保证。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Acknowledgement
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
确认
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Funding for the RFC Editor function is currently provided by the Internet Society.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
RFC编辑功能的资金目前由互联网协会提供。
        </p>
      </div>
    </div>
  </div>
  <div id="rfc_footer"></div>
</body>
</html>
