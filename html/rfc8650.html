<!DOCTYPE html>

<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name='description' content="RFC 8650: Dynamic Subscription to YANG Events and Datastores over RESTCONF中文翻译 中文RFC RFC文档 RFC翻译 RFC中文版">
  <title>RFC8650 中文翻译 中文RFC RFC文档 RFC翻译 RFC中文版</title>

  <link rel="shortcut icon" type="image/x-icon"
    href="favicon.ico" />

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

  <link rel="stylesheet" href="master.css">
  <script src="index.js"></script>
  <script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?b7f7721ebaa11b23aaf77df0590e7f4a";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();
  </script>
  <script data-ad-client="ca-pub-9129771189441092" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  
</head>
<body>
  <nav class="navbar navbar-expand navbar-light bg-light">
    <a class="navbar-brand" href="index.html">RFC2CN</a>
    <div class="collapse navbar-collapse" id="navbarText">
      <div class="navbar-nav mr-auto">
        <a class="nav-item nav-link" href="about.html">关于</a>
      </div>
    </div>
  </nav>

  <span id="rfc_number" class="hidden">8650</span>
  <div style="height: 1ex;"></div>
  <div class="jump-to-original-rfc-container">
    <a href="https://www.rfc-editor.org/rfc/rfc8650.html">
      <button type="button" class="btn btn-light btn-sm">
        <span class="jump-to-original-rfc">原文</span>
      </button>
    </a>
  </div>
  <div class="container">
    <div class="row">
      <div id="rfc_header" class="col-sm-12 col-md-12">
        <div class="alert alert-info" role="alert">
          <h1 class="alert-heading">RFC 8650: Dynamic Subscription to YANG Events and Datastores over RESTCONF 中文翻译</h1>
          <span class="URL">URL :
            <a href="https://datatracker.ietf.org/doc/html/rfc8650" target="_blank">
              https://datatracker.ietf.org/doc/html/rfc8650
            </a>
          </span><br>
          <span class="title_ja">
            标题 : <strong>RFC 8650</strong></span><br>
          <span class="updated_by">翻译类型 : 自动生成</span><br>
        </div>
      </div>
      <div id="rfc_alert" class="col-sm-12 col-md-12 hidden" role="alert">
        <div class="alert alert-danger">
          <span id="rfc_alert_obsoleted_by"></span>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
This document provides a RESTCONF binding to the dynamic subscription
      capability of both subscribed notifications and YANG-Push.
            This is an Internet Standards Track document.
            This document is a product of the Internet Engineering Task Force
            (IETF).  It represents the consensus of the IETF community.  It has
            received public review and has been approved for publication by
            the Internet Engineering Steering Group (IESG).  Further
            information on Internet Standards is available in Section 2 of 
            RFC 7841.
            Information about the current status of this document, any
            errata, and how to provide feedback on it may be obtained at

            Copyright (c) 2019 IETF Trust and the persons identified as the
            document authors. All rights reserved.
            This document is subject to BCP 78 and the IETF Trust&#39;s Legal
            Provisions Relating to IETF Documents
            () in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.Mechanisms to support event subscription and YANG-Push are defined in . Enhancements to  that enable YANG datastore subscription and YANG-Push are defined in . 
This document provides a transport specification for dynamic subscriptions over RESTCONF The streaming of notifications that encapsulate the resulting information push is done via the mechanism described in 
    The key words &#34;&#34;, &#34;&#34;, &#34;&#34;, &#34;&#34;, &#34;&#34;, &#34;&#34;, &#34;&#34;, &#34;&#34;, &#34;&#34;,
    &#34;&#34;, and &#34;&#34; in this document are to be interpreted as
    described in BCP 14   
    when, and only when, they appear in all capitals, as shown here.The following terms use the definitions from Other terms reused include datastore, which is defined in This section provides specifics on how to establish and maintain dynamic subscriptions over RESTCONF As described in , a GET needs to be performed on a
      specific URI on the publisher. Subscribers cannot predetermine the URI
      against which a subscription might exist on a publisher, as the URI will
      only exist after the &#34;establish-subscription&#34; RPC has been
      accepted. Therefore, the POST for the &#34;establish-subscription&#34; RPC
      replaces the GET request for the &#34;location&#34; leaf that is used in  to obtain the URI. The subscription
      URI will be determined and sent as part of the response to the
      &#34;establish-subscription&#34; RPC, and a subsequent GET to this URI will be
      done in order to start the flow of notification messages back to the
      subscriber.  As specified in , a subscription does not move to the active state
      until the GET is received.For a dynamic subscription, when a RESTCONF session doesn&#39;t already exist, a new RESTCONF session is initiated from the subscriber.As stated in Without the involvement of additional protocols, HTTP sessions by
   themselves do not support quick recognition of the loss of the
   communication path to the publisher. Where quick recognition of the loss of a publisher is required, a subscriber  use a TLS heartbeat Loss of the heartbeat  result in the teardown
of any subscription-related TCP sessions between those endpoints.  
A subscriber can then attempt to re-establish the dynamic subscription by using the procedure described in Subscribers can learn which event streams a RESTCONF server supports by querying the &#34;streams&#34; container of ietf-subscribed-notifications.yang in Subscribers can learn which datastores a RESTCONF server supports by following Specific HTTP response codes as defined in If a publisher fails to serve the RPC request for one of the reasons indicated in When an HTTP error code is returned, the RPC reply  include 
an &lt;rpc-error&gt; element per  
with the following parameter values:Each error identity will be inserted as the &#34;error-app-tag&#34; using JSON encoding following the form &lt;modulename&gt;:&lt;identityname&gt;.  An example of such a valid encoding would be &#34;ietf-subscribed-notifications:no-such-subscription&#34;.In the case of error responses to an &#34;establish-subscription&#34; or
 &#34;modify-subscription&#34; request, there is the option to include an
 &#34;error-info&#34; node.  This node may contain hints for parameter settings
 that might lead to successful RPC requests in the future. Tables The yang-data included within &#34;error-info&#34;  include the
      optional leaf &#34;reason&#34;, as such a leaf would be redundant
      with information that is already placed within the
      &#34;error-app-tag&#34;.In case of an &lt;rpc-error&gt; as a result of a &#34;delete-subscription&#34;, a
      &#34;kill-subscription&#34;, or a &#34;resync-subscription&#34; request, no
      &#34;error-info&#34; needs to be included, as the &#34;subscription-id&#34; is
      the only RPC input parameter, and no hints regarding this RPC input
      parameters need to be provided.Note that &#34;error-path&#34; The call flow for Server-Sent Events (SSE) is defined in Figure 1.  The logical connections denoted
 by (a) and (b) can be a TCP connection or an HTTP/2 stream (if HTTP/2
 is used, multiple HTTP/2 streams can be carried in one TCP
 connection). Requests to RPCs as defined in  or  are
 sent on a connection indicated by (a).  A successful
 &#34;establish-subscription&#34; will result in an RPC response returned with
 both a subscription identifier that uniquely identifies a
 subscription, as well as a URI that uniquely identifies the location
 of subscription on the publisher (b). This URI is defined via the
 &#34;uri&#34; leaf in the data model in An HTTP GET is then sent on a separate logical connection (b) to the URI on the publisher.  This signals the publisher to initiate the flow of notification messages that are sent in SSE As described in Additional requirements for dynamic subscriptions over SSE include:A publisher  terminate a subscription in the following cases:A publisher  terminate a subscription at any time as stated in Qos treatment for event streams is described in For dynamic subscriptions with the same Differentiated Services Code Point (DSCP) value to a specific publisher, it is recommended that the subscriber sends all URI GET requests on a common HTTP/2 session (if HTTP/2 is used). Conversely, a subscriber cannot use a common HTTP/2 session for subscriptions with different DSCP values.Notification messages transported over RESTCONF will be encoded according to  The YANG module defined in This module references 
      This document registers the following namespace URI in the &#34;ns&#34;
      subregistry of the &#34;IETF XML Registry&#34; 
      This document registers the following YANG module in the &#34;YANG Module
      Names&#34; registry The YANG module specified in this document defines a schema for data that is designed to be accessed via network management transports such as NETCONF The Network Configuration Access Control Model (NACM)  
    provides the means to restrict access for particular NETCONF or 
    RESTCONF users to a preconfigured subset of all available NETCONF 
    or RESTCONF protocol operations and content.The one new data node introduced in this YANG module may be considered sensitive or vulnerable in some network environments.  It is thus important to control read access (e.g., via get, get-config, or notification) to this data node.  These are the subtrees and data nodes and their sensitivity/vulnerability:Container: &#34;/subscriptions&#34;The subscription URI is implementation specific and is encrypted via the use of TLS. Therefore, even if an attacker succeeds in guessing the subscription URI, a RESTCONF username The access permission considerations for the RPCs &#34;modify-subscription&#34;, &#34;resync-subscription&#34;, &#34;delete-subscription&#34;, and &#34;kill-subscription&#34; are described in If a buggy or compromised RESTCONF subscriber sends a number of &#34;establish-subscription&#34; requests, then these subscriptions accumulate and may
    use up system resources.  In such a situation, the publisher  also suspend or terminate a subset of the active
    subscriptions from that RESTCONF subscriber in order to reclaim resources and preserve normal operation for the other subscriptions.This section is non-normative.  To allow easy comparison, this section mirrors the functional examples shown with NETCONF over XML within The subscription URI values used in the examples in this section are purely illustrative, and are not indicative of the expected usage that is described in The DSCP values are only for example purposes and are all indicated in decimal since the encoding is JSON The following figure shows two successful
   &#34;establish-subscription&#34; RPC requests as per .  The first request is given a subscription
   identifier of 22, and the second, an identifier of 23.To provide examples of the information being transported, example messages for interactions in  As the publisher was able to fully satisfy the request, the publisher sends the subscription identifier of the accepted subscription and the URI:Upon receipt of the successful response, the subscriber does a
   GET to the provided URI to start the flow of notification messages.
   When the publisher receives this, the subscription is moved to the
   active state (c).While not shown in The subscriber can use this information in future attempts to establish a subscription.An existing subscription may be modified.  The following exchange shows a negotiation of such a modification via several exchanges between a subscriber and a publisher.  This negotiation consists of a failed RPC modification request/response followed by a successful one.If the subscription being modified in If the publisher can satisfy both changes, the publisher sends a positive result for the RPC. If the publisher cannot satisfy either of the proposed changes, the publisher sends an RPC error response (e).  The following is an example RPC error response for (e) that includes a hint. This hint is an alternative time period value that might have resulted in a successful modification:The following demonstrates deleting a subscription.  This subscription may have been to either a stream or a datastore.If the publisher can satisfy the request, the publisher replies with success to the RPC request.If the publisher cannot satisfy the request, the publisher sends
   an &lt;rpc-error&gt; element indicating the modification didn&#39;t work. Figure 11 shows a valid
   response for an existing valid subscription identifier, but that subscription identifier was created on a different transport session:A publisher will send subscription state notifications according to the definitions within A &#34;subscription-modified&#34; encoded in JSON would look like:A &#34;subscription-completed&#34; notification would look like:The &#34;subscription-resumed&#34; and &#34;replay-complete&#34; are virtually identical, with &#34;subscription-completed&#34; simply being replaced by &#34;subscription-resumed&#34; and &#34;replay-complete&#34;.A &#34;subscription-terminated&#34; would look like:The &#34;subscription-suspended&#34; is virtually identical, with &#34;subscription-terminated&#34; simply being replaced by &#34;subscription-suspended&#34;.This section provides an example that illustrates the method of filtering event record contents.  The example is based on the YANG notification &#34;vrrp-protocol-error-event&#34; as defined per the ietf-vrrp.yang module within Suppose a subscriber wanted to establish a subscription that only passes instances of event records where there is a &#34;checksum-error&#34; as part of a Virtual Router Redundancy Protocol (VRRP) protocol event.  Also assume the publisher places such event records into the NETCONF stream.  To get a continuous series of matching event records, the subscriber might request the application of an XPath filter against the NETCONF stream.  An &#34;establish-subscription&#34; RPC to meet this objective might be:For more examples of XPath filters, see Suppose the &#34;establish-subscription&#34; in For more examples of subtree filters, see We wish to acknowledge the helpful contributions, comments, and suggestions that were received from Ambika Prasad Tripathy, Alberto Gonzalez Prieto, Susan Hares, Tim Jenkins, Balazs Lengyel, Kent Watsen, Michael Scharf, Guangying Zheng, Martin Bjorklund, Qin Wu, and Robert Wilton.
        </pre>
      </div>
      <div class="col-sm-12 col-md-6">
        <pre class="text text-monospace">
This document provides a RESTCONF binding to the dynamic subscription
      capability of both subscribed notifications and YANG-Push.
            This is an Internet Standards Track document.
            This document is a product of the Internet Engineering Task Force
            (IETF).  It represents the consensus of the IETF community.  It has
            received public review and has been approved for publication by
            the Internet Engineering Steering Group (IESG).  Further
            information on Internet Standards is available in Section 2 of 
            RFC 7841.
            Information about the current status of this document, any
            errata, and how to provide feedback on it may be obtained at

            Copyright (c) 2019 IETF Trust and the persons identified as the
            document authors. All rights reserved.
            This document is subject to BCP 78 and the IETF Trust&#39;s Legal
            Provisions Relating to IETF Documents
            () in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.Mechanisms to support event subscription and YANG-Push are defined in . Enhancements to  that enable YANG datastore subscription and YANG-Push are defined in . 
This document provides a transport specification for dynamic subscriptions over RESTCONF The streaming of notifications that encapsulate the resulting information push is done via the mechanism described in 
    The key words &#34;&#34;, &#34;&#34;, &#34;&#34;, &#34;&#34;, &#34;&#34;, &#34;&#34;, &#34;&#34;, &#34;&#34;, &#34;&#34;,
    &#34;&#34;, and &#34;&#34; in this document are to be interpreted as
    described in BCP 14   
    when, and only when, they appear in all capitals, as shown here.The following terms use the definitions from Other terms reused include datastore, which is defined in This section provides specifics on how to establish and maintain dynamic subscriptions over RESTCONF As described in , a GET needs to be performed on a
      specific URI on the publisher. Subscribers cannot predetermine the URI
      against which a subscription might exist on a publisher, as the URI will
      only exist after the &#34;establish-subscription&#34; RPC has been
      accepted. Therefore, the POST for the &#34;establish-subscription&#34; RPC
      replaces the GET request for the &#34;location&#34; leaf that is used in  to obtain the URI. The subscription
      URI will be determined and sent as part of the response to the
      &#34;establish-subscription&#34; RPC, and a subsequent GET to this URI will be
      done in order to start the flow of notification messages back to the
      subscriber.  As specified in , a subscription does not move to the active state
      until the GET is received.For a dynamic subscription, when a RESTCONF session doesn&#39;t already exist, a new RESTCONF session is initiated from the subscriber.As stated in Without the involvement of additional protocols, HTTP sessions by
   themselves do not support quick recognition of the loss of the
   communication path to the publisher. Where quick recognition of the loss of a publisher is required, a subscriber  use a TLS heartbeat Loss of the heartbeat  result in the teardown
of any subscription-related TCP sessions between those endpoints.  
A subscriber can then attempt to re-establish the dynamic subscription by using the procedure described in Subscribers can learn which event streams a RESTCONF server supports by querying the &#34;streams&#34; container of ietf-subscribed-notifications.yang in Subscribers can learn which datastores a RESTCONF server supports by following Specific HTTP response codes as defined in If a publisher fails to serve the RPC request for one of the reasons indicated in When an HTTP error code is returned, the RPC reply  include 
an &lt;rpc-error&gt; element per  
with the following parameter values:Each error identity will be inserted as the &#34;error-app-tag&#34; using JSON encoding following the form &lt;modulename&gt;:&lt;identityname&gt;.  An example of such a valid encoding would be &#34;ietf-subscribed-notifications:no-such-subscription&#34;.In the case of error responses to an &#34;establish-subscription&#34; or
 &#34;modify-subscription&#34; request, there is the option to include an
 &#34;error-info&#34; node.  This node may contain hints for parameter settings
 that might lead to successful RPC requests in the future. Tables The yang-data included within &#34;error-info&#34;  include the
      optional leaf &#34;reason&#34;, as such a leaf would be redundant
      with information that is already placed within the
      &#34;error-app-tag&#34;.In case of an &lt;rpc-error&gt; as a result of a &#34;delete-subscription&#34;, a
      &#34;kill-subscription&#34;, or a &#34;resync-subscription&#34; request, no
      &#34;error-info&#34; needs to be included, as the &#34;subscription-id&#34; is
      the only RPC input parameter, and no hints regarding this RPC input
      parameters need to be provided.Note that &#34;error-path&#34; The call flow for Server-Sent Events (SSE) is defined in Figure 1.  The logical connections denoted
 by (a) and (b) can be a TCP connection or an HTTP/2 stream (if HTTP/2
 is used, multiple HTTP/2 streams can be carried in one TCP
 connection). Requests to RPCs as defined in  or  are
 sent on a connection indicated by (a).  A successful
 &#34;establish-subscription&#34; will result in an RPC response returned with
 both a subscription identifier that uniquely identifies a
 subscription, as well as a URI that uniquely identifies the location
 of subscription on the publisher (b). This URI is defined via the
 &#34;uri&#34; leaf in the data model in An HTTP GET is then sent on a separate logical connection (b) to the URI on the publisher.  This signals the publisher to initiate the flow of notification messages that are sent in SSE As described in Additional requirements for dynamic subscriptions over SSE include:A publisher  terminate a subscription in the following cases:A publisher  terminate a subscription at any time as stated in Qos treatment for event streams is described in For dynamic subscriptions with the same Differentiated Services Code Point (DSCP) value to a specific publisher, it is recommended that the subscriber sends all URI GET requests on a common HTTP/2 session (if HTTP/2 is used). Conversely, a subscriber cannot use a common HTTP/2 session for subscriptions with different DSCP values.Notification messages transported over RESTCONF will be encoded according to  The YANG module defined in This module references 
      This document registers the following namespace URI in the &#34;ns&#34;
      subregistry of the &#34;IETF XML Registry&#34; 
      This document registers the following YANG module in the &#34;YANG Module
      Names&#34; registry The YANG module specified in this document defines a schema for data that is designed to be accessed via network management transports such as NETCONF The Network Configuration Access Control Model (NACM)  
    provides the means to restrict access for particular NETCONF or 
    RESTCONF users to a preconfigured subset of all available NETCONF 
    or RESTCONF protocol operations and content.The one new data node introduced in this YANG module may be considered sensitive or vulnerable in some network environments.  It is thus important to control read access (e.g., via get, get-config, or notification) to this data node.  These are the subtrees and data nodes and their sensitivity/vulnerability:Container: &#34;/subscriptions&#34;The subscription URI is implementation specific and is encrypted via the use of TLS. Therefore, even if an attacker succeeds in guessing the subscription URI, a RESTCONF username The access permission considerations for the RPCs &#34;modify-subscription&#34;, &#34;resync-subscription&#34;, &#34;delete-subscription&#34;, and &#34;kill-subscription&#34; are described in If a buggy or compromised RESTCONF subscriber sends a number of &#34;establish-subscription&#34; requests, then these subscriptions accumulate and may
    use up system resources.  In such a situation, the publisher  also suspend or terminate a subset of the active
    subscriptions from that RESTCONF subscriber in order to reclaim resources and preserve normal operation for the other subscriptions.This section is non-normative.  To allow easy comparison, this section mirrors the functional examples shown with NETCONF over XML within The subscription URI values used in the examples in this section are purely illustrative, and are not indicative of the expected usage that is described in The DSCP values are only for example purposes and are all indicated in decimal since the encoding is JSON The following figure shows two successful
   &#34;establish-subscription&#34; RPC requests as per .  The first request is given a subscription
   identifier of 22, and the second, an identifier of 23.To provide examples of the information being transported, example messages for interactions in  As the publisher was able to fully satisfy the request, the publisher sends the subscription identifier of the accepted subscription and the URI:Upon receipt of the successful response, the subscriber does a
   GET to the provided URI to start the flow of notification messages.
   When the publisher receives this, the subscription is moved to the
   active state (c).While not shown in The subscriber can use this information in future attempts to establish a subscription.An existing subscription may be modified.  The following exchange shows a negotiation of such a modification via several exchanges between a subscriber and a publisher.  This negotiation consists of a failed RPC modification request/response followed by a successful one.If the subscription being modified in If the publisher can satisfy both changes, the publisher sends a positive result for the RPC. If the publisher cannot satisfy either of the proposed changes, the publisher sends an RPC error response (e).  The following is an example RPC error response for (e) that includes a hint. This hint is an alternative time period value that might have resulted in a successful modification:The following demonstrates deleting a subscription.  This subscription may have been to either a stream or a datastore.If the publisher can satisfy the request, the publisher replies with success to the RPC request.If the publisher cannot satisfy the request, the publisher sends
   an &lt;rpc-error&gt; element indicating the modification didn&#39;t work. Figure 11 shows a valid
   response for an existing valid subscription identifier, but that subscription identifier was created on a different transport session:A publisher will send subscription state notifications according to the definitions within A &#34;subscription-modified&#34; encoded in JSON would look like:A &#34;subscription-completed&#34; notification would look like:The &#34;subscription-resumed&#34; and &#34;replay-complete&#34; are virtually identical, with &#34;subscription-completed&#34; simply being replaced by &#34;subscription-resumed&#34; and &#34;replay-complete&#34;.A &#34;subscription-terminated&#34; would look like:The &#34;subscription-suspended&#34; is virtually identical, with &#34;subscription-terminated&#34; simply being replaced by &#34;subscription-suspended&#34;.This section provides an example that illustrates the method of filtering event record contents.  The example is based on the YANG notification &#34;vrrp-protocol-error-event&#34; as defined per the ietf-vrrp.yang module within Suppose a subscriber wanted to establish a subscription that only passes instances of event records where there is a &#34;checksum-error&#34; as part of a Virtual Router Redundancy Protocol (VRRP) protocol event.  Also assume the publisher places such event records into the NETCONF stream.  To get a continuous series of matching event records, the subscriber might request the application of an XPath filter against the NETCONF stream.  An &#34;establish-subscription&#34; RPC to meet this objective might be:For more examples of XPath filters, see Suppose the &#34;establish-subscription&#34; in For more examples of subtree filters, see We wish to acknowledge the helpful contributions, comments, and suggestions that were received from Ambika Prasad Tripathy, Alberto Gonzalez Prieto, Susan Hares, Tim Jenkins, Balazs Lengyel, Kent Watsen, Michael Scharf, Guangying Zheng, Martin Bjorklund, Qin Wu, and Robert Wilton.
        </pre>
      </div>

    </div>
  </div>
  <div id="rfc_footer"></div>
</body>
</html>
