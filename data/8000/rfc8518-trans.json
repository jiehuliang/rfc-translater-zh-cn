{
  "title": {
    "text": "RFC 8518: Selection of Loop-Free Alternates for Multi-Homed Prefixes",
    "zh-CHS": "RFC 8518"
  },
  "number": 8518,
  "created_at": "2021-10-27 15:35:55.030037+08:00",
  "updated_by": "",
  "contents": [
    {
      "indent": 0,
      "text": "Internet Engineering Task Force (IETF)                    P. Sarkar, Ed.\nRequest for Comments: 8518                                  Arrcus, Inc.\nUpdates: 5286                                           U. Chunduri, Ed.\nCategory: Standards Track                                     Huawei USA\nISSN: 2070-1721                                                 S. Hegde\n                                                  Juniper Networks, Inc.\n                                                             J. Tantsura\n                                                            Apstra, Inc.\n                                                              H. Gredler\n                                                           RtBrick, Inc.\n                                                              March 2019",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 7,
      "text": "Selection of Loop-Free Alternates for Multi-Homed Prefixes",
      "zh-CHS": "多主前缀的无循环替换选择"
    },
    {
      "indent": 0,
      "text": "Abstract",
      "zh-CHS": "摘要"
    },
    {
      "indent": 3,
      "text": "Deployment experience gained from implementing algorithms to determine Loop-Free Alternates (LFAs) for multi-homed prefixes (MHPs) has revealed some avenues for potential improvement. This document provides explicit inequalities that can be used to evaluate neighbors as potential alternates for MHPs. It also provides detailed criteria for evaluating potential alternates for external prefixes advertised by OSPF ASBRs. This document updates Section 6 of RFC 5286 by expanding some of the routing aspects.",
      "zh-CHS": "从实现算法以确定多主前缀（MHP）的无循环替换（LFA）中获得的部署经验揭示了一些潜在的改进途径。本文件提供了明确的不等式，可用于评估邻居作为MHP的潜在替代物。它还提供了详细的标准，用于评估OSPF ASBR所宣传的外部前缀的潜在替代方案。本文件通过扩展一些路由方面更新了RFC 5286第6节。"
    },
    {
      "indent": 0,
      "text": "Status of This Memo",
      "zh-CHS": "关于下段备忘"
    },
    {
      "indent": 3,
      "text": "This is an Internet Standards Track document.",
      "zh-CHS": "这是一份互联网标准跟踪文件。"
    },
    {
      "indent": 3,
      "text": "This document is a product of the Internet Engineering Task Force (IETF). It represents the consensus of the IETF community. It has received public review and has been approved for publication by the Internet Engineering Steering Group (IESG). Further information on Internet Standards is available in Section 2 of RFC 7841.",
      "zh-CHS": "本文件是互联网工程任务组（IETF）的产品。它代表了IETF社区的共识。它已经接受了公众审查，并已被互联网工程指导小组（IESG）批准出版。有关互联网标准的更多信息，请参见RFC 7841第2节。"
    },
    {
      "indent": 3,
      "text": "Information about the current status of this document, any errata, and how to provide feedback on it may be obtained at https://www.rfc-editor.org/info/rfc8518.",
      "zh-CHS": "有关本文件当前状态、任何勘误表以及如何提供反馈的信息，请访问https://www.rfc-editor.org/info/rfc8518."
    },
    {
      "indent": 0,
      "text": "Copyright Notice",
      "zh-CHS": "版权公告"
    },
    {
      "indent": 3,
      "text": "Copyright (c) 2019 IETF Trust and the persons identified as the document authors. All rights reserved.",
      "zh-CHS": "版权（c）2019 IETF信托基金和被确定为文件作者的人员。版权所有。"
    },
    {
      "indent": 3,
      "text": "This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (https://trustee.ietf.org/license-info) in effect on the date of publication of this document. Please review these documents carefully, as they describe your rights and restrictions with respect to this document. Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.",
      "zh-CHS": "本文件受BCP 78和IETF信托有关IETF文件的法律规定的约束(https://trustee.ietf.org/license-info)自本文件出版之日起生效。请仔细阅读这些文件，因为它们描述了您对本文件的权利和限制。从本文件中提取的代码组件必须包括信托法律条款第4.e节中所述的简化BSD许可证文本，并提供简化BSD许可证中所述的无担保。"
    },
    {
      "indent": 0,
      "text": "Table of Contents",
      "zh-CHS": "目录"
    },
    {
      "indent": 3,
      "text": "1. Introduction ....................................................3\n   1.1. Acronyms ...................................................4\n   1.2. Requirements Language ......................................4\n2. LFA Inequalities for MHPs .......................................4\n3. LFA Selection for MHPs ..........................................6\n   3.1. Improved Coverage with Simplified Approach to MHPs .........7\n   3.2. IS-IS ATT Bit Considerations ...............................9\n4. LFA Selection for Multi-Homed External Prefixes ................10\n   4.1. IS-IS .....................................................10\n   4.2. OSPF ......................................................10\n        4.2.1. Rules to Select Alternate ASBRs ....................10\n            4.2.1.1. Multiple ASBRs Belonging to Different Areas ..12\n            4.2.1.2. Type 1 and Type 2 Costs ......................12\n            4.2.1.3. RFC1583Compatibility is Set to \"Enabled\" .....12\n            4.2.1.4. Type 7 Routes ................................13\n        4.2.2. Inequalities to Be Applied for Alternate ASBR\n               Selection ..........................................13\n            4.2.2.1. Forwarding Address Set to Non-zero Value .....13\n            4.2.2.2. ASBRs Advertising Type 1 and Type 2 Costs ....14\n5. LFA Extended Procedures ........................................15\n   5.1. Links with IGP MAX_METRIC .................................15\n   5.2. MT Considerations .........................................16\n6. IANA Considerations ............................................16\n7. Security Considerations ........................................17\n8. References .....................................................17\n   8.1. Normative References ......................................17\n   8.2. Informative References ....................................17\nAcknowledgements ..................................................19\nContributors ......................................................19\nAuthors' Addresses ................................................20",
      "raw": true,
      "toc": true,
      "zh-CHS": " "
    },
    {
      "indent": 0,
      "text": "1. Introduction",
      "section_title": true,
      "zh-CHS": "1. 介绍"
    },
    {
      "indent": 3,
      "text": "A framework for the development of IP Fast Reroute (FRR) mechanisms is detailed in [RFC5714]. The use of LFAs for IP FRR is specified in [RFC5286]. If a prefix is advertised by more than one router, that prefix is called a \"multi-homed prefix (MHP)\". MHPs generally occur for prefixes obtained from outside the routing domain by multiple routers, for subnets on links where the subnet is announced from multiple ends of the link, and for prefixes advertised by multiple routers to provide resiliency.",
      "zh-CHS": "[RFC5714]详细介绍了开发IP快速重路由（FRR）机制的框架。[RFC5286]中规定了IP FRR中LFA的使用。如果一个前缀由多个路由器播发，则该前缀称为“多宿前缀（MHP）”。MHP通常出现在多个路由器从路由域外部获得的前缀、从链路多个端宣布子网的链路上的子网以及多个路由器为提供弹性而公布的前缀上。"
    },
    {
      "indent": 3,
      "text": "Section 6.1 of [RFC5286] describes a method to determine LFAs for MHPs. This document describes a procedure using explicit inequalities that can be used by a computing router to evaluate a neighbor as a potential alternate for an MHP. The results obtained are equivalent to those obtained using the method described in Section 6.1 of [RFC5286].",
      "zh-CHS": "[RFC5286]第6.1节描述了确定MHP LFA的方法。本文档描述了一个使用显式不等式的过程，计算路由器可以使用显式不等式来评估邻居作为MHP的潜在替代。所得结果与使用[RFC5286]第6.1节所述方法所得结果相同。"
    },
    {
      "indent": 3,
      "text": "Section 6.3 of [RFC5286] discusses complications associated with computing LFAs for MHPs in OSPF. This document provides detailed criteria for evaluating potential alternates for external prefixes advertised by OSPF ASBRs, as well as explicit inequalities.",
      "zh-CHS": "[RFC5286]第6.3节讨论了OSPF中MHP计算LFA的相关复杂性。本文档提供了评估OSPF ASBR所宣传的外部前缀的潜在替代方案的详细标准，以及显式不等式。"
    },
    {
      "indent": 3,
      "text": "This document also provides clarifications and additional considerations to [RFC5286] to address a few coverage and operational observations. These observations are concerned with 1) the IS-IS ATT (attach) bit in the Level 1 (L1) area, 2) links provisioned with MAX_METRIC (see Section 5.1) for traffic engineering (TE) purposes, and 3) multi-topology (MT) IGP deployments. These are elaborated in detail in Sections 3.2 and 5.",
      "zh-CHS": "本文件还为[RFC5286]提供了澄清和其他注意事项，以解决一些覆盖范围和操作观察问题。这些观察结果涉及1）1级（L1）区域中的IS-IS ATT（连接）位，2）为流量工程（TE）目的提供了最大度量（见第5.1节）的链路，以及3）多拓扑（MT）IGP部署。第3.2节和第5节对此进行了详细阐述。"
    },
    {
      "indent": 3,
      "text": "This specification uses the same terminology introduced in [RFC5714] to represent LFA and builds on the notation for inequalities used in [RFC5286] to compute LFAs for MHPs.",
      "zh-CHS": "本规范使用[RFC5714]中介绍的相同术语表示LFA，并基于[RFC5286]中用于计算MHP LFA的不等式表示法。"
    },
    {
      "indent": 0,
      "text": "1.1. Acronyms",
      "section_title": true,
      "zh-CHS": "1.1. 缩略词"
    },
    {
      "indent": 3,
      "text": "AF - Address Family",
      "zh-CHS": "AF地址族"
    },
    {
      "indent": 3,
      "text": "ATT - IS-IS Attach Bit",
      "zh-CHS": "ATT-IS-IS连接位"
    },
    {
      "indent": 3,
      "text": "ECMP - Equal-Cost Multipath",
      "zh-CHS": "ECMP-等成本多路径"
    },
    {
      "indent": 3,
      "text": "FRR - Fast Reroute",
      "zh-CHS": "快速重路由"
    },
    {
      "indent": 3,
      "text": "IGP - Interior Gateway Protocol",
      "zh-CHS": "内部网关协议"
    },
    {
      "indent": 3,
      "text": "IS-IS - Intermediate System to Intermediate System",
      "zh-CHS": "IS-IS-中间系统至中间系统"
    },
    {
      "indent": 3,
      "text": "LFA - Loop-Free Alternate",
      "zh-CHS": "LFA-无环交替"
    },
    {
      "indent": 3,
      "text": "LSP - Link State PDU (IS-IS)",
      "zh-CHS": "LSP-链路状态PDU（IS-IS）"
    },
    {
      "indent": 3,
      "text": "MHP - Multi-Homed Prefix",
      "zh-CHS": "MHP-多主前缀"
    },
    {
      "indent": 3,
      "text": "MT - Multi-Topology",
      "zh-CHS": "多拓扑"
    },
    {
      "indent": 3,
      "text": "OSPF - Open Shortest Path First",
      "zh-CHS": "开放最短路径优先"
    },
    {
      "indent": 3,
      "text": "SPF - Shortest Path First",
      "zh-CHS": "SPF-最短路径优先"
    },
    {
      "indent": 0,
      "text": "1.2. Requirements Language",
      "section_title": true,
      "zh-CHS": "1.2. 需求语言"
    },
    {
      "indent": 3,
      "text": "The key words \"MUST\", \"MUST NOT\", \"REQUIRED\", \"SHALL\", \"SHALL NOT\", \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\", \"NOT RECOMMENDED\", \"MAY\", and \"OPTIONAL\" in this document are to be interpreted as described in BCP 14 [RFC2119] [RFC8174] when, and only when, they appear in all capitals, as shown here.",
      "zh-CHS": "本文件中的关键词“必须”、“不得”、“必需”、“应”、“不应”、“建议”、“不建议”、“可”和“可选”在所有大写字母出现时（如图所示）应按照BCP 14[RFC2119][RFC8174]所述进行解释。"
    },
    {
      "indent": 0,
      "text": "2. LFA Inequalities for MHPs",
      "section_title": true,
      "zh-CHS": "2. MHPs的LFA不等式"
    },
    {
      "indent": 3,
      "text": "This document proposes the following set of LFA inequalities for selecting the most appropriate LFAs for MHPs. Distance_opt(X,Y) (called \"D_opt(X,Y)\" in this document) is defined in [RFC5714] and is nothing but the metric sum of the shortest path from X to Y. Cost(X,Y), introduced in this document, is defined as the metric value of prefix Y from the prefix advertising node X. These LFAs can be derived from the inequalities in [RFC5286] combined with the observation that D_opt(N,P) = Min (D_opt(N,PO_i) + Cost(PO_i,P)) over all PO_i.",
      "zh-CHS": "本文件提出了以下一组LFA不等式，用于为MHP选择最合适的LFA。[RFC5714]中定义了距离_opt（X，Y）（在本文件中称为“D_opt（X，Y）”），它只不过是从X到Y的最短路径的度量和。本文件中引入的成本（X，Y）定义为前缀广告节点X的前缀Y的度量值。这些LFA可以从[RFC5286]中的不等式中推导出来结合观察，D_opt（N，P）=Min（D_opt（N，PO_i）+成本（PO_i，P））覆盖所有PO_i。"
    },
    {
      "indent": 3,
      "text": "Link-Protecting LFAs: A neighbor N can provide an LFA if and only if",
      "zh-CHS": "链路保护LFA：邻居N可以提供LFA当且仅当"
    },
    {
      "indent": 6,
      "text": "D_opt(N,PO_i)+ Cost(PO_i,P) < D_opt(N,S) +\n                              D_opt(S,PO_best) + Cost(PO_best,P)",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "Link-Protecting + Downstream-paths-only LFAs: A subset of loop-free alternates are downstream paths that must meet a more restrictive condition that is applicable to more complex failure scenarios.",
      "zh-CHS": "链路保护+仅下游路径LFA：无环路备选方案的子集是下游路径，必须满足适用于更复杂故障场景的更严格条件。"
    },
    {
      "indent": 6,
      "text": "D_opt(N,PO_i)+ Cost(PO_i,P) < D_opt(S,PO_best) + Cost(PO_best,P)",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "Node-Protecting LFAs: For an alternate next hop N to protect against node failure of a primary neighbor E for MHP P, N must be loop-free with respect to both E and MHP P. In other words, N's path to MHP P must not go through E (where N is the neighbor providing a loop-free alternate).",
      "zh-CHS": "节点保护LFA：对于备用下一跳N，为了防止MHP的主邻居E的节点故障，N必须与E和MHP都是无环的。换句话说，N到MHP的路径不能通过E（其中N是提供无环备用的邻居）。"
    },
    {
      "indent": 6,
      "text": "D_opt(N,PO_i)+ Cost(PO_i,P) < D_opt(N,E) +\n                              D_opt(E,PO_best) + Cost(PO_best,P)",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 6,
      "text": "Where:",
      "zh-CHS": "哪里："
    },
    {
      "indent": 6,
      "text": "P - The MHP being evaluated for computing alternates",
      "zh-CHS": "P-为计算备选方案而评估的MHP"
    },
    {
      "indent": 6,
      "text": "S - The computing router",
      "zh-CHS": "计算路由器"
    },
    {
      "indent": 6,
      "text": "N - The alternate router being evaluated",
      "zh-CHS": "N-正在评估的备用路由器"
    },
    {
      "indent": 6,
      "text": "E - The primary next hop on the shortest path from S to prefix P",
      "zh-CHS": "E-从S到前缀P的最短路径上的主要下一跳"
    },
    {
      "indent": 6,
      "text": "PO_i - The specific prefix-originating router being evaluated",
      "zh-CHS": "PO_i-正在评估的特定前缀始发路由器"
    },
    {
      "indent": 6,
      "text": "PO_best - The prefix-originating router on the shortest path from the computing router S to prefix P",
      "zh-CHS": "PO_best-从计算路由器S到前缀P的最短路径上的前缀起始路由器"
    },
    {
      "indent": 6,
      "text": "Cost(X,P) - The cost of reaching the prefix P from prefix originating node X",
      "zh-CHS": "成本（X，P）-从前缀发起节点X到达前缀P的成本"
    },
    {
      "indent": 6,
      "text": "D_opt(X,Y) - The distance on the shortest path from node X to node Y",
      "zh-CHS": "D_opt（X，Y）-从节点X到节点Y的最短路径上的距离"
    },
    {
      "indent": 0,
      "text": "3. LFA Selection for MHPs",
      "section_title": true,
      "zh-CHS": "3. mhp的LFA选择"
    },
    {
      "indent": 3,
      "text": "To compute a valid LFA for a given MHP P, a computing router S MUST, for each alternate neighbor N, follow one of the appropriate procedures below once for each remote node that originated the prefix P.",
      "zh-CHS": "为了计算给定MHP的有效LFA，计算路由器S必须针对每个备用邻居N，针对发起前缀P的每个远程节点，遵循以下适当过程之一一次。"
    },
    {
      "indent": 3,
      "text": "Link-Protecting LFAs:",
      "zh-CHS": "链路保护LFA："
    },
    {
      "indent": 3,
      "text": "1. If, in addition to being an alternate neighbor, N is also a prefix originator of P,",
      "zh-CHS": "1. 如果N除了是备用邻居之外，还是P的前缀发起人，"
    },
    {
      "indent": 7,
      "text": "A. Select N as an LFA for prefix P (irrespective of the metric advertised by N for the prefix P).",
      "zh-CHS": "A.选择N作为前缀P的LFA（与N宣传的前缀P的度量无关）。"
    },
    {
      "indent": 3,
      "text": "2. Else, evaluate the link-protecting LFA inequality for P with N as the alternate neighbor.",
      "zh-CHS": "2. 否则，评估以N作为替代邻居的P的链路保护LFA不等式。"
    },
    {
      "indent": 7,
      "text": "A. If the LFA inequality condition is met, select N as an LFA for prefix P.",
      "zh-CHS": "A.如果满足LFA不等式条件，选择N作为前缀P的LFA。"
    },
    {
      "indent": 7,
      "text": "B. Else, N is not an LFA for prefix P.",
      "zh-CHS": "否则，N不是前缀P的LFA。"
    },
    {
      "indent": 3,
      "text": "Link-Protecting + Downstream-paths-only LFAs:",
      "zh-CHS": "链路保护+仅下游路径LFA："
    },
    {
      "indent": 3,
      "text": "1. Evaluate the link-protecting + downstream-paths-only LFA inequality for P with N as the alternate neighbor.",
      "zh-CHS": "1. 评估P的链路保护+仅下游路径LFA不等式，其中N为备用邻居。"
    },
    {
      "indent": 7,
      "text": "A. If the LFA inequality condition is met, select N as an LFA for prefix P.",
      "zh-CHS": "A.如果满足LFA不等式条件，选择N作为前缀P的LFA。"
    },
    {
      "indent": 7,
      "text": "B. Else, N is not an LFA for prefix P.",
      "zh-CHS": "否则，N不是前缀P的LFA。"
    },
    {
      "indent": 3,
      "text": "Node-Protecting LFAs:",
      "zh-CHS": "节点保护LFA："
    },
    {
      "indent": 3,
      "text": "1. If, in addition to being an alternate neighbor, N is also a prefix originator of P,",
      "zh-CHS": "1. 如果N除了是备用邻居之外，还是P的前缀发起人，"
    },
    {
      "indent": 7,
      "text": "A. Select N as an LFA for prefix P (irrespective of the metric advertised by N for the prefix P).",
      "zh-CHS": "A.选择N作为前缀P的LFA（与N宣传的前缀P的度量无关）。"
    },
    {
      "indent": 3,
      "text": "2. Else, evaluate the appropriate node-protecting LFA inequality for P with N as the alternate neighbor.",
      "zh-CHS": "2. 否则，计算P的适当节点保护LFA不等式，其中N作为备用邻居。"
    },
    {
      "indent": 7,
      "text": "A. If the LFA inequality condition is met, select N as an LFA for prefix P.",
      "zh-CHS": "A.如果满足LFA不等式条件，选择N作为前缀P的LFA。"
    },
    {
      "indent": 7,
      "text": "B. Else, N is not an LFA for prefix P.",
      "zh-CHS": "否则，N不是前缀P的LFA。"
    },
    {
      "indent": 3,
      "text": "If an alternate neighbor N is also one of the prefix originators of prefix P, it is guaranteed that N will not loop back packets destined for prefix P to computing router S. Therefore, N MUST be chosen as a valid LFA for prefix P without evaluating any of the inequalities in Section 2 as long as a downstream-paths-only LFA is not desired. To ensure such a neighbor N also provides a downstream-paths-only LFA, router S MUST also evaluate the downstream-paths-only LFA inequality specified in Section 2 for neighbor N and ensure router N satisfies the inequality.",
      "zh-CHS": "如果备用邻居N也是前缀P的前缀发起者之一，则可以保证N不会将目的地为前缀P的数据包回送到计算路由器S。因此，只要不需要仅下游路径LFA，就必须选择N作为前缀P的有效LFA，而无需评估第2节中的任何不等式。为了确保这样的邻居N也提供仅下游路径LFA，路由器S还必须评估第2节中为邻居N指定的仅下游路径LFA不等式，并确保路由器N满足该不等式。"
    },
    {
      "indent": 3,
      "text": "However, if N is not a prefix originator of P, the computing router MUST evaluate one of the corresponding LFA inequalities defined in Section 2 once for each remote node that originated the prefix. If the inequality is satisfied by the neighbor N, router S MUST choose neighbor N as one of the valid LFAs for the prefix P.",
      "zh-CHS": "然而，如果N不是P的前缀发起者，则计算路由器必须针对产生前缀的每个远程节点对第2节中定义的相应LFA不等式之一进行一次评估。如果邻居N满足不等式，路由器S必须选择邻居N作为前缀P的有效lfa之一。"
    },
    {
      "indent": 3,
      "text": "For more specific rules, please refer to Section 4.",
      "zh-CHS": "有关更具体的规则，请参阅第4节。"
    },
    {
      "indent": 0,
      "text": "3.1. Improved Coverage with Simplified Approach to MHPs",
      "section_title": true,
      "zh-CHS": "3.1. 通过简化MHPs方法提高覆盖率"
    },
    {
      "indent": 3,
      "text": "Section 6.1 of the LFA base specification [RFC5286] recommends that a router computes the alternate next hop for an IGP MHP by considering alternate paths via all routers that have announced that prefix. The same has been elaborated with appropriate inequalities in the previous section. However, Section 6.1 of [RFC5286] also allows for the router to simplify the MHP calculation by assuming that the MHP is solely attached to the router that was its pre-failure optimal point of attachment, at the expense of potentially lower coverage. If an implementation chooses to simplify the MHP calculation by assuming that the MHP is solely attached to the router that was its pre-failure optimal point of attachment, the procedure described in this memo can potentially improve coverage for ECMP MHPs without incurring extra computational cost.",
      "zh-CHS": "LFA基本规范[RFC5286]第6.1节建议路由器通过考虑通过所有已宣布前缀的路由器的备用路径来计算IGP MHP的备用下一跳。在前一节中，也用适当的不平等性对此进行了阐述。然而，[RFC5286]的第6.1节也允许路由器简化MHP计算，假设MHP仅连接到作为其故障前最佳连接点的路由器，以牺牲可能较低的覆盖率为代价。如果实现选择通过假设MHP仅连接到作为其故障前最佳连接点的路由器来简化MHP计算，则本备忘录中描述的过程可能会提高ECMP MHP的覆盖率，而不会产生额外的计算成本。"
    },
    {
      "indent": 3,
      "text": "This document improves the above approach to provide loop-free alternatives without any additional cost for ECMP MHPs as described in the example network presented in Figure 1. The approach specified here may also be applicable for handling default routes as explained in Section 3.2.",
      "zh-CHS": "本文件改进了上述方法，以提供无回路替代方案，而无需为ECMP MHP增加任何额外成本，如图1所示的示例网络所述。如第3.2节所述，此处规定的方法也适用于处理默认路线。"
    },
    {
      "indent": 21,
      "text": "    5   +---+  8   +---+  5  +---+\n  +-----| S |------| A |-----| B |\n  |     +---+      +---+     +---+\n  |       |                    |\n  |     5 |                  5 |\n  |       |                    |\n+---+ 5 +---+   4 +---+  1    +---+\n| C |---| E |-----| M |-------| F |\n+---+   +---+     +---+       +---+\n          |   10           5    |\n          +-----------P---------+",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 19,
      "text": "Figure 1: MHP with Same ECMP Next Hop",
      "zh-CHS": "图1：具有相同ECMP下一跳的MHP"
    },
    {
      "indent": 3,
      "text": "In Figure 1, a prefix P is advertised from both node E and node F. With a simplified approach taken as specified in Section 6.1 of [RFC5286], prefix P will get only a link-protecting LFA through the neighbor C while a node-protection path is available through neighbor A. In this scenario, E and F both are pre-failure optimal points of attachment and share the same primary next hop. Hence, an implementation MAY compare the kind of protection A provides to F (link and node protection) with the kind of protection C provides to E (link protection) and inherit the better alternative to prefix P. In this case, the better alternative is A.",
      "zh-CHS": "在图1中，从节点E和节点F播发前缀P。采用[RFC5286]第6.1节中规定的简化方法，前缀P将仅通过邻居C获得链路保护LFA，而通过邻居a提供节点保护路径。在这种情况下，E和F都是故障前的最佳连接点，并且共享相同的主下一跳。因此，实现可以将A提供给F（链路和节点保护）的保护类型与C提供给E（链路保护）的保护类型进行比较，并继承前缀P的更好替代方案。在这种情况下，更好的替代方案是A。"
    },
    {
      "indent": 3,
      "text": "However, in the example network presented in Figure 2, prefix P has an ECMP through both node E and node F with cost 20. Though it has two pre-failure optimal points of attachment, the primary next hop to each pre-failure optimal point of attachment is different. In this case, prefix P MUST inherit the corresponding LFAs of each primary next hop calculated for the router advertising the same. In Figure 2, that would be the LFA for node E and node F, i.e., node N1 and node N2, respectively.",
      "zh-CHS": "然而，在图2所示的示例网络中，前缀P具有通过节点E和节点F的ECMP，成本为20。虽然它有两个故障前最佳连接点，但每个故障前最佳连接点的主要下一跳是不同的。在这种情况下，前缀P必须继承为路由器计算的每个主下一跳的相应lfa。在图2中，这将是节点E和节点F的LFA，即分别是节点N1和节点N2。"
    },
    {
      "indent": 19,
      "text": "                        4      +----+\n            +------------------| N2 |\n            |                  +----+\n            |                    | 4\n     10   +---+         3      +---+\n   +------| S |----------------| B |\n   |      +---+                +---+\n   |        |                    |\n   |     10 |                  1 |\n   |        |                    |\n+----+ 5  +---+        16       +---+\n| N1 |----| E |-----------------| F |\n+----+    +---+                 +---+\n            |   10          16    |\n            +-----------P---------+",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 16,
      "text": "Figure 2: MHP with Different ECMP Next Hops",
      "zh-CHS": "图2：具有不同ECMP下一跳的MHP"
    },
    {
      "indent": 3,
      "text": "In summary, if there are multiple pre-failure points of attachment for an MHP, and the primary next hop of an MHP is the same as that of the primary next hop of the router that was the pre-failure optimal point of attachment, an implementation MAY provide a better protection to the MHP without incurring any additional computation cost.",
      "zh-CHS": "总之，如果MHP存在多个故障前连接点，并且MHP的主下一跳与作为故障前最佳连接点的路由器的主下一跳相同，则实现可以向MHP提供更好的保护，而不会产生任何额外的计算成本。"
    },
    {
      "indent": 0,
      "text": "3.2. IS-IS ATT Bit Considerations",
      "section_title": true,
      "zh-CHS": "3.2. IS-IS ATT位注意事项"
    },
    {
      "indent": 3,
      "text": "Per [RFC1195], a default route needs to be added in the Level 1 (L1) router to the closest reachable Level 1 / Level 2 (L1/L2) router in the network advertising the ATT (attach) bit in its LSP-0 fragment. All L1 routers in the area would do this during the decision process with the next hop of the default route set to the adjacent router through which the closest L1/L2 router is reachable. The LFA base specification [RFC5286] does not specify any procedure for computing LFA for a default route in the IS-IS L1 area. This document specifies that a node can consider a default route is being advertised from the border L1/L2 router where the ATT bit is set and can do LFA computation for that default route. But, when multiple ECMP L1/L2 routers are reachable in an L1 area, corresponding best LFAs SHOULD be computed for each primary next hop associated with the default route as this would be similar to the ECMP MHP example described in Section 3.1. Considerations specified in Sections 3 and 3.1 are applicable for default routes if the default route is considered an ECMP MHP. Note that this document doesn't alter any ECMP handling rules or computation of LFAs for ECMP in general as laid out in [RFC5286].",
      "zh-CHS": "根据[RFC1195]，需要在1级（L1）路由器中添加一条默认路由，连接到网络中最近的可到达1级/2级（L1/L2）路由器，在其LSP-0片段中公布ATT（附加）位。该区域中的所有L1路由器将在决策过程中执行此操作，默认路由的下一跳设置为相邻路由器，通过该路由器可以到达最近的L1/L2路由器。LFA基本规范[RFC5286]未规定计算IS-IS L1区域中默认路由的LFA的任何程序。此文档指定节点可以考虑从AT1位设置的边界L1/L2路由器上发布的默认路由，并且可以对该默认路由进行LFA计算。但是，当多个ECMP L1/L2路由器在L1区域中可到达时，应为与默认路由相关联的每个主下一跳计算相应的最佳LFA，因为这类似于第3.1节中描述的ECMP MHP示例。如果默认路线被视为ECMP MHP，则第3节和第3.1节中规定的注意事项适用于默认路线。请注意，本文件不会改变[RFC5286]中规定的任何ECMP处理规则或一般ECMP LFA计算。"
    },
    {
      "indent": 0,
      "text": "4. LFA Selection for Multi-Homed External Prefixes",
      "section_title": true,
      "zh-CHS": "4. 多宿主外部前缀的LFA选择"
    },
    {
      "indent": 3,
      "text": "Redistribution of external routes into IGP is required 1) when two different networks get merged into one or 2) during protocol migrations.",
      "zh-CHS": "1）当两个不同的网络合并为一个或2）在协议迁移期间，需要将外部路由重新分配到IGP中。"
    },
    {
      "indent": 3,
      "text": "During LFA calculation, alternate LFA next hops to reach the best ASBR could be used as LFA for the routes redistributed via that ASBR. When there is no LFA available to the best ASBR, it may be desirable to consider the other ASBRs (referred to as \"alternate ASBRs\" hereafter) redistributing the external routes for LFA selection as defined in [RFC5286] and leverage the advantage of having multiple redistributing nodes in the network.",
      "zh-CHS": "在LFA计算期间，达到最佳ASBR的备用LFA下一跳可以用作通过该ASBR重新分配的路由的LFA。当没有最好的ASBR可用的LFA时，可能需要考虑另一个ASBR（以下称为“备用ASBR”）重新分配如[RCF5256]中定义的LFA选择的外部路由，并利用在网络中具有多个重新分布节点的优点。"
    },
    {
      "indent": 0,
      "text": "4.1. IS-IS",
      "section_title": true,
      "zh-CHS": "4.1. IS-IS"
    },
    {
      "indent": 3,
      "text": "LFA evaluation for multi-homed external prefixes in IS-IS is the same as the multi-homed internal prefixes. Inequalities described in Section 2 would also apply to multi-homed external prefixes.",
      "zh-CHS": "IS-IS中多宿主外部前缀的LFA评估与多宿主内部前缀相同。第2节中描述的不等式也适用于多宿主外部前缀。"
    },
    {
      "indent": 0,
      "text": "4.2. OSPF",
      "section_title": true,
      "zh-CHS": "4.2. OSPF"
    },
    {
      "indent": 3,
      "text": "The LFA base specification [RFC5286] describes mechanisms to apply inequalities to find the loop-free alternate neighbor. Additional rules have to be applied in selecting the alternate ASBR for LFA consideration due to the external route calculation rules imposed by [RFC2328].",
      "zh-CHS": "LFA基本规范[RFC5286]描述了应用不等式寻找无环备用邻居的机制。由于[RFC2328]规定的外部路线计算规则，在选择备用ASBR以供LFA考虑时，必须应用其他规则。"
    },
    {
      "indent": 3,
      "text": "This document defines inequalities specifically for alternate loop-free ASBR evaluation. These inequalities are based on those in [RFC5286].",
      "zh-CHS": "本文档专门为备用无循环ASBR评估定义了不等式。这些不等式基于[RFC5286]中的不等式。"
    },
    {
      "indent": 0,
      "text": "4.2.1. Rules to Select Alternate ASBRs",
      "section_title": true,
      "zh-CHS": "4.2.1. 选择备用ASBR的规则"
    },
    {
      "indent": 3,
      "text": "The process to select an alternate ASBR is best explained using the rules below. The process below is applied when a primary ASBR for the concerned prefix is chosen and there is an alternate ASBR originating the same prefix.",
      "zh-CHS": "选择备用ASBR的过程最好使用以下规则进行解释。当为相关前缀选择了主ASBR，并且存在源自相同前缀的备用ASBR时，将应用以下过程。"
    },
    {
      "indent": 3,
      "text": "1. If RFC1583Compatibility is disabled:",
      "zh-CHS": "1. 如果禁用RFC1583兼容性："
    },
    {
      "indent": 7,
      "text": "A. If primary ASBR and alternate ASBR belong to intra-area non-backbone, go to step 2.",
      "zh-CHS": "A.如果主ASBR和备用ASBR属于区域内非主干网，请转至步骤2。"
    },
    {
      "indent": 7,
      "text": "B. If primary ASBR and alternate ASBR belong to intra-area backbone and/or inter-area path, go to step 2.",
      "zh-CHS": "B.如果主ASBR和备用ASBR属于区域内主干和/或区域间路径，请转至步骤2。"
    },
    {
      "indent": 7,
      "text": "C. For other paths, skip this alternate ASBR and consider next ASBR.",
      "zh-CHS": "对于其他路径，跳过此交替ASBR，并考虑下一步ASBR。"
    },
    {
      "indent": 3,
      "text": "2. Compare cost types (type 1 / type 2) advertised by alternate ASBR and primary ASBR:",
      "zh-CHS": "2. 比较备用ASBR和主ASBR公布的成本类型（类型1/类型2）："
    },
    {
      "indent": 7,
      "text": "A. If not the same type, skip alternate ASBR and consider next ASBR.",
      "zh-CHS": "如果不是同一类型，跳过交替ASBR，并考虑下一步ASBR。"
    },
    {
      "indent": 7,
      "text": "B. If the same, proceed to step 3.",
      "zh-CHS": "B.如果相同，则转至步骤3。"
    },
    {
      "indent": 3,
      "text": "3. If cost types are type 1, compare costs advertised by alternate ASBR and primary ASBR:",
      "zh-CHS": "3. 如果成本类型为类型1，比较备用ASBR和主ASBR公布的成本："
    },
    {
      "indent": 7,
      "text": "A. If costs are the same, then program ECMP FRR and return.",
      "zh-CHS": "A.如果成本相同，则编制ECMP FRR并返回。"
    },
    {
      "indent": 7,
      "text": "B. Else, go to step 5.",
      "zh-CHS": "B.否则，请转至步骤5。"
    },
    {
      "indent": 3,
      "text": "4. If cost types are type 2, compare costs advertised by alternate ASBR and primary ASBR:",
      "zh-CHS": "4. 如果成本类型为类型2，比较备用ASBR和主ASBR公布的成本："
    },
    {
      "indent": 7,
      "text": "A. If costs are different, skip alternate ASBR and consider next ASBR.",
      "zh-CHS": "如果成本不同，跳过交替ASBR，并考虑下一步ASBR。"
    },
    {
      "indent": 7,
      "text": "B. If costs are the same, proceed to step 4C to compare costs to reach ASBR/forwarding address.",
      "zh-CHS": "B.如果成本相同，则转至步骤4C，比较到达ASBR/转发地址的成本。"
    },
    {
      "indent": 7,
      "text": "C. If costs to reach ASBR/forwarding address are also the same, program ECMP FRR and return.",
      "zh-CHS": "C.如果到达ASBR/转发地址的成本也相同，则计划ECMP FRR并返回。"
    },
    {
      "indent": 7,
      "text": "D. If costs to reach ASBR/forwarding address are different, go to step 5.",
      "zh-CHS": "D.如果到达ASBR/转发地址的成本不同，请转至步骤5。"
    },
    {
      "indent": 3,
      "text": "5. Compare route types (type 5 and type 7) for alternate ASBR and primary ASBR:",
      "zh-CHS": "5. 比较备用ASBR和主ASBR的路线类型（类型5和类型7）："
    },
    {
      "indent": 7,
      "text": "A. If route types are the same, check if route p-bit and forwarding address field for routes from both ASBRs match. If p-bit and forwarding address match, proceed to step 6. If not, skip this alternate ASBR and consider next ASBR.",
      "zh-CHS": "A.如果路由类型相同，请检查来自两个ASBR的路由的路由p位和转发地址字段是否匹配。如果p位和转发地址匹配，则转至步骤6。如果没有，跳过这个交替ASBR，并考虑下一步ASBR。"
    },
    {
      "indent": 7,
      "text": "B. If route types are not the same, skip this alternate ASBR and consider next alternate ASBR.",
      "zh-CHS": "b.如果路由类型不相同，则跳过此交替ASBR，并考虑下一个交替ASBR。"
    },
    {
      "indent": 3,
      "text": "6. Apply inequality on alternate ASBR.",
      "zh-CHS": "6. 在备用ASBR上应用不等式。"
    },
    {
      "indent": 0,
      "text": "4.2.1.1. Multiple ASBRs Belonging to Different Areas",
      "section_title": true,
      "zh-CHS": "4.2.1.1. 属于不同区域的多个ASBR"
    },
    {
      "indent": 3,
      "text": "When RFC1583Compatibility is set to \"disabled\", OSPF [RFC2328] defines certain rules of preference to choose the ASBRs. While selecting an alternate ASBR for loop evaluation for LFA, these rules should be applied to ensure that the alternate neighbor does not cause looping.",
      "zh-CHS": "当RFC1583兼容性设置为“禁用”时，OSPF[RFC2328]定义了某些首选规则以选择ASBR。在为LFA的循环评估选择备用ASBR时，应应用这些规则以确保备用邻居不会导致循环。"
    },
    {
      "indent": 3,
      "text": "When there are multiple ASBRs belonging to different areas advertising the same prefix, pruning rules as defined in Section 16.4 of [RFC2328] are applied. The alternate ASBRs pruned using these rules are not considered for LFA evaluation.",
      "zh-CHS": "当有多个ASBR属于不同的区域，宣传相同的前缀时，应用[RFC2328]第16.4节中定义的修剪规则。LFA评估不考虑使用这些规则修剪的备用ASBR。"
    },
    {
      "indent": 0,
      "text": "4.2.1.2. Type 1 and Type 2 Costs",
      "section_title": true,
      "zh-CHS": "4.2.1.2. 第一类和第二类费用"
    },
    {
      "indent": 3,
      "text": "If there are multiple ASBRs not pruned via the rules described in Section 4.2.1.1, the cost type advertised by the ASBRs is compared. ASBRs advertising type 1 costs are preferred, and the type 2 costs are pruned. If two ASBRs advertise the same type 2 cost, the alternate ASBRs are considered along with their cost to reach the ASBR/forwarding address for evaluation. If the two ASBRs have the same type 2 cost as well as the same cost to reach the ASBR, ECMP FRR is programmed. When there are multiple ASBRs advertising the same type 2 cost for the prefix, primary Autonomous System (AS) external route calculation, as described in Section 16.4.1 of [RFC2328], selects the route with the lowest type 2 cost. ASBRs advertising a different type 2 cost (higher cost) are not considered for LFA evaluation. Alternate ASBRs advertising a type 2 cost for the prefix but not chosen as primary due to a higher cost to reach ASBR are considered for LFA evaluation. The inequalities for evaluating alternate ASBR for type 1 and type 2 costs are same, as the alternate ASBRs with different type 2 costs are pruned and the evaluation is based on ASBRS with equal type 2 costs.",
      "zh-CHS": "如果有多个ASBR未通过第4.2.1.1节中描述的规则进行修剪，则比较ASBR公布的成本类型。优先考虑ASBR的1类广告成本，削减2类广告成本。如果两个ASBR公布相同的类型2成本，则考虑备用ASBR及其成本，以到达ASBR/转发地址进行评估。如果两个ASBR具有相同的2类成本以及达到ASBR的相同成本，则编程ECMP FRR。当有多个ASBR为前缀宣传相同的类型2成本时，如[RFC2328]第16.4.1节所述，主自治系统（AS）外部路由计算选择具有最低类型2成本的路由。LFA评估不考虑广告不同类型2成本（较高成本）的ASBR。LFA评估中考虑了为前缀宣传类型2成本但由于达到ASBR的成本较高而未被选为主要成本的替代ASBR。对于类型1和类型2成本，评估备选ASBR的不平等性是相同的，因为具有不同类型2成本的备选ASBR被删减，并且评估基于具有相同类型2成本的ASBR。"
    },
    {
      "indent": 0,
      "text": "4.2.1.3. RFC1583Compatibility is Set to \"Enabled\"",
      "section_title": true,
      "zh-CHS": "4.2.1.3. RFC1583兼容性设置为“已启用”"
    },
    {
      "indent": 3,
      "text": "When RFC1583Compatibility is set to \"enabled\", multiple ASBRs belonging to different areas advertising the same prefix are chosen based on cost and hence are valid alternate ASBRs for the LFA evaluation. The inequalities described in Section 4.2.2 are applicable based on forwarding address and cost type advertised in the external Link State Advertisement (LSA).",
      "zh-CHS": "当RFC1583 Compatibility设置为“enabled”（启用）时，将根据成本选择属于不同区域的多个ASBR，宣传相同前缀，因此是LFA评估的有效替代ASBR。根据外部链路状态公告（LSA）中公布的转发地址和成本类型，第4.2.2节中描述的不平等适用。"
    },
    {
      "indent": 0,
      "text": "4.2.1.4. Type 7 Routes",
      "section_title": true,
      "zh-CHS": "4.2.1.4. 第7类路线"
    },
    {
      "indent": 3,
      "text": "Type 5 routes always get preference over type 7, and the alternate ASBRs chosen for LFA calculation should belong to the same type. Among type 7 routes, routes with the p-bit and forwarding address set have a higher preference than routes without these attributes. Alternate ASBRs selected for LFA comparison should have the same p-bit and forwarding address attributes.",
      "zh-CHS": "类型5路线总是优先于类型7，并且为LFA计算选择的备用ASBR应属于同一类型。在类型7路由中，具有p位和转发地址集的路由比不具有这些属性的路由具有更高的优先级。为LFA比较选择的备用ASBR应具有相同的p位和转发地址属性。"
    },
    {
      "indent": 0,
      "text": "4.2.2. Inequalities to Be Applied for Alternate ASBR Selection",
      "section_title": true,
      "zh-CHS": "4.2.2. 用于备用ASBR选择的不等式"
    },
    {
      "indent": 3,
      "text": "The alternate ASBRs selected using the mechanism described in Section 4.2.1 are evaluated for loop-free criteria using the inequalities below.",
      "zh-CHS": "使用第4.2.1节中描述的机制选择的备用ASBR使用以下不等式评估无回路标准。"
    },
    {
      "indent": 0,
      "text": "4.2.2.1. Forwarding Address Set to Non-zero Value",
      "section_title": true,
      "zh-CHS": "4.2.2.1. 转发地址设置为非零值"
    },
    {
      "indent": 3,
      "text": "Similar to the inequalities defined in Section 2, the following inequalities are defined when the forwarding address is a non-zero value.",
      "zh-CHS": "与第2节中定义的不等式类似，当转发地址为非零值时，定义了以下不等式。"
    },
    {
      "indent": 3,
      "text": "Link-Protecting LFAs:",
      "zh-CHS": "链路保护LFA："
    },
    {
      "indent": 6,
      "text": "F_opt(N,PO_i)+ Cost(PO_i,P) < D_opt(N,S) +\n                              F_opt(S,PO_best) + Cost(PO_best,P)",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "Link-Protecting + Downstream-paths-only LFAs:",
      "zh-CHS": "链路保护+仅下游路径LFA："
    },
    {
      "indent": 6,
      "text": "F_opt(N,PO_i)+ Cost(PO_i,P) < F_opt(S,PO_best) + Cost(PO_best,P)",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "Node-Protecting LFAs:",
      "zh-CHS": "节点保护LFA："
    },
    {
      "indent": 6,
      "text": "F_opt(N,PO_i)+ Cost(PO_i,P) < D_opt(N,E) +\n                              F_opt(E,PO_best) + Cost(PO_best,P)",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 6,
      "text": "Where:",
      "zh-CHS": "哪里："
    },
    {
      "indent": 6,
      "text": "P - The MHP being evaluated for computing alternates",
      "zh-CHS": "P-为计算备选方案而评估的MHP"
    },
    {
      "indent": 6,
      "text": "S - The computing router",
      "zh-CHS": "计算路由器"
    },
    {
      "indent": 6,
      "text": "N - The alternate router being evaluated",
      "zh-CHS": "N-正在评估的备用路由器"
    },
    {
      "indent": 6,
      "text": "E - The primary next hop on the shortest path from S to prefix P",
      "zh-CHS": "E-从S到前缀P的最短路径上的主要下一跳"
    },
    {
      "indent": 6,
      "text": "PO_i - The specific prefix-originating router being evaluated",
      "zh-CHS": "PO_i-正在评估的特定前缀始发路由器"
    },
    {
      "indent": 6,
      "text": "PO_best - The prefix-originating router on the shortest path from the computing router S to prefix P",
      "zh-CHS": "PO_best-从计算路由器S到前缀P的最短路径上的前缀起始路由器"
    },
    {
      "indent": 6,
      "text": "Cost(X,Y) - The external cost for Y as advertised by X",
      "zh-CHS": "成本（X，Y）-X宣传的Y的外部成本"
    },
    {
      "indent": 6,
      "text": "F_opt(X,Y) - The distance on the shortest path from node X to the forwarding address specified by ASBR Y",
      "zh-CHS": "F_opt（X，Y）-从节点X到ASBR Y指定的转发地址的最短路径上的距离"
    },
    {
      "indent": 6,
      "text": "D_opt(X,Y) - The distance on the shortest path from node X to node Y",
      "zh-CHS": "D_opt（X，Y）-从节点X到节点Y的最短路径上的距离"
    },
    {
      "indent": 0,
      "text": "4.2.2.2. ASBRs Advertising Type 1 and Type 2 Costs",
      "section_title": true,
      "zh-CHS": "4.2.2.2. ASBRs广告类型1和类型2成本"
    },
    {
      "indent": 3,
      "text": "Similar to the inequalities defined in Section 2, the following inequalities are defined for type 1 and type 2 costs.",
      "zh-CHS": "与第2节中定义的不平等类似，以下不平等适用于1类和2类成本。"
    },
    {
      "indent": 3,
      "text": "Link-Protecting LFAs:",
      "zh-CHS": "链路保护LFA："
    },
    {
      "indent": 6,
      "text": "D_opt(N,PO_i)+ Cost(PO_i,P) < D_opt(N,S) +\n                              D_opt(S,PO_best) + Cost(PO_best,P)",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "Link-Protecting + Downstream-paths-only LFAs:",
      "zh-CHS": "链路保护+仅下游路径LFA："
    },
    {
      "indent": 6,
      "text": "D_opt(N,PO_i)+ Cost(PO_i,P) < D_opt(S,PO_best) + Cost(PO_best,P)",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "Node-Protecting LFAs:",
      "zh-CHS": "节点保护LFA："
    },
    {
      "indent": 6,
      "text": "D_opt(N,PO_i)+ Cost(PO_i,P) < D_opt(N,E) +\n                              D_opt(E,PO_best) + Cost(PO_best,P)",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 6,
      "text": "Where:",
      "zh-CHS": "哪里："
    },
    {
      "indent": 6,
      "text": "P - The MHP being evaluated for computing alternates",
      "zh-CHS": "P-为计算备选方案而评估的MHP"
    },
    {
      "indent": 6,
      "text": "S - The computing router",
      "zh-CHS": "计算路由器"
    },
    {
      "indent": 6,
      "text": "N - The alternate router being evaluated",
      "zh-CHS": "N-正在评估的备用路由器"
    },
    {
      "indent": 6,
      "text": "E - The primary next hop on the shortest path from S to prefix P",
      "zh-CHS": "E-从S到前缀P的最短路径上的主要下一跳"
    },
    {
      "indent": 6,
      "text": "PO_i - The specific prefix-originating router being evaluated",
      "zh-CHS": "PO_i-正在评估的特定前缀始发路由器"
    },
    {
      "indent": 6,
      "text": "PO_best - The prefix-originating router on the shortest path from the computing router S to prefix P",
      "zh-CHS": "PO_best-从计算路由器S到前缀P的最短路径上的前缀起始路由器"
    },
    {
      "indent": 6,
      "text": "Cost(X,Y) - The external cost for Y as advertised by X",
      "zh-CHS": "成本（X，Y）-X宣传的Y的外部成本"
    },
    {
      "indent": 6,
      "text": "D_opt(X,Y) - The distance on the shortest path from node X to node Y",
      "zh-CHS": "D_opt（X，Y）-从节点X到节点Y的最短路径上的距离"
    },
    {
      "indent": 0,
      "text": "5. LFA Extended Procedures",
      "section_title": true,
      "zh-CHS": "5. LFA扩展程序"
    },
    {
      "indent": 3,
      "text": "This section explains additional considerations to the LFA base specification [RFC5286].",
      "zh-CHS": "本节说明LFA基本规范[RFC5286]的其他注意事项。"
    },
    {
      "indent": 0,
      "text": "5.1. Links with IGP MAX_METRIC",
      "section_title": true,
      "zh-CHS": "5.1. 与IGP MAX_度量的链接"
    },
    {
      "indent": 3,
      "text": "Sections 3.5 and 3.6 of [RFC5286] describe procedures for excluding nodes and links from use in alternate paths based on the maximum link metric. If these procedures are strictly followed, there are situations, described below, where the only potential alternate available that satisfies the basic loop-free condition will not be considered as alternative. This document refers to the maximum link metric in IGPs as the MAX_METRIC. MAX_METRIC is called \"maximum link metric\" when defined for IS-IS in [RFC5305] and \"MaxLinkMetric\" when defined for OSPF in [RFC6987].",
      "zh-CHS": "[RFC5286]的第3.5节和第3.6节描述了基于最大链路度量将节点和链路排除在备用路径中使用的程序。如果严格遵守这些程序，则在以下情况下，满足基本无回路条件的唯一潜在备选方案将不被视为备选方案。本文件将IGPs中的最大链路度量称为最大链路度量。在[RFC5305]中为is-is定义的最大链路度量称为“最大链路度量”，在[RFC6987]中为OSPF定义的最大链路度量称为“最大链路度量”。"
    },
    {
      "indent": 28,
      "text": " +---+  10  +---+  10 +---+\n | S |------|N1 |-----|D1 |\n +---+      +---+     +---+\n   |                    |\n10 |                 10 |\n   |MAX_METRIC(N2 to S) |\n   |                    |\n   |       +---+        |\n   +-------|N2 |--------+\n           +---+\n         10  |\n           +---+\n           |D2 |\n           +---+",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 20,
      "text": "Figure 3: Link with IGP MAX_METRIC",
      "zh-CHS": "图3：与IGP MAX_度量的链接"
    },
    {
      "indent": 3,
      "text": "In the simple example network in Figure 3, all the links have a cost of 10 in both directions, except for the link between S and N2. The S-N2 link has a cost of 10 in the forward direction, i.e., from S to N2, and a cost of MAX_METRIC (0xffffff /2^24 - 1 for IS-IS and 0xffff for OSPF) in the reverse direction, i.e., from N2 to S for a specific end-to-end TE requirement of the operator. At node S, D1 is reachable through N1 with a cost of 20, and D2 is reachable through N2 with a cost of 20. Even though neighbor N2 satisfies the basic loop-free condition (inequality 1 of [RFC5286]) for D1, S's neighbor",
      "zh-CHS": "在图3中的简单示例网络中，除S和N2之间的链路外，所有链路在两个方向上的成本均为10。S-N2链路在正向上的成本为10，即从S到N2，在反向上的成本为MAX_度量（IS-IS为0xffffff/2^24-1，OSPF为0xffff），即从N2到S，以满足运营商的特定端到端TE要求。在节点S处，D1可通过N1以20的代价到达，D2可通过N2以20的代价到达。即使邻居N2满足D1、S的邻居的基本无环条件（等式[RFC5286]）"
    },
    {
      "indent": 3,
      "text": "N2 could be excluded as a potential alternative because of the current exclusions specified in Sections 3.5 and 3.6 of [RFC5286]. But, the primary traffic destined to D2 continues to use the link; hence, irrespective of the reverse metric in this case, the same link MAY be used as a potential LFA for D1.",
      "zh-CHS": "由于[RFC5286]第3.5节和第3.6节中规定的当前排除情况，N2可作为潜在的替代品排除。但是，目的地为D2的主要业务继续使用该链路；因此，在这种情况下，不管反向度量如何，相同的链路可以用作D1的潜在LFA。"
    },
    {
      "indent": 3,
      "text": "Alternatively, the reverse metric of the link MAY be configured with MAX_METRIC-1 so that the link can be used as an alternative while meeting the operator's TE requirements and without having to update the router to fix this particular issue.",
      "zh-CHS": "或者，链路的反向度量可以配置为MAX_metric-1，以便在满足运营商的TE要求并且不必更新路由器以修复该特定问题的情况下，链路可以用作替代。"
    },
    {
      "indent": 0,
      "text": "5.2. MT Considerations",
      "section_title": true,
      "zh-CHS": "5.2. 机器翻译注意事项"
    },
    {
      "indent": 3,
      "text": "Sections 6.2 and 6.3.2 of [RFC5286] state that multi-topology OSPF and IS-IS are out of scope for that specification. This memo clarifies and describes the applicability.",
      "zh-CHS": "[RFC5286]第6.2节和第6.3.2节指出，多拓扑OSPF和IS-IS不在该规范的范围内。本备忘录澄清并描述了适用性。"
    },
    {
      "indent": 3,
      "text": "In multi-topology IGP deployments, for each MT-ID, a separate shortest path tree (SPT) is built with topology-specific adjacencies so the LFA principles laid out in [RFC5286] are actually applicable for MT IS-IS [RFC5120] LFA SPF. The primary difference in this case is identifying the eligible set of neighbors for each LFA computation; this is done per MT-ID. The eligible set for each MT-ID is determined by the presence of IGP adjacency from the source to the neighboring node on that MT-ID apart from the administrative restrictions and other checks laid out in [RFC5286]. The same is also applicable for MT-OSPF [RFC4915] or different AFs in multi-instance OSPFv3 [RFC5838].",
      "zh-CHS": "在多拓扑IGP部署中，对于每个MT-ID，使用拓扑特定的邻接构建单独的最短路径树（SPT），因此[RFC5286]中阐述的LFA原则实际上适用于MT is-is[RFC5120]LFA SPF。这种情况下的主要区别是为每个LFA计算识别合格的邻居集；这是根据MT-ID完成的。每个MT-ID的合格集由该MT-ID上从源到相邻节点的IGP邻接情况确定，不包括[RFC5286]中规定的管理限制和其他检查。这同样适用于MT-OSPF[RFC4915]或多实例OSPFv3[RFC5838]中的不同AFs。"
    },
    {
      "indent": 3,
      "text": "However, for MT IS-IS, if a \"standard unicast topology\" is used with MT-ID #0 [RFC5120] and both IPv4 [RFC5305] and IPv6 routes/AFs [RFC5308] are present, then the condition of network congruency is applicable for LFA computation as well. Network congruency here refers to having the same address families provisioned on all the links and all the nodes of the network with MT-ID #0. Here, with a single-decision process, both IPv4 and IPv6 next hops are computed for all the prefixes in the network. Similarly, with one LFA computation from all eligible neighbors per [RFC5286], all potential alternatives can be computed.",
      "zh-CHS": "然而，对于MT IS-IS，如果“标准单播拓扑”与MT-ID#0[RFC5120]一起使用，并且IPv4[RFC5305]和IPv6路由/AFs[RFC5308]都存在，则网络一致性条件也适用于LFA计算。这里的网络一致性指的是在网络的所有链路和所有节点上设置了相同的地址族，并且具有MT-ID#0。这里，通过单个决策过程，计算网络中所有前缀的IPv4和IPv6下一跳。类似地，根据[RFC5286]，从所有合格邻居处进行一次LFA计算，即可计算出所有潜在备选方案。"
    },
    {
      "indent": 0,
      "text": "6. IANA Considerations",
      "section_title": true,
      "zh-CHS": "6. IANA考虑"
    },
    {
      "indent": 3,
      "text": "This document has no IANA actions.",
      "zh-CHS": "本文档没有IANA操作。"
    },
    {
      "indent": 0,
      "text": "7. Security Considerations",
      "section_title": true,
      "zh-CHS": "7. 安全考虑"
    },
    {
      "indent": 3,
      "text": "The existing OSPF security considerations continue to apply, as do the recommended manual key management mechanisms specified in [RFC7474]. The existing security considerations for IS-IS also continue to apply, as specified in [RFC5304] and [RFC5310] and extended by [RFC7645] for Keying and Authentication for Routing Protocols (KARP). This document does not change any of the discussed protocol specifications (i.e., [RFC1195], [RFC5120], [RFC2328], and [RFC5838]); therefore, the security considerations of the LFA base specification [RFC5286] continue to apply.",
      "zh-CHS": "现有的OSPF安全注意事项继续适用，正如[RFC7474]中指定的推荐手动密钥管理机制一样。IS-IS的现有安全注意事项也继续适用，如[RFC5304]和[RFC5310]中所述，并由[RFC7645]扩展，用于路由协议（KARP）的密钥和身份验证。本文件不改变任何讨论的协议规范（即[RFC1195]、[RFC5120]、[RFC2328]和[RFC5838]）；因此，LFA基本规范[RFC5286]的安全考虑因素继续适用。"
    },
    {
      "indent": 0,
      "text": "8. References",
      "section_title": true,
      "zh-CHS": "8. 工具书类"
    },
    {
      "indent": 0,
      "text": "8.1. Normative References",
      "section_title": true,
      "zh-CHS": "8.1. 规范性引用文件"
    },
    {
      "indent": 3,
      "text": "[RFC2119] Bradner, S., \"Key words for use in RFCs to Indicate Requirement Levels\", BCP 14, RFC 2119, DOI 10.17487/RFC2119, March 1997, <https://www.rfc-editor.org/info/rfc2119>.",
      "zh-CHS": "[RFC2119]Bradner，S.，“RFC中用于表示需求水平的关键词”，BCP 14，RFC 2119，DOI 10.17487/RFC2119，1997年3月<https://www.rfc-editor.org/info/rfc2119>."
    },
    {
      "indent": 3,
      "text": "[RFC5286] Atlas, A., Ed. and A. Zinin, Ed., \"Basic Specification for IP Fast Reroute: Loop-Free Alternates\", RFC 5286, DOI 10.17487/RFC5286, September 2008, <https://www.rfc-editor.org/info/rfc5286>.",
      "zh-CHS": "[RFC5286]Atlas，A.，Ed.和A.Zinin，Ed.，“IP快速重路由的基本规范：无环路交替”，RFC 5286，DOI 10.17487/RFC5286，2008年9月<https://www.rfc-editor.org/info/rfc5286>."
    },
    {
      "indent": 3,
      "text": "[RFC8174] Leiba, B., \"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words\", BCP 14, RFC 8174, DOI 10.17487/RFC8174, May 2017, <https://www.rfc-editor.org/info/rfc8174>.",
      "zh-CHS": "[RFC8174]Leiba，B.，“RFC 2119关键词中大写与小写的歧义”，BCP 14，RFC 8174，DOI 10.17487/RFC8174，2017年5月<https://www.rfc-editor.org/info/rfc8174>."
    },
    {
      "indent": 0,
      "text": "8.2. Informative References",
      "section_title": true,
      "zh-CHS": "8.2. 资料性引用"
    },
    {
      "indent": 3,
      "text": "[RFC1195] Callon, R., \"Use of OSI IS-IS for routing in TCP/IP and dual environments\", RFC 1195, DOI 10.17487/RFC1195, December 1990, <https://www.rfc-editor.org/info/rfc1195>.",
      "zh-CHS": "[RFC1195]Callon，R.“OSI IS-IS在TCP/IP和双环境中的路由使用”，RFC 1195，DOI 10.17487/RFC1195，1990年12月<https://www.rfc-editor.org/info/rfc1195>."
    },
    {
      "indent": 3,
      "text": "[RFC2328] Moy, J., \"OSPF Version 2\", STD 54, RFC 2328, DOI 10.17487/RFC2328, April 1998, <https://www.rfc-editor.org/info/rfc2328>.",
      "zh-CHS": "[RFC2328]Moy，J.，“OSPF版本2”，STD 54，RFC 2328，DOI 10.17487/RFC2328，1998年4月<https://www.rfc-editor.org/info/rfc2328>."
    },
    {
      "indent": 3,
      "text": "[RFC4915] Psenak, P., Mirtorabi, S., Roy, A., Nguyen, L., and P. Pillay-Esnault, \"Multi-Topology (MT) Routing in OSPF\", RFC 4915, DOI 10.17487/RFC4915, June 2007, <https://www.rfc-editor.org/info/rfc4915>.",
      "zh-CHS": "[RFC4915]Psenak，P.，Mirtorabi，S.，Roy，A.，Nguyen，L.，和P.Pillay Esnault，“OSPF中的多拓扑（MT）路由”，RFC 4915，DOI 10.17487/RFC4915，2007年6月<https://www.rfc-editor.org/info/rfc4915>."
    },
    {
      "indent": 3,
      "text": "[RFC5120] Przygienda, T., Shen, N., and N. Sheth, \"M-ISIS: Multi Topology (MT) Routing in Intermediate System to Intermediate Systems (IS-ISs)\", RFC 5120, DOI 10.17487/RFC5120, February 2008, <https://www.rfc-editor.org/info/rfc5120>.",
      "zh-CHS": "[RFC5120]Przygienda，T.，Shen，N.，和N.Sheth，“M-ISIS：中间系统到中间系统（IS-ISs）的多拓扑（MT）路由”，RFC 5120，DOI 10.17487/RFC5120，2008年2月<https://www.rfc-editor.org/info/rfc5120>."
    },
    {
      "indent": 3,
      "text": "[RFC5304] Li, T. and R. Atkinson, \"IS-IS Cryptographic Authentication\", RFC 5304, DOI 10.17487/RFC5304, October 2008, <https://www.rfc-editor.org/info/rfc5304>.",
      "zh-CHS": "[RFC5304]Li，T.和R.Atkinson，“IS-IS加密认证”，RFC 5304，DOI 10.17487/RFC5304，2008年10月<https://www.rfc-editor.org/info/rfc5304>."
    },
    {
      "indent": 3,
      "text": "[RFC5305] Li, T. and H. Smit, \"IS-IS Extensions for Traffic Engineering\", RFC 5305, DOI 10.17487/RFC5305, October 2008, <https://www.rfc-editor.org/info/rfc5305>.",
      "zh-CHS": "[RFC5305]Li，T.和H.Smit，“交通工程的IS-IS扩展”，RFC 5305，DOI 10.17487/RFC5305，2008年10月<https://www.rfc-editor.org/info/rfc5305>."
    },
    {
      "indent": 3,
      "text": "[RFC5308] Hopps, C., \"Routing IPv6 with IS-IS\", RFC 5308, DOI 10.17487/RFC5308, October 2008, <https://www.rfc-editor.org/info/rfc5308>.",
      "zh-CHS": "[RFC5308]Hopps，C.，“使用IS-IS路由IPv6”，RFC 5308，DOI 10.17487/RFC5308，2008年10月<https://www.rfc-editor.org/info/rfc5308>."
    },
    {
      "indent": 3,
      "text": "[RFC5310] Bhatia, M., Manral, V., Li, T., Atkinson, R., White, R., and M. Fanto, \"IS-IS Generic Cryptographic Authentication\", RFC 5310, DOI 10.17487/RFC5310, February 2009, <https://www.rfc-editor.org/info/rfc5310>.",
      "zh-CHS": "[RFC5310]Bhatia，M.，Manral，V.，Li，T.，Atkinson，R.，White，R.，和M.Fanto，“IS-IS通用密码认证”，RFC 5310，DOI 10.17487/RFC5310，2009年2月<https://www.rfc-editor.org/info/rfc5310>."
    },
    {
      "indent": 3,
      "text": "[RFC5714] Shand, M. and S. Bryant, \"IP Fast Reroute Framework\", RFC 5714, DOI 10.17487/RFC5714, January 2010, <https://www.rfc-editor.org/info/rfc5714>.",
      "zh-CHS": "[RFC5714]Shand，M.和S.Bryant，“IP快速重路由框架”，RFC 5714，DOI 10.17487/RFC5714，2010年1月<https://www.rfc-editor.org/info/rfc5714>."
    },
    {
      "indent": 3,
      "text": "[RFC5838] Lindem, A., Ed., Mirtorabi, S., Roy, A., Barnes, M., and R. Aggarwal, \"Support of Address Families in OSPFv3\", RFC 5838, DOI 10.17487/RFC5838, April 2010, <https://www.rfc-editor.org/info/rfc5838>.",
      "zh-CHS": "[RFC5838]Lindem，A.，Ed.，Mirtorabi，S.，Roy，A.，Barnes，M.，和R.Aggarwal，“OSPFv3中地址家庭的支持”，RFC 5838，DOI 10.17487/RFC5838，2010年4月<https://www.rfc-editor.org/info/rfc5838>."
    },
    {
      "indent": 3,
      "text": "[RFC6987] Retana, A., Nguyen, L., Zinin, A., White, R., and D. McPherson, \"OSPF Stub Router Advertisement\", RFC 6987, DOI 10.17487/RFC6987, September 2013, <https://www.rfc-editor.org/info/rfc6987>.",
      "zh-CHS": "[RFC6987]Retana，A.，Nguyen，L.，Zinin，A.，White，R.，和D.McPherson，“OSPF存根路由器广告”，RFC 6987，DOI 10.17487/RFC6987，2013年9月<https://www.rfc-editor.org/info/rfc6987>."
    },
    {
      "indent": 3,
      "text": "[RFC7474] Bhatia, M., Hartman, S., Zhang, D., and A. Lindem, Ed., \"Security Extension for OSPFv2 When Using Manual Key Management\", RFC 7474, DOI 10.17487/RFC7474, April 2015, <https://www.rfc-editor.org/info/rfc7474>.",
      "zh-CHS": "[RFC7474]Bhatia，M.，Hartman，S.，Zhang，D.，和A.Lindem，Ed.，“使用手动密钥管理时OSPFv2的安全扩展”，RFC 7474，DOI 10.17487/RFC7474，2015年4月<https://www.rfc-editor.org/info/rfc7474>."
    },
    {
      "indent": 3,
      "text": "[RFC7645] Chunduri, U., Tian, A., and W. Lu, \"The Keying and Authentication for Routing Protocol (KARP) IS-IS Security Analysis\", RFC 7645, DOI 10.17487/RFC7645, September 2015, <https://www.rfc-editor.org/info/rfc7645>.",
      "zh-CHS": "[RFC7645]Chunduri，U.，Tian，A.，和W.Lu，“路由协议的键控和认证（KARP）IS-IS安全分析”，RFC 7645，DOI 10.17487/RFC76452015年9月<https://www.rfc-editor.org/info/rfc7645>."
    },
    {
      "indent": 0,
      "text": "Acknowledgements",
      "zh-CHS": "致谢"
    },
    {
      "indent": 3,
      "text": "The authors acknowledge Alia Atlas and Salih K.A. for their useful feedback and input. Thanks to Stewart Bryant for being Document Shepherd and providing detailed review comments. Thanks to Elwyn Davies for reviewing and providing feedback as part of the Gen-ART review. Thanks to Alvaro Retana, Adam Roach, Ben Campbell, Benjamin Kaduk, and sponsoring Routing Area Director Martin Vigoureux for providing detailed feedback and suggestions.",
      "zh-CHS": "作者感谢Alia Atlas和Salih K.A.提供的有用反馈和意见。感谢Stewart Bryant担任文档管理员并提供详细的审查意见。感谢Elwyn Davies在Gen ART review中审查并提供反馈。感谢Alvaro Retana、Adam Roach、Ben Campbell、Benjamin Kaduk和赞助路由区域总监Martin Vigoureux提供的详细反馈和建议。"
    },
    {
      "indent": 0,
      "text": "Contributors",
      "zh-CHS": "贡献者"
    },
    {
      "indent": 3,
      "text": "The following people contributed substantially to the content of this document and should be considered coauthors:",
      "zh-CHS": "以下人员对本文件的内容做出了重大贡献，应被视为合著者："
    },
    {
      "indent": 3,
      "text": "Chris Bowers Juniper Networks, Inc. 1194 N. Mathilda Ave. Sunnyvale, CA 94089 United States of America",
      "zh-CHS": "Chris Bowers Juniper Networks，Inc.美国加利福尼亚州桑尼维尔市马蒂尔达大道北1194号，邮编94089"
    },
    {
      "indent": 3,
      "text": "Email: cbowers@juniper.net",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "Bruno Decraene Orange France",
      "zh-CHS": "布鲁诺·德雷恩橙法国"
    },
    {
      "indent": 3,
      "text": "Email: bruno.decraene@orange.com",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 0,
      "text": "Authors' Addresses",
      "zh-CHS": "作者地址"
    },
    {
      "indent": 3,
      "text": "Pushpasis Sarkar (editor) Arrcus, Inc.",
      "zh-CHS": "Pushpasis Sarkar（编辑）Arrcus公司。"
    },
    {
      "indent": 3,
      "text": "Email: pushpasis.ietf@gmail.com",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "Uma Chunduri (editor) Huawei USA 2330 Central Expressway Santa Clara, CA 95050 United States of America",
      "zh-CHS": "Uma Chunduri（编辑）华为美国2330美国加利福尼亚州圣克拉拉中央高速公路95050"
    },
    {
      "indent": 3,
      "text": "Email: uma.chunduri@huawei.com",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "Shraddha Hegde Juniper Networks, Inc. Electra, Exora Business Park Bangalore, KA 560103 India",
      "zh-CHS": "Shraddha Hegde Juniper Networks，Inc.Electra，Exora商业园区班加罗尔，印度，邮编560103"
    },
    {
      "indent": 3,
      "text": "Email: shraddha@juniper.net",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "Jeff Tantsura Apstra, Inc.",
      "zh-CHS": "杰夫·坦特拉飞天公司。"
    },
    {
      "indent": 3,
      "text": "Email: jefftant.ietf@gmail.com",
      "raw": true,
      "zh-CHS": " "
    },
    {
      "indent": 3,
      "text": "Hannes Gredler RtBrick, Inc.",
      "zh-CHS": "汉内斯·格雷德勒RtBrick公司。"
    },
    {
      "indent": 3,
      "text": "Email: hannes@rtbrick.com",
      "raw": true,
      "zh-CHS": " "
    }
  ]
}